{"version":3,"file":"index.Dj4oo8qB.js","sources":["../../../src/screens/email-identifier-challenge/hooks/useEmailIdentifierChallengeManager.ts","../../../src/screens/email-identifier-challenge/components/EmailIdentifierChallengeForm.tsx","../../../src/screens/email-identifier-challenge/components/Footer.tsx","../../../src/screens/email-identifier-challenge/components/Header.tsx","../../../src/screens/email-identifier-challenge/index.tsx"],"sourcesContent":["import {\n  useEmailIdentifierChallenge,\n  useScreen,\n} from \"@auth0/auth0-acul-react/email-identifier-challenge\";\nimport type {\n  EmailChallengeOptions,\n  ScreenMembersOnEmailIdentifierChallenge,\n} from \"@auth0/auth0-acul-react/types\";\n\nimport { executeSafely } from \"@/utils/helpers/executeSafely\";\n\nimport locales from \"../locales/en.json\";\n\nexport const useEmailIdentifierChallengeManager = () => {\n  const screen = useScreen();\n  const emailIdentifierChallenge = useEmailIdentifierChallenge();\n\n  const { texts, data, links } = screen;\n\n  const handleSubmitEmailChallenge = async (code: string): Promise<void> => {\n    const options: EmailChallengeOptions = {\n      code: code?.trim() || \"\",\n    };\n\n    await executeSafely(\n      `Submit Email Challenge with options: ${JSON.stringify(options)}`,\n      () => emailIdentifierChallenge.submitEmailChallenge(options)\n    );\n  };\n\n  const handleResendCode = async (): Promise<void> => {\n    await executeSafely(\"Resend email code\", () =>\n      emailIdentifierChallenge.resendCode({})\n    );\n  };\n\n  const handleReturnToPrevious = async (): Promise<void> => {\n    await executeSafely(\"Return to previous screen\", () =>\n      emailIdentifierChallenge.returnToPrevious({})\n    );\n  };\n\n  return {\n    emailIdentifierChallenge,\n    handleSubmitEmailChallenge,\n    handleResendCode,\n    handleReturnToPrevious,\n    texts: (texts || {}) as ScreenMembersOnEmailIdentifierChallenge[\"texts\"],\n    isCaptchaAvailable: screen.isCaptchaAvailable === true,\n    data,\n    links,\n    locales,\n  };\n};\n","import { useForm } from \"react-hook-form\";\n\nimport { useErrors } from \"@auth0/auth0-acul-react/email-identifier-challenge\";\nimport type { EmailChallengeOptions } from \"@auth0/auth0-acul-react/types\";\n\nimport {\n  ULThemeFloatingLabelField,\n  ULThemeFormMessage,\n} from \"@/components/form\";\nimport { Form, FormField, FormItem } from \"@/components/ui/form\";\nimport { ULThemeButton } from \"@/components/ULThemeButton\";\nimport { ULThemeAlert, ULThemeAlertTitle } from \"@/components/ULThemeError\";\n\nimport { useEmailIdentifierChallengeManager } from \"../hooks/useEmailIdentifierChallengeManager\";\n\nfunction EmailIdentifierChallengeForm() {\n  const { handleSubmitEmailChallenge, texts, locales } =\n    useEmailIdentifierChallengeManager();\n\n  const { errors, dismiss } = useErrors();\n\n  // Initialize the form using react-hook-form\n  const form = useForm<EmailChallengeOptions>({\n    defaultValues: {\n      code: \"\",\n    },\n  });\n\n  const {\n    formState: { isSubmitting },\n  } = form;\n\n  const buttonText = texts?.buttonText || locales?.form?.submitButton;\n  const codeLabelText = texts?.placeholder || locales?.form?.codeLabel;\n\n  // Extract general errors (not field-specific) from the SDK using useErrors hook\n  const generalErrors = errors.byType(\"auth0\").filter((err) => !err.field);\n\n  const codeSDKError = errors.byField(\"code\")[0]?.message;\n\n  const onSubmit = async (formData: EmailChallengeOptions) => {\n    await handleSubmitEmailChallenge(formData.code);\n  };\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(onSubmit)}>\n        {/* General error messages */}\n        {generalErrors.length > 0 && (\n          <div className=\"space-y-3 mb-4\">\n            {generalErrors.map((error) => (\n              <ULThemeAlert\n                key={error.id}\n                variant=\"destructive\"\n                onDismiss={() => dismiss(error.id)}\n              >\n                <ULThemeAlertTitle>{error.message}</ULThemeAlertTitle>\n              </ULThemeAlert>\n            ))}\n          </div>\n        )}\n\n        {/* Email Code input field */}\n        <FormField\n          control={form.control}\n          name=\"code\"\n          rules={{\n            required: locales?.form?.codeRequired,\n          }}\n          render={({ field, fieldState }) => (\n            <FormItem>\n              <ULThemeFloatingLabelField\n                {...field}\n                label={codeLabelText}\n                type=\"text\"\n                inputMode=\"numeric\"\n                placeholder=\"\"\n                autoComplete=\"one-time-code\"\n                autoFocus\n                error={!!fieldState.error || !!codeSDKError}\n              />\n              <ULThemeFormMessage\n                sdkError={codeSDKError}\n                hasFormError={!!fieldState.error}\n              />\n            </FormItem>\n          )}\n        />\n\n        {/* Submit button */}\n        <ULThemeButton\n          type=\"submit\"\n          variant=\"primary\"\n          className=\"w-full\"\n          disabled={isSubmitting}\n        >\n          {isSubmitting ? locales?.form?.submitting : buttonText}\n        </ULThemeButton>\n      </form>\n    </Form>\n  );\n}\n\nexport default EmailIdentifierChallengeForm;\n","import { useResend } from \"@auth0/auth0-acul-react/email-identifier-challenge\";\n\nimport { ULThemeButton } from \"@/components/ULThemeButton\";\nimport { translate } from \"@/utils/helpers/localeTranslate\";\n\nimport { useEmailIdentifierChallengeManager } from \"../hooks/useEmailIdentifierChallengeManager\";\n\nfunction Footer() {\n  const { texts, handleResendCode, handleReturnToPrevious, locales } =\n    useEmailIdentifierChallengeManager();\n\n  const { remaining, disabled } = useResend({\n    timeoutSeconds: 30,\n  });\n\n  const resendText = texts?.resendText || locales?.footer?.resendText;\n  const resendLinkText =\n    texts?.resendActionText || locales?.footer?.resendActionText;\n  const backButtonText =\n    texts?.backButtonText || locales?.footer?.backButtonText;\n\n  const handleResendClick = async () => {\n    await handleResendCode();\n  };\n\n  const handleReturnClick = async () => {\n    await handleReturnToPrevious();\n  };\n\n  return (\n    <div className=\"text-center space-y-4 mt-4\">\n      {/* Resend code section */}\n      <div>\n        <span className=\"text-(length:--ul-theme-font-body-text-size) font-body\">\n          {resendText}{\" \"}\n        </span>\n        <ULThemeButton\n          onClick={handleResendClick}\n          variant=\"link\"\n          size=\"link\"\n          disabled={disabled}\n        >\n          {disabled\n            ? translate(\n                \"footer.resendCooldown\",\n                { seconds: String(remaining) },\n                locales\n              )\n            : resendLinkText}\n        </ULThemeButton>\n      </div>\n\n      {/* Go back button */}\n      <div>\n        <ULThemeButton onClick={handleReturnClick} variant=\"link\" size=\"link\">\n          {backButtonText}\n        </ULThemeButton>\n      </div>\n    </div>\n  );\n}\n\nexport default Footer;\n","import ULThemeLogo from \"@/components/ULThemeLogo\";\nimport ULThemeSubtitle from \"@/components/ULThemeSubtitle\";\nimport ULThemeTitle from \"@/components/ULThemeTitle\";\nimport { translate } from \"@/utils/helpers/localeTranslate\";\n\nimport { useEmailIdentifierChallengeManager } from \"../hooks/useEmailIdentifierChallengeManager\";\n\nfunction Header() {\n  const { texts, data, locales } = useEmailIdentifierChallengeManager();\n\n  // Handle text fallbacks in component\n  const logoAltText = texts?.logoAltText || locales?.header?.logoAlt;\n  const email = data?.email || locales?.header?.emailFallback;\n  const description =\n    texts?.description || translate(\"header.description\", { email }, locales);\n\n  return (\n    <>\n      <ULThemeLogo altText={logoAltText}></ULThemeLogo>\n      <ULThemeTitle>{texts?.title || locales?.header?.title}</ULThemeTitle>\n      <ULThemeSubtitle className=\"mb-6\">{description}</ULThemeSubtitle>\n    </>\n  );\n}\n\nexport default Header;\n","import ULThemeCard from \"@/components/ULThemeCard\";\nimport ULThemePageLayout from \"@/components/ULThemePageLayout\";\nimport { applyAuth0Theme } from \"@/utils/theme/themeEngine\";\n\nimport EmailIdentifierChallengeForm from \"./components/EmailIdentifierChallengeForm\";\nimport Footer from \"./components/Footer\";\nimport Header from \"./components/Header\";\nimport { useEmailIdentifierChallengeManager } from \"./hooks/useEmailIdentifierChallengeManager\";\n\nfunction EmailIdentifierChallengeScreen() {\n  // Extracting attributes from hook made out of EmailIdentifierChallenge instance of Auth0 React ACUL SDK\n  const { emailIdentifierChallenge, texts, locales } =\n    useEmailIdentifierChallengeManager();\n\n  applyAuth0Theme(emailIdentifierChallenge);\n  document.title = texts?.pageTitle || locales?.page?.title;\n\n  return (\n    <ULThemePageLayout className=\"theme-universal\">\n      <ULThemeCard className=\"w-full max-w-[400px] gap-0\">\n        <Header />\n        <EmailIdentifierChallengeForm />\n        <Footer />\n      </ULThemeCard>\n    </ULThemePageLayout>\n  );\n}\n\nexport default EmailIdentifierChallengeScreen;\n"],"names":["useEmailIdentifierChallengeManager","screen","useScreen","emailIdentifierChallenge","useEmailIdentifierChallenge","texts","data","links","code","options","executeSafely","locales","EmailIdentifierChallengeForm","handleSubmitEmailChallenge","errors","dismiss","useErrors","form","useForm","isSubmitting","buttonText","codeLabelText","generalErrors","err","codeSDKError","onSubmit","formData","jsx","Form","jsxs","error","ULThemeAlert","ULThemeAlertTitle","FormField","field","fieldState","FormItem","ULThemeFloatingLabelField","ULThemeFormMessage","ULThemeButton","Footer","handleResendCode","handleReturnToPrevious","remaining","disabled","useResend","resendText","resendLinkText","backButtonText","handleResendClick","handleReturnClick","translate","Header","logoAltText","email","description","Fragment","ULThemeLogo","ULThemeTitle","ULThemeSubtitle","EmailIdentifierChallengeScreen","applyAuth0Theme","ULThemePageLayout","ULThemeCard"],"mappings":"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"}