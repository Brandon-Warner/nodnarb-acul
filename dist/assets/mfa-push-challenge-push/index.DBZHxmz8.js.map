{"version":3,"file":"index.DBZHxmz8.js","sources":["../../../src/screens/mfa-push-challenge-push/hooks/useMfaPushChallengeManager.ts","../../../src/screens/mfa-push-challenge-push/components/Header.tsx","../../../src/screens/mfa-push-challenge-push/components/MfaPushChallengeForm.tsx","../../../src/screens/mfa-push-challenge-push/index.tsx"],"sourcesContent":["import {\n  useMfaPushChallengePush,\n  useScreen,\n  useUser,\n} from \"@auth0/auth0-acul-react/mfa-push-challenge-push\";\nimport {\n  CustomOptions,\n  MfaPushChallengePushMembers,\n  ScreenMembersOnMfaPushChallengePush,\n  UserMembers,\n  WithRememberOptions,\n} from \"@auth0/auth0-acul-react/types\";\n\nimport locales from \"@/screens/mfa-push-challenge-push/locales/en.json\";\nimport { executeSafely } from \"@/utils/helpers/executeSafely\";\n\nexport const useMfaPushChallengeManager = () => {\n  const screen: ScreenMembersOnMfaPushChallengePush = useScreen();\n  const userInfo: UserMembers = useUser();\n  const mfaPushChallengePush: MfaPushChallengePushMembers =\n    useMfaPushChallengePush();\n\n  const { texts, data, links } = screen;\n  const { enrolledFactors } = userInfo || {};\n\n  const handleContinueMfaPushChallenge = async (\n    payload?: WithRememberOptions\n  ): Promise<void> => {\n    await executeSafely(\n      `Continue MFA Push Challenge with options: ${JSON.stringify(payload)}`,\n      () => mfaPushChallengePush.continue(payload)\n    );\n  };\n\n  const handleResendPushNotification = async (\n    payload?: WithRememberOptions\n  ): Promise<void> => {\n    await executeSafely(\n      `Resend MFA Push Notification with options: ${JSON.stringify(payload)}`,\n      () => mfaPushChallengePush.resendPushNotification(payload)\n    );\n  };\n\n  const handleEnterCodeManually = async (\n    payload?: CustomOptions\n  ): Promise<void> => {\n    await executeSafely(\n      \"Switch to manual code entry for MFA Push Challenge\",\n      () => mfaPushChallengePush.enterCodeManually(payload)\n    );\n  };\n\n  const handleTryAnotherMethod = async (\n    payload?: CustomOptions\n  ): Promise<void> => {\n    await executeSafely(\n      \"Request MFA Push Notification via another method\",\n      () => mfaPushChallengePush.tryAnotherMethod(payload)\n    );\n  };\n\n  return {\n    data,\n    links,\n    locales,\n    enrolledFactors,\n    mfaPushChallengePush,\n    handleContinueMfaPushChallenge,\n    handleResendPushNotification,\n    handleEnterCodeManually,\n    handleTryAnotherMethod,\n    texts: (texts || {}) as ScreenMembersOnMfaPushChallengePush[\"texts\"],\n  };\n};\n","import ULThemeLogo from \"@/components/ULThemeLogo\";\nimport ULThemeSubtitle from \"@/components/ULThemeSubtitle\";\nimport ULThemeTitle from \"@/components/ULThemeTitle\";\n\nimport { useMfaPushChallengeManager } from \"../hooks/useMfaPushChallengeManager\";\n\nfunction Header() {\n  const { texts, locales } = useMfaPushChallengeManager();\n\n  // Use Locales as fallback to SDK texts\n  const titleText = texts?.title || locales.heading.title;\n  const descriptionText = texts?.description || locales.heading.description;\n  const logoAltText = texts?.logoAltText || locales.heading.logoAltText;\n\n  return (\n    <>\n      <ULThemeLogo altText={logoAltText}></ULThemeLogo>\n      <ULThemeTitle>{titleText}</ULThemeTitle>\n      <ULThemeSubtitle className=\"mb-6\">{descriptionText}</ULThemeSubtitle>\n    </>\n  );\n}\n\nexport default Header;\n","import { useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\n\nimport {\n  useErrors,\n  useMfaPolling,\n} from \"@auth0/auth0-acul-react/mfa-push-challenge-push\";\nimport type {\n  ErrorItem,\n  WithRememberOptions,\n} from \"@auth0/auth0-acul-react/types\";\n\nimport { Form, FormField, FormItem } from \"@/components/ui/form\";\nimport { Label } from \"@/components/ui/label\";\nimport { ULThemeButton } from \"@/components/ULThemeButton\";\nimport { ULThemeCheckbox } from \"@/components/ULThemeCheckbox\";\nimport { ULThemeAlert, ULThemeAlertTitle } from \"@/components/ULThemeError\";\nimport ULThemeSeparator from \"@/components/ULThemeSeparator\";\nimport ULThemeSocialProviderButton from \"@/components/ULThemeSocialProviderButton\";\nimport ULThemeSpinner from \"@/components/ULThemeSpinner\";\n\nimport { useMfaPushChallengeManager } from \"../hooks/useMfaPushChallengeManager\";\n\nfunction MfaSmsChallengeForm() {\n  const {\n    data,\n    texts,\n    locales,\n    enrolledFactors,\n    handleEnterCodeManually,\n    handleTryAnotherMethod,\n    handleContinueMfaPushChallenge,\n    handleResendPushNotification,\n  } = useMfaPushChallengeManager();\n\n  // Initialize the form using react-hook-form\n  const form = useForm<WithRememberOptions>({\n    defaultValues: {\n      rememberDevice: false,\n    },\n  });\n\n  // Use Locales as fallback to SDK texts\n  const rememberDeviceText =\n    texts?.rememberMeText || locales.form.rememberDeviceText;\n  const enterOtpCodeText = texts?.enterOtpCode || locales.form.enterOtpCodeText;\n  const resendText = texts?.resendText || locales.form.resendText;\n  const resendLinkText =\n    texts?.resendActionText || locales.form.resendActionText;\n  const tryAnotherMethodText =\n    texts?.pickAuthenticatorText || locales.form.tryAnotherMethodText;\n  const { deviceName, showRememberDevice } = data || {};\n  const separatorText = texts?.separatorText || locales.form.separatorText;\n  const shouldShowTryAnotherMethod = enrolledFactors?.length\n    ? enrolledFactors.length > 1\n    : false;\n\n  const { errors, hasError, dismiss } = useErrors();\n\n  // Get general errors (not field-specific)\n  const generalErrors: ErrorItem[] = errors\n    .byType(\"auth0\")\n    .filter((err) => !err.field);\n\n  // Automatically start polling when the page loads\n  const { isRunning, startPolling, stopPolling } = useMfaPolling({\n    intervalMs: 3000,\n    onCompleted: () => {\n      handleContinueMfaPushChallenge({\n        rememberDevice: form.getValues().rememberDevice,\n      });\n    },\n    onError: (error: unknown) => {\n      console.error(\"Polling error:\", error);\n    },\n  });\n\n  const onResendActionClick = async (formData: WithRememberOptions) => {\n    await handleResendPushNotification(\n      formData?.rememberDevice ? { rememberDevice: true } : {}\n    );\n  };\n\n  useEffect(() => {\n    startPolling();\n    return () => stopPolling();\n  }, [startPolling, stopPolling]);\n\n  return (\n    <Form {...form}>\n      <form>\n        {/* General error messages */}\n        {hasError && generalErrors.length > 0 && (\n          <div className=\"space-y-3 mb-4\">\n            {generalErrors.map((error: ErrorItem) => (\n              <ULThemeAlert\n                key={error.id}\n                variant=\"destructive\"\n                onDismiss={() => dismiss(error.id)}\n              >\n                <ULThemeAlertTitle>\n                  {error.message || locales.errors.errorOccurred}\n                </ULThemeAlertTitle>\n              </ULThemeAlert>\n            ))}\n          </div>\n        )}\n\n        {/* Disabled Device Name Field */}\n        <FormField\n          control={form.control}\n          name=\"device\"\n          render={({ field }) => (\n            <FormItem>\n              <ULThemeSocialProviderButton\n                displayName={\"\"}\n                key={deviceName}\n                buttonText={deviceName || locales.form.yourDeviceText}\n                iconComponent={isRunning && <ULThemeSpinner />}\n                disabled\n                name={field.name}\n                value={field.value as string | undefined}\n                className=\"theme-universal:border-input-border theme-universal:bg-disabled theme-universal:opacity-100\"\n              />\n            </FormItem>\n          )}\n        />\n\n        {/* Remember device checkbox */}\n        {showRememberDevice && (\n          <FormField\n            control={form.control}\n            name=\"rememberDevice\"\n            render={({ field }) => (\n              <FormItem>\n                <div className=\"flex items-center space-x-2 my-4 gap-1\">\n                  <ULThemeCheckbox\n                    id=\"rememberDevice\"\n                    checked={field.value}\n                    onCheckedChange={field.onChange}\n                    className=\"w-5 h-5 border-input-border border-radius-[1]\"\n                  />\n                  <Label\n                    htmlFor=\"rememberDevice\"\n                    className=\"text-(length:--ul-theme-font-body-text-size) cursor-pointer\"\n                  >\n                    {rememberDeviceText}\n                  </Label>\n                </div>\n              </FormItem>\n            )}\n          />\n        )}\n\n        <ULThemeSeparator text={separatorText} className=\"my-1\" />\n\n        <div className=\"text-center space-y-2 mt-6\">\n          {/* Enter manual code button */}\n          <ULThemeButton\n            onClick={() => handleEnterCodeManually()}\n            variant=\"outline\"\n            className=\"w-full mb-4\"\n          >\n            {enterOtpCodeText}\n          </ULThemeButton>\n\n          {/* Resend code link with optional get a call */}\n          <span className=\"text-(length:--ul-theme-font-body-text-size) font-body\">\n            {resendText}{\" \"}\n          </span>\n          <ULThemeButton\n            onClick={() =>\n              onResendActionClick({\n                rememberDevice: Boolean(form.getValues().rememberDevice),\n              })\n            }\n            variant=\"link\"\n            size=\"link\"\n          >\n            {resendLinkText}\n          </ULThemeButton>\n\n          {/* Try another method link */}\n          {shouldShowTryAnotherMethod && (\n            <ULThemeButton\n              onClick={() => handleTryAnotherMethod()}\n              variant=\"link\"\n              size=\"link\"\n            >\n              {tryAnotherMethodText}\n            </ULThemeButton>\n          )}\n        </div>\n      </form>\n    </Form>\n  );\n}\n\nexport default MfaSmsChallengeForm;\n","import ULThemeCard from \"@/components/ULThemeCard\";\nimport ULThemePageLayout from \"@/components/ULThemePageLayout\";\nimport { applyAuth0Theme } from \"@/utils/theme/themeEngine\";\n\nimport Header from \"./components/Header\";\nimport MfaPushChallengeForm from \"./components/MfaPushChallengeForm\";\nimport { useMfaPushChallengeManager } from \"./hooks/useMfaPushChallengeManager\";\n\nfunction MfaPushChallengeScreen() {\n  // Extracting attributes from hook made out of MfaPushChallenge instance of Auth0 React ACUL SDK\n  const { texts, locales, mfaPushChallengePush } = useMfaPushChallengeManager();\n\n  applyAuth0Theme(mfaPushChallengePush);\n  document.title = texts?.pageTitle || locales.page.title;\n\n  return (\n    <ULThemePageLayout className=\"theme-universal\">\n      <ULThemeCard className=\"w-full max-w-[400px] gap-0\">\n        <Header />\n        <MfaPushChallengeForm />\n      </ULThemeCard>\n    </ULThemePageLayout>\n  );\n}\n\nexport default MfaPushChallengeScreen;\n"],"names":["useMfaPushChallengeManager","screen","useScreen","userInfo","useUser","mfaPushChallengePush","useMfaPushChallengePush","texts","data","links","enrolledFactors","locales","payload","executeSafely","Header","titleText","descriptionText","logoAltText","jsxs","Fragment","jsx","ULThemeLogo","ULThemeTitle","ULThemeSubtitle","MfaSmsChallengeForm","handleEnterCodeManually","handleTryAnotherMethod","handleContinueMfaPushChallenge","handleResendPushNotification","form","useForm","rememberDeviceText","enterOtpCodeText","resendText","resendLinkText","tryAnotherMethodText","deviceName","showRememberDevice","separatorText","shouldShowTryAnotherMethod","errors","hasError","dismiss","useErrors","generalErrors","err","isRunning","startPolling","stopPolling","useMfaPolling","error","onResendActionClick","formData","useEffect","Form","ULThemeAlert","ULThemeAlertTitle","FormField","field","FormItem","ULThemeSocialProviderButton","ULThemeSpinner","ULThemeCheckbox","Label","ULThemeSeparator","ULThemeButton","MfaPushChallengeScreen","applyAuth0Theme","ULThemePageLayout","ULThemeCard","MfaPushChallengeForm"],"mappings":"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"}