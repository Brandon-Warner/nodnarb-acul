{"version":3,"file":"index.CcKAeKcy.js","sources":["../../../src/screens/mfa-begin-enroll-options/hooks/useMFABeginEnrollOptionsManager.tsx","../../../src/screens/mfa-begin-enroll-options/components/Header.tsx","../../../src/screens/mfa-begin-enroll-options/components/MFAEnrollOptions.tsx","../../../src/screens/mfa-begin-enroll-options/index.tsx"],"sourcesContent":["import {\n  enroll,\n  useErrors,\n  useMfaBeginEnrollOptions,\n  useScreen,\n} from \"@auth0/auth0-acul-react/mfa-begin-enroll-options\";\nimport { MfaEnrollOptions, ScreenMembers } from \"@auth0/auth0-acul-react/types\";\n\nimport { executeSafely } from \"@/utils/helpers/executeSafely\";\n\nimport locales from \"../locales/en.json\";\n\n/**\n * Handles the MFA enrollment process\n *\n * @returns A promise that resolves when the MFA enrollment process is complete.\n */\nexport const useMfaBeginEnrollOptionsManager = () => {\n  const { texts } = useScreen();\n\n  const handleEnroll = async (payload: MfaEnrollOptions): Promise<void> => {\n    await executeSafely(\n      `Enroll into the MFA factor: ${JSON.stringify(payload)}`,\n      () => enroll(payload)\n    );\n  };\n\n  return {\n    mfaBeginEnrollOptions: useMfaBeginEnrollOptions(),\n    handleEnroll,\n    texts: (texts || {}) as ScreenMembers[\"texts\"],\n    enrollmentOptions: useMfaBeginEnrollOptions().user?.enrolledFactors || [],\n    useErrors: useErrors(),\n    locales,\n  };\n};\n","import ULThemeLogo from \"@/components/ULThemeLogo\";\nimport ULThemeSubtitle from \"@/components/ULThemeSubtitle\";\nimport ULThemeTitle from \"@/components/ULThemeTitle\";\n\nimport { useMfaBeginEnrollOptionsManager } from \"../hooks/useMFABeginEnrollOptionsManager\";\n\nfunction Header() {\n  const { texts, locales } = useMfaBeginEnrollOptionsManager();\n\n  // Handle text fallbacks in component\n  const logoAltText = texts?.logoAltText || locales.header.logoAltText;\n  const title = texts?.title || locales.header.title;\n  const description = texts?.description || locales.header.description;\n\n  return (\n    <>\n      <ULThemeLogo altText={logoAltText}></ULThemeLogo>\n      <ULThemeTitle>{title}</ULThemeTitle>\n      <ULThemeSubtitle className=\"mb-6\">{description}</ULThemeSubtitle>\n    </>\n  );\n}\n\nexport default Header;\n","import type {\n  ErrorItem,\n  MfaEnrollFactorType,\n} from \"@auth0/auth0-acul-react/types\";\nimport { ChevronRight } from \"lucide-react\";\n\nimport {\n  MFAGuardianIcon,\n  MFAOTPIcon,\n  MFAPhoneIcon,\n  MFASmsIcon,\n  MFAWebAuthnRoamingIcon,\n} from \"@/assets/icons\";\nimport { ULThemeAlert, ULThemeAlertTitle } from \"@/components/ULThemeError\";\nimport ULThemeSocialProviderButton from \"@/components/ULThemeSocialProviderButton\";\n\nimport { useMfaBeginEnrollOptionsManager } from \"../hooks/useMFABeginEnrollOptionsManager\";\n\nfunction MFAEnrollOptions() {\n  // Extracting attributes from hook made out of MFABeginEnrollOptionsInstance class of Auth0 React SDK\n  const { texts, handleEnroll, useErrors, enrollmentOptions, locales } =\n    useMfaBeginEnrollOptionsManager();\n  const { errors, hasError, dismiss } = useErrors;\n\n  // Extract general errors (not field-specific) from the SDK\n  const generalErrors: ErrorItem[] =\n    errors.byType(\"auth0\")?.filter((error) => {\n      return !error.field || error.field === null;\n    }) || [];\n  const enrollOptions = enrollmentOptions as MfaEnrollFactorType[];\n\n  const displayNameMap: Record<MfaEnrollFactorType, string> = {\n    sms: texts?.authenticatorNamesSMS ?? locales.MFAOptions.sms,\n    voice: texts?.authenticatorNamesVoice ?? locales.MFAOptions.voice,\n    phone: texts?.authenticatorNamesPhone ?? locales.MFAOptions.phone,\n    \"push-notification\":\n      texts?.authenticatorNamesPushNotification ??\n      locales.MFAOptions.pushNotification,\n    otp: texts?.authenticatorNamesOTP ?? locales.MFAOptions.otp,\n    \"webauthn-roaming\":\n      texts?.authenticatorNamesWebauthnRoaming ??\n      locales.MFAOptions.webauthnRoaming,\n  };\n\n  const iconMap: Record<MfaEnrollFactorType, React.ReactNode> = {\n    sms: <MFASmsIcon />,\n    voice: <MFAPhoneIcon />,\n    phone: <MFAPhoneIcon />,\n    \"push-notification\": <MFAGuardianIcon />,\n    otp: <MFAOTPIcon />,\n    \"webauthn-roaming\": <MFAWebAuthnRoamingIcon />,\n  };\n\n  function getDisplayName(factor: MfaEnrollFactorType) {\n    return displayNameMap[factor] || factor;\n  }\n\n  function getIcon(factor: MfaEnrollFactorType) {\n    return iconMap[factor];\n  }\n\n  return (\n    <>\n      {/* General error messages */}\n      {hasError && generalErrors.length > 0 && (\n        <div className=\"space-y-3 mb-4\">\n          {generalErrors.map((error: ErrorItem) => (\n            <ULThemeAlert\n              key={error.id}\n              variant=\"destructive\"\n              onDismiss={() => dismiss(error.id)}\n            >\n              <ULThemeAlertTitle>{error.message}</ULThemeAlertTitle>\n            </ULThemeAlert>\n          ))}\n        </div>\n      )}\n\n      {/* Render buttons for each enrollment option */}\n      <div className=\"space-y-2\">\n        {enrollOptions.map((option) => {\n          return (\n            <ULThemeSocialProviderButton\n              key={option}\n              displayName={getDisplayName(option)}\n              buttonText={getDisplayName(option)}\n              iconEnd={\n                <ChevronRight className=\"w-4 h-4 theme-universal:text-input-labels\" />\n              }\n              iconComponent={getIcon(option)}\n              onClick={() => handleEnroll({ action: option })}\n              className=\"flex items-center gap-2 border-black\"\n            ></ULThemeSocialProviderButton>\n          );\n        })}\n      </div>\n    </>\n  );\n}\nexport default MFAEnrollOptions;\n","import ULThemeCard from \"@/components/ULThemeCard\";\nimport ULThemePageLayout from \"@/components/ULThemePageLayout\";\nimport { applyAuth0Theme } from \"@/utils/theme\";\n\nimport Header from \"./components/Header\";\nimport MFAEnrollOptions from \"./components/MFAEnrollOptions\";\nimport { useMfaBeginEnrollOptionsManager } from \"./hooks/useMFABeginEnrollOptionsManager\";\n\nfunction MFABeginEnrollOptions() {\n  // Extracting attributes from hook made out of MFABeginEnrollOptionsInstance class of Auth0 React SDK\n  const { mfaBeginEnrollOptions, texts, locales } =\n    useMfaBeginEnrollOptionsManager();\n\n  // Apply theme from SDK instance when screen loads\n  applyAuth0Theme(mfaBeginEnrollOptions);\n  document.title = texts?.pageTitle || locales.pageTitle;\n\n  return (\n    // Applying UDS theme overrides using the \"theme-universal\" class\n    <ULThemePageLayout className=\"theme-universal\">\n      <ULThemeCard className=\"w-full max-w-[400px] gap-0\">\n        <Header />\n        <MFAEnrollOptions />\n      </ULThemeCard>\n    </ULThemePageLayout>\n  );\n}\n\nexport default MFABeginEnrollOptions;\n"],"names":["useMfaBeginEnrollOptionsManager","texts","useScreen","handleEnroll","payload","executeSafely","enroll","useMfaBeginEnrollOptions","useErrors","locales","Header","logoAltText","title","description","jsxs","Fragment","jsx","ULThemeLogo","ULThemeTitle","ULThemeSubtitle","MFAEnrollOptions","enrollmentOptions","errors","hasError","dismiss","generalErrors","error","enrollOptions","displayNameMap","iconMap","MFASmsIcon","MFAPhoneIcon","MFAGuardianIcon","MFAOTPIcon","MFAWebAuthnRoamingIcon","getDisplayName","factor","getIcon","ULThemeAlert","ULThemeAlertTitle","option","ULThemeSocialProviderButton","ChevronRight","MFABeginEnrollOptions","mfaBeginEnrollOptions","applyAuth0Theme","ULThemePageLayout","ULThemeCard"],"mappings":"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"}