{"version":3,"file":"index.Wp9ZlWuK.js","sources":["../../../src/screens/login-passwordless-email-code/hooks/useLoginPasswordlessEmailCodeManager.ts","../../../src/screens/login-passwordless-email-code/components/Footer.tsx","../../../src/screens/login-passwordless-email-code/components/Header.tsx","../../../src/screens/login-passwordless-email-code/components/IdentifierForm.tsx","../../../src/screens/login-passwordless-email-code/index.tsx"],"sourcesContent":["import {\n  useLoginPasswordlessEmailCode,\n  useScreen,\n} from \"@auth0/auth0-acul-react/login-passwordless-email-code\";\nimport {\n  CustomOptions,\n  LoginPasswordlessEmailCodeMembers,\n  ScreenMembersOnLoginPasswordlessEmailCode,\n  SubmitCodeOptions,\n} from \"@auth0/auth0-acul-react/types\";\n\nimport locales from \"@/screens/login-passwordless-email-code/locales/en.json\";\nimport { executeSafely } from \"@/utils/helpers/executeSafely\";\n\n/**\n * Handles the login process using a email and a code.\n * Optionally includes a CAPTCHA value if required.\n *\n * @param captcha - (Optional) The CAPTCHA value if required.\n * @param code - Code sent to the user's email.\n * @returns A promise that resolves when the login process is complete.\n */\nexport const useLoginPasswordlessEmailCodeManager = () => {\n  const screen: ScreenMembersOnLoginPasswordlessEmailCode = useScreen();\n  const loginPasswordlessEmailCode: LoginPasswordlessEmailCodeMembers =\n    useLoginPasswordlessEmailCode();\n\n  const { texts, isCaptchaAvailable, captcha, data, links } = screen;\n\n  const handleSubmitEmailCode = async (\n    payload: SubmitCodeOptions\n  ): Promise<void> => {\n    const options: { code: string; captcha?: string } = {\n      code:\n        typeof payload?.code === \"string\"\n          ? payload.code.trim()\n          : String(payload?.code || \"\"),\n    };\n    if (screen.isCaptchaAvailable && payload?.captcha?.trim()) {\n      options.captcha = payload?.captcha.trim();\n    }\n    executeSafely(\n      `Submit Email Code with options: ${JSON.stringify(options)}`,\n      () => loginPasswordlessEmailCode.submitCode(options)\n    );\n  };\n\n  const handleResendEmailCode = async (\n    payload?: CustomOptions\n  ): Promise<void> => {\n    executeSafely(\n      `Resent Email Code with Custom options: ${JSON.stringify(payload)}`,\n      () => loginPasswordlessEmailCode.resendCode(payload)\n    );\n  };\n\n  return {\n    locales,\n    captcha,\n    data,\n    links,\n    loginPasswordlessEmailCode,\n    isCaptchaAvailable: isCaptchaAvailable,\n    handleSubmitEmailCode,\n    handleResendEmailCode,\n    texts: (texts || {}) as ScreenMembersOnLoginPasswordlessEmailCode[\"texts\"],\n  };\n};\n","import { useResend } from \"@auth0/auth0-acul-react/login-passwordless-email-code\";\n\nimport { ULThemeButton } from \"@/components/ULThemeButton\";\nimport { translate } from \"@/utils/helpers/localeTranslate\";\n\nimport { useLoginPasswordlessEmailCodeManager } from \"../hooks/useLoginPasswordlessEmailCodeManager\";\n\nfunction Footer() {\n  const { texts, locales, handleResendEmailCode } =\n    useLoginPasswordlessEmailCodeManager();\n\n  // Use locales as fallback for SDK texts\n  const resendText = texts?.resendText || locales.footer.resendActionText;\n  const resendLinkText =\n    texts?.resendActionText || locales.footer.resendActionLinkText;\n\n  const { remaining, disabled } = useResend({\n    timeoutSeconds: 30,\n  });\n\n  const handleResendClick = async () => {\n    await handleResendEmailCode();\n  };\n\n  return (\n    <div className=\"mt-4 text-center\">\n      <span className=\"pr-1 text-body-text text-(length:--ul-theme-font-body-text-size) font-body\">\n        {resendText}\n      </span>\n      <ULThemeButton\n        variant=\"link\"\n        size=\"link\"\n        disabled={disabled}\n        onClick={handleResendClick}\n      >\n        {disabled\n          ? translate(\n              \"footer.resendCooldown\",\n              { seconds: String(remaining) },\n              locales\n            )\n          : resendLinkText}\n      </ULThemeButton>\n    </div>\n  );\n}\n\nexport default Footer;\n","import ULThemeLogo from \"@/components/ULThemeLogo\";\nimport ULThemeSubtitle from \"@/components/ULThemeSubtitle\";\nimport ULThemeTitle from \"@/components/ULThemeTitle\";\n\nimport { useLoginPasswordlessEmailCodeManager } from \"../hooks/useLoginPasswordlessEmailCodeManager\";\n\nfunction Header() {\n  const { texts, locales } = useLoginPasswordlessEmailCodeManager();\n\n  // Use locales as fallback for SDK texts\n  const titleText = texts?.title || locales.heading.title;\n  const descriptionText = texts?.description || locales.heading.description;\n  const logoAltText = texts?.logoAltText || locales.heading.logoAltText;\n\n  return (\n    <>\n      <ULThemeLogo altText={logoAltText}></ULThemeLogo>\n      <ULThemeTitle>{titleText}</ULThemeTitle>\n      <ULThemeSubtitle className=\"mb-6\">{descriptionText}</ULThemeSubtitle>\n    </>\n  );\n}\n\nexport default Header;\n","import { useForm } from \"react-hook-form\";\n\nimport { useErrors } from \"@auth0/auth0-acul-react/login-passwordless-email-code\";\nimport type {\n  ErrorItem,\n  SubmitCodeOptions,\n} from \"@auth0/auth0-acul-react/types\";\n\nimport Captcha from \"@/components/Captcha/index\";\nimport {\n  ULThemeFloatingLabelField,\n  ULThemeFormMessage,\n} from \"@/components/form\";\nimport { Form, FormField, FormItem } from \"@/components/ui/form\";\nimport { ULThemeButton } from \"@/components/ULThemeButton\";\nimport { ULThemeAlert, ULThemeAlertTitle } from \"@/components/ULThemeError\";\nimport ULThemeLink from \"@/components/ULThemeLink\";\nimport { useCaptcha } from \"@/hooks/useCaptcha\";\n\nimport { useLoginPasswordlessEmailCodeManager } from \"../hooks/useLoginPasswordlessEmailCodeManager\";\n\n/**\n * IdentifierForm Component\n *\n * This component renders the login form for the LoginPassword screen.\n * It includes fields for username, password, and CAPTCHA (if required),\n * along with error handling and support for editing identifiers.\n */\nfunction IdentifierForm() {\n  // Extract necessary methods and properties from the custom hook\n  const {\n    texts,\n    locales,\n    data,\n    links,\n    captcha,\n    isCaptchaAvailable,\n    handleSubmitEmailCode,\n  } = useLoginPasswordlessEmailCodeManager();\n\n  // Initialize the form using react-hook-form\n  const form = useForm<SubmitCodeOptions>({\n    defaultValues: {\n      email: \"\",\n      code: \"\",\n      captcha: \"\",\n    },\n  });\n\n  const {\n    formState: { isSubmitting },\n  } = form;\n\n  // Use locales as fallback to SDK texts\n  const buttonText = texts?.buttonText || locales.form.continueButtonText;\n  const codeLabelText = texts?.placeholder || locales.form.codeLabelText;\n  const captchaLabel = texts?.captchaCodePlaceholder\n    ? `${texts.captchaCodePlaceholder}*`\n    : locales.form.captchaLabel;\n  const editText = texts?.editText || locales.form.editText;\n  const editAriaLabel =\n    texts?.editLinkScreenReadableText || locales.form.editIdentifierLinkText;\n  const codeRequiredErrorMessage = locales.errors.codeIsRequired;\n\n  const { captchaConfig, captchaProps, captchaValue } = useCaptcha(\n    captcha || undefined,\n    captchaLabel\n  );\n\n  const { errors, hasError, dismiss } = useErrors();\n\n  // Get field-specific SDK errors\n  const emailSDKError = errors.byField(\"email\")[0]?.message;\n  const codeSDKError = errors.byField(\"code\")[0]?.message;\n  const captchaSDKError = errors.byField(\"captcha\")[0]?.message;\n\n  // Get general errors (not field-specific)\n  const generalErrors: ErrorItem[] = errors\n    .byType(\"auth0\")\n    .filter((err) => !err.field);\n\n  /**\n   * Handles form submission.\n   *\n   * @param data - The form data containing email, code, and optional CAPTCHA.\n   */\n  const onSubmit = async (data: SubmitCodeOptions) => {\n    await handleSubmitEmailCode({\n      code: String(data.code),\n      captcha: isCaptchaAvailable && captchaValue ? captchaValue : undefined,\n    });\n  };\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(onSubmit)}>\n        {/* General error messages */}\n        {hasError && generalErrors.length > 0 && (\n          <div className=\"space-y-3 mb-4\">\n            {generalErrors.map((error) => (\n              <ULThemeAlert\n                key={error.id}\n                variant=\"destructive\"\n                onDismiss={() => dismiss(error.id)}\n              >\n                <ULThemeAlertTitle>\n                  {error.message || locales.errors.errorOccurred}\n                </ULThemeAlertTitle>\n              </ULThemeAlert>\n            ))}\n          </div>\n        )}\n\n        {/* Prefilled Email(Username) input field */}\n        <FormField\n          control={form.control}\n          name=\"email\"\n          render={({ field, fieldState }) => (\n            <FormItem>\n              <ULThemeFloatingLabelField\n                {...field}\n                label=\"\"\n                value={data?.username || \"\"}\n                error={!!fieldState.error || !!emailSDKError}\n                readOnly={true}\n                endAdornment={\n                  <ULThemeLink\n                    href={links?.edit_identifier}\n                    aria-label={editAriaLabel}\n                  >\n                    {editText}\n                  </ULThemeLink>\n                }\n                className=\"pr-4\"\n              />\n              <ULThemeFormMessage\n                sdkError={emailSDKError}\n                hasFormError={!!fieldState.error}\n              />\n            </FormItem>\n          )}\n        />\n\n        {/* Email Code input field */}\n        <FormField\n          control={form.control}\n          name=\"code\"\n          rules={{\n            required: codeRequiredErrorMessage,\n          }}\n          render={({ field, fieldState }) => (\n            <FormItem>\n              <ULThemeFloatingLabelField\n                {...field}\n                label={codeLabelText}\n                autoFocus={true}\n                error={!!fieldState.error || !!codeSDKError}\n              />\n              <ULThemeFormMessage\n                sdkError={codeSDKError}\n                hasFormError={!!fieldState.error}\n              />\n            </FormItem>\n          )}\n        />\n\n        {/* Captcha Field */}\n        {isCaptchaAvailable && captchaConfig && (\n          <Captcha\n            control={form.control}\n            name=\"captcha\"\n            captcha={captchaConfig}\n            {...captchaProps}\n            className=\"mt-4\"\n            sdkError={captchaSDKError}\n            rules={{\n              required: locales.errors.captchaCompletionRequired,\n              maxLength: {\n                value: 15,\n                message: locales.errors.captchaTooLong,\n              },\n            }}\n          />\n        )}\n\n        {/* Submit button */}\n        <ULThemeButton\n          type=\"submit\"\n          className=\"w-full mt-4\"\n          disabled={isSubmitting}\n        >\n          {buttonText}\n        </ULThemeButton>\n      </form>\n    </Form>\n  );\n}\n\nexport default IdentifierForm;\n","import ULThemeCard from \"@/components/ULThemeCard\";\nimport ULThemePageLayout from \"@/components/ULThemePageLayout\";\nimport { applyAuth0Theme } from \"@/utils/theme/themeEngine\";\n\nimport Footer from \"./components/Footer\";\nimport Header from \"./components/Header\";\nimport IdentifierForm from \"./components/IdentifierForm\";\nimport { useLoginPasswordlessEmailCodeManager } from \"./hooks/useLoginPasswordlessEmailCodeManager\";\n\nfunction LoginPasswordlessEmailCodeScreen() {\n  // Extracting attributes from hook made out of useLoginPasswordlessEmailCode hook of Auth0 React SDK\n  const { loginPasswordlessEmailCode, texts, locales } =\n    useLoginPasswordlessEmailCodeManager();\n\n  // Apply theme from SDK instance when screen loads\n  applyAuth0Theme(loginPasswordlessEmailCode);\n  document.title = texts?.pageTitle || locales.page.title;\n\n  return (\n    // Applying UDS theme overrides using the \"theme-universal\" class\n    <ULThemePageLayout className=\"theme-universal\">\n      <ULThemeCard className=\"w-full max-w-[400px] gap-0\">\n        <Header />\n        <IdentifierForm />\n        <Footer />\n      </ULThemeCard>\n    </ULThemePageLayout>\n  );\n}\n\nexport default LoginPasswordlessEmailCodeScreen;\n"],"names":["useLoginPasswordlessEmailCodeManager","screen","useScreen","loginPasswordlessEmailCode","useLoginPasswordlessEmailCode","texts","isCaptchaAvailable","captcha","data","links","locales","payload","options","executeSafely","Footer","handleResendEmailCode","resendText","resendLinkText","remaining","disabled","useResend","handleResendClick","jsxs","jsx","ULThemeButton","translate","Header","titleText","descriptionText","logoAltText","Fragment","ULThemeLogo","ULThemeTitle","ULThemeSubtitle","IdentifierForm","handleSubmitEmailCode","form","useForm","isSubmitting","buttonText","codeLabelText","captchaLabel","editText","editAriaLabel","codeRequiredErrorMessage","captchaConfig","captchaProps","captchaValue","useCaptcha","errors","hasError","dismiss","useErrors","emailSDKError","codeSDKError","captchaSDKError","generalErrors","err","onSubmit","Form","error","ULThemeAlert","ULThemeAlertTitle","FormField","field","fieldState","FormItem","ULThemeFloatingLabelField","ULThemeLink","ULThemeFormMessage","Captcha","LoginPasswordlessEmailCodeScreen","applyAuth0Theme","ULThemePageLayout","ULThemeCard"],"mappings":"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"}