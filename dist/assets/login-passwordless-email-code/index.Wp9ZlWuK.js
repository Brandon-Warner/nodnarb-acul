import{j as e}from"../shared/react-vendor.C9XDpjI-.js";import{e as L,g as S,t as q,h as D,i as O,j as H,u as $,F as B,U as K,a as M,b as j,c as E,d as A,p as V,f as y,C as z,k as J,l as _,m as G}from"../shared/common.lOgDNxwW.js";import{_ as W,$ as Y,I as Q,G as X,D as Z}from"../shared/vendor.CuJT1XvO.js";const ee={title:"Enter your email code to log in"},te={title:"Verify Your Identity",description:"We've sent an email with your code to:",logoAltText:"Application Logo"},se={resendActionText:"Didn't receive an email?",resendActionLinkText:"Resend",resendCooldown:"Resend in {{seconds}}s"},oe={selectCountryPlaceholder:"Select Country",captchaLabel:"CAPTCHA*",editIdentifierLinkText:"Edit email address",editText:"Edit",continueButtonText:"Continue",codeLabelText:"Enter the code"},re={errorOccurred:"An error occurred",codeIsRequired:"Please fill out this field.",captchaCompletionRequired:"Please complete the CAPTCHA",captchaTooLong:"CAPTCHA too long"},ae={page:ee,heading:te,footer:se,form:oe,errors:re},u=()=>{const s=W(),t=Y(),{texts:a,isCaptchaAvailable:i,captcha:c,data:l,links:d}=s;return{locales:ae,captcha:c,data:l,links:d,loginPasswordlessEmailCode:t,isCaptchaAvailable:i,handleSubmitEmailCode:async r=>{const m={code:typeof r?.code=="string"?r.code.trim():String(r?.code||"")};s.isCaptchaAvailable&&r?.captcha?.trim()&&(m.captcha=r?.captcha.trim()),L(`Submit Email Code with options: ${JSON.stringify(m)}`,()=>t.submitCode(m))},handleResendEmailCode:async r=>{L(`Resent Email Code with Custom options: ${JSON.stringify(r)}`,()=>t.resendCode(r))},texts:a||{}}};function ne(){const{texts:s,locales:t,handleResendEmailCode:a}=u(),i=s?.resendText||t.footer.resendActionText,c=s?.resendActionText||t.footer.resendActionLinkText,{remaining:l,disabled:d}=Q({timeoutSeconds:30}),n=async()=>{await a()};return e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("span",{className:"pr-1 text-body-text text-(length:--ul-theme-font-body-text-size) font-body",children:i}),e.jsx(S,{variant:"link",size:"link",disabled:d,onClick:n,children:d?q("footer.resendCooldown",{seconds:String(l)},t):c})]})}function ie(){const{texts:s,locales:t}=u(),a=s?.title||t.heading.title,i=s?.description||t.heading.description,c=s?.logoAltText||t.heading.logoAltText;return e.jsxs(e.Fragment,{children:[e.jsx(D,{altText:c}),e.jsx(O,{children:a}),e.jsx(H,{className:"mb-6",children:i})]})}function ce(){const{texts:s,locales:t,data:a,links:i,captcha:c,isCaptchaAvailable:l,handleSubmitEmailCode:d}=u(),n=X({defaultValues:{email:"",code:"",captcha:""}}),{formState:{isSubmitting:p}}=n,r=s?.buttonText||t.form.continueButtonText,m=s?.placeholder||t.form.codeLabelText,F=s?.captchaCodePlaceholder?`${s.captchaCodePlaceholder}*`:t.form.captchaLabel,k=s?.editText||t.form.editText,v=s?.editLinkScreenReadableText||t.form.editIdentifierLinkText,w=t.errors.codeIsRequired,{captchaConfig:T,captchaProps:P,captchaValue:g}=$(c||void 0,F),{errors:x,hasError:R,dismiss:U}=Z(),f=x.byField("email")[0]?.message,b=x.byField("code")[0]?.message,N=x.byField("captcha")[0]?.message,C=x.byType("auth0").filter(o=>!o.field),I=async o=>{await d({code:String(o.code),captcha:l&&g?g:void 0})};return e.jsx(B,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(I),children:[R&&C.length>0&&e.jsx("div",{className:"space-y-3 mb-4",children:C.map(o=>e.jsx(K,{variant:"destructive",onDismiss:()=>U(o.id),children:e.jsx(M,{children:o.message||t.errors.errorOccurred})},o.id))}),e.jsx(j,{control:n.control,name:"email",render:({field:o,fieldState:h})=>e.jsxs(E,{children:[e.jsx(A,{...o,label:"",value:a?.username||"",error:!!h.error||!!f,readOnly:!0,endAdornment:e.jsx(V,{href:i?.edit_identifier,"aria-label":v,children:k}),className:"pr-4"}),e.jsx(y,{sdkError:f,hasFormError:!!h.error})]})}),e.jsx(j,{control:n.control,name:"code",rules:{required:w},render:({field:o,fieldState:h})=>e.jsxs(E,{children:[e.jsx(A,{...o,label:m,autoFocus:!0,error:!!h.error||!!b}),e.jsx(y,{sdkError:b,hasFormError:!!h.error})]})}),l&&T&&e.jsx(z,{control:n.control,name:"captcha",captcha:T,...P,className:"mt-4",sdkError:N,rules:{required:t.errors.captchaCompletionRequired,maxLength:{value:15,message:t.errors.captchaTooLong}}}),e.jsx(S,{type:"submit",className:"w-full mt-4",disabled:p,children:r})]})})}function he(){const{loginPasswordlessEmailCode:s,texts:t,locales:a}=u();return J(s),document.title=t?.pageTitle||a.page.title,e.jsx(_,{className:"theme-universal",children:e.jsxs(G,{className:"w-full max-w-[400px] gap-0",children:[e.jsx(ie,{}),e.jsx(ce,{}),e.jsx(ne,{})]})})}export{he as default};
//# sourceMappingURL=index.Wp9ZlWuK.js.map
