{"version":3,"file":"index.DRDl1f0B.js","sources":["../../../src/screens/reset-password/hooks/useResetPasswordManager.tsx","../../../src/screens/reset-password/components/Header.tsx","../../../src/screens/reset-password/components/ResetPasswordForm.tsx","../../../src/screens/reset-password/index.tsx"],"sourcesContent":["import {\n  resetPassword,\n  useErrors,\n  usePasswordValidation,\n  useResetPassword,\n  useScreen,\n} from \"@auth0/auth0-acul-react/reset-password\";\nimport { ScreenMembersOnResetPassword } from \"@auth0/auth0-acul-react/types\";\n\nimport { executeSafely } from \"@/utils/helpers/executeSafely\";\n\nimport locales from \"../locales/en.json\";\n\n/**\n * Handles the password reset process\n *\n *\n * @param new_password - New password string.\n * @param confirm_password - New password string.\n * @returns A promise that resolves when the password reset process is complete.\n */\nexport const useResetPasswordManager = () => {\n  const { texts } = useScreen();\n\n  const handleSubmitPassword = async (\n    new_password: string,\n    confirm_password: string\n  ): Promise<void> => {\n    const options: { \"password-reset\": string; \"re-enter-password\": string } = {\n      \"password-reset\": new_password?.trim() || \"\",\n      \"re-enter-password\": confirm_password?.trim() || \"\",\n    };\n    executeSafely(\n      `Submit password reset with options: ${JSON.stringify(options)}`,\n      () => resetPassword(options)\n    );\n  };\n\n  return {\n    resetPassword: useResetPassword(),\n    handleSubmitPassword,\n    texts: (texts || {}) as ScreenMembersOnResetPassword[\"texts\"],\n    locales,\n    useErrors: useErrors(),\n    usePasswordValidation,\n  };\n};\n","import ULThemeLogo from \"@/components/ULThemeLogo\";\nimport ULThemeSubtitle from \"@/components/ULThemeSubtitle\";\nimport ULThemeTitle from \"@/components/ULThemeTitle\";\n\nimport { useResetPasswordManager } from \"../hooks/useResetPasswordManager\";\n\nfunction Header() {\n  const { texts, locales } = useResetPasswordManager();\n\n  // Handle text fallbacks in component\n  const logoAltText = texts?.logoAltText || locales.header.logoAltText;\n  const title = texts?.title || locales.header.title;\n  const description = texts?.description || locales.header.description;\n\n  return (\n    <>\n      <ULThemeLogo altText={logoAltText}></ULThemeLogo>\n      <ULThemeTitle>{title}</ULThemeTitle>\n      <ULThemeSubtitle className=\"mb-6\">{description}</ULThemeSubtitle>\n    </>\n  );\n}\n\nexport default Header;\n","import { useForm } from \"react-hook-form\";\n\nimport type {\n  ErrorItem,\n  PasswordValidationResult,\n} from \"@auth0/auth0-acul-react/types\";\n\nimport { ULThemeFormMessage } from \"@/components/form\";\nimport { Form, FormField, FormItem } from \"@/components/ui/form\";\nimport { ULThemeButton } from \"@/components/ULThemeButton\";\nimport { ULThemeAlert, ULThemeAlertTitle } from \"@/components/ULThemeError\";\nimport { ULThemePasswordField } from \"@/components/ULThemePasswordField\";\nimport { ULThemePasswordValidator } from \"@/components/ULThemePasswordValidator\";\n\nimport { useResetPasswordManager } from \"../hooks/useResetPasswordManager\";\n\ninterface resetPasswordFormData {\n  new_password: string;\n  confirm_password: string;\n}\n\n/**\n * ResetPasswordForm Component\n *\n * This component renders the form for the resetPassword screen.\n * It includes fields for new password, and confirm new password,\n * along with error handling.\n */\nfunction ResetPasswordForm() {\n  // Extract necessary methods and properties from the custom hook\n  const {\n    handleSubmitPassword,\n    texts,\n    locales,\n    useErrors,\n    usePasswordValidation,\n  } = useResetPasswordManager();\n  const { errors, hasError, dismiss } = useErrors;\n\n  // Initialize the form using react-hook-form\n  const form = useForm<resetPasswordFormData>({\n    defaultValues: {\n      new_password: \"\",\n      confirm_password: \"\",\n    },\n  });\n\n  const {\n    formState: { isSubmitting },\n    watch,\n  } = form;\n\n  // Get password validation rules from Auth0 SDK\n  const passwordValue = watch(\"new_password\");\n\n  const {\n    isValid: isPasswordValid,\n    results: passwordResults,\n  }: PasswordValidationResult = usePasswordValidation(passwordValue);\n\n  // Handle text fallbacks for button and field labels\n  const buttonText = texts?.buttonText || locales.form.buttonText;\n  const passwordLabel =\n    texts?.passwordPlaceholder || locales.form.fields.password.labelText;\n  const confirmPasswordLabel =\n    texts?.reEnterpasswordPlaceholder ||\n    locales.form.fields.confirmPassword.labelText;\n  const passwordSecurityText =\n    texts?.passwordSecurityText || locales.form.passwordSecurity;\n\n  // Extract general errors (not field-specific) from the SDK\n  const generalErrors: ErrorItem[] =\n    errors.byType(\"auth0\")?.filter((error) => {\n      return !error.field || error.field === null;\n    }) || [];\n\n  // Extract field-specific errors for password\n  const passwordSDKError = errors.byField(\"password\")[0]?.message;\n\n  /**\n   * Handles form submission.\n   *\n   * @param data - The form data containing password, and confirm password.\n   */\n  const onSubmit = async (data: resetPasswordFormData) => {\n    await handleSubmitPassword(data.new_password, data.confirm_password);\n  };\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(onSubmit)}>\n        {/* General error messages */}\n        {hasError && generalErrors.length > 0 && (\n          <div className=\"space-y-3 mb-4\">\n            {generalErrors.map((error: ErrorItem) => (\n              <ULThemeAlert\n                key={error.id}\n                variant=\"destructive\"\n                onDismiss={() => dismiss(error.id)}\n              >\n                <ULThemeAlertTitle>{error.message}</ULThemeAlertTitle>\n              </ULThemeAlert>\n            ))}\n          </div>\n        )}\n\n        {/* New Password input field */}\n        <FormField\n          control={form.control}\n          name=\"new_password\"\n          rules={{\n            required: locales.form.fields.password.required,\n            validate: (value) => {\n              if (!value) return locales.form.fields.password.required;\n              if (!isPasswordValid)\n                return locales.form.fields.password.doesNotMeetRequirements;\n              return true;\n            },\n          }}\n          render={({ field, fieldState }) => (\n            <FormItem>\n              <ULThemePasswordField\n                {...field}\n                label={`${passwordLabel}*`}\n                autoComplete=\"new-password\"\n                error={!!fieldState.error || !!passwordSDKError}\n              />\n              <ULThemeFormMessage hasFormError={!!fieldState.error} />\n            </FormItem>\n          )}\n        />\n\n        {/* Re-Enter Password input field */}\n        <FormField\n          control={form.control}\n          name=\"confirm_password\"\n          render={({ field, fieldState }) => (\n            <FormItem>\n              <ULThemePasswordField\n                {...field}\n                label={`${confirmPasswordLabel}*`}\n                autoComplete=\"new-password\"\n                error={!!fieldState.error || !!passwordSDKError}\n              />\n              <ULThemeFormMessage\n                sdkError={passwordSDKError}\n                hasFormError={!!fieldState.error}\n              />\n            </FormItem>\n          )}\n        />\n\n        {/* Password Validation Rules */}\n        <ULThemePasswordValidator\n          validationRules={passwordResults}\n          passwordSecurityText={passwordSecurityText}\n          show={!!passwordValue}\n          className=\"mb-4\"\n        />\n\n        {/* Submit button */}\n        <ULThemeButton type=\"submit\" className=\"w-full\" disabled={isSubmitting}>\n          {buttonText}\n        </ULThemeButton>\n      </form>\n    </Form>\n  );\n}\n\nexport default ResetPasswordForm;\n","import ULThemeCard from \"@/components/ULThemeCard\";\nimport ULThemePageLayout from \"@/components/ULThemePageLayout\";\nimport { applyAuth0Theme } from \"@/utils/theme\";\n\nimport Header from \"./components/Header\";\nimport ResetPasswordForm from \"./components/ResetPasswordForm\";\nimport { useResetPasswordManager } from \"./hooks/useResetPasswordManager\";\n\nfunction ResetPasswordScreen() {\n  // Extracting attributes from hook made out of ResetPasswordInstance class of Auth0 React SDK\n  const { resetPassword, texts, locales } = useResetPasswordManager();\n\n  // Apply theme from SDK instance when screen loads\n  applyAuth0Theme(resetPassword);\n  document.title = texts?.pageTitle || locales.pageTitle;\n\n  return (\n    // Applying UDS theme overrides using the \"theme-universal\" class\n    <ULThemePageLayout className=\"theme-universal\">\n      <ULThemeCard className=\"w-full max-w-[400px] gap-0\">\n        <Header />\n        <ResetPasswordForm />\n      </ULThemeCard>\n    </ULThemePageLayout>\n  );\n}\n\nexport default ResetPasswordScreen;\n"],"names":["useResetPasswordManager","texts","useScreen","handleSubmitPassword","new_password","confirm_password","options","executeSafely","resetPassword","useResetPassword","locales","useErrors","usePasswordValidation","Header","logoAltText","title","description","jsxs","Fragment","jsx","ULThemeLogo","ULThemeTitle","ULThemeSubtitle","ResetPasswordForm","errors","hasError","dismiss","form","useForm","isSubmitting","watch","passwordValue","isPasswordValid","passwordResults","buttonText","passwordLabel","confirmPasswordLabel","passwordSecurityText","generalErrors","error","passwordSDKError","onSubmit","data","Form","ULThemeAlert","ULThemeAlertTitle","FormField","value","field","fieldState","FormItem","ULThemePasswordField","ULThemeFormMessage","ULThemePasswordValidator","ULThemeButton","ResetPasswordScreen","applyAuth0Theme","ULThemePageLayout","ULThemeCard"],"mappings":"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"}