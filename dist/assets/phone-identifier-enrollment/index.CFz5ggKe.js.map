{"version":3,"file":"index.CFz5ggKe.js","sources":["../../../src/screens/phone-identifier-enrollment/hooks/usePhoneIdentifierEnrollmentManager.ts","../../../src/screens/phone-identifier-enrollment/components/Footer.tsx","../../../src/screens/phone-identifier-enrollment/components/Header.tsx","../../../src/screens/phone-identifier-enrollment/components/PhoneEnrollmentForm.tsx","../../../src/screens/phone-identifier-enrollment/index.tsx"],"sourcesContent":["import {\n  continuePhoneEnrollment,\n  returnToPrevious,\n  useErrors,\n  usePhoneIdentifierEnrollment,\n  useScreen,\n} from \"@auth0/auth0-acul-react/phone-identifier-enrollment\";\nimport {\n  PhoneEnrollmentOptions,\n  ScreenMembersOnPhoneIdentifierEnrollment,\n} from \"@auth0/auth0-acul-react/types\";\n\nimport { executeSafely } from \"@/utils/helpers/executeSafely\";\n\nimport locales from \"../locales/en.json\";\n\nexport const usePhoneIdentifierEnrollmentManager = () => {\n  const screen = useScreen();\n  const phoneIdentifierEnrollment = usePhoneIdentifierEnrollment();\n\n  const { texts, data } = screen;\n\n  const handleContinueEnrollment = async (type: \"text\" | \"voice\") => {\n    const options: PhoneEnrollmentOptions = {\n      type: type,\n    };\n    await executeSafely(\n      `Continue Phone Identifier Enrollment with options: ${JSON.stringify(options)}`,\n      () => continuePhoneEnrollment(options)\n    );\n  };\n\n  const handleReturnToPrevious = async () => {\n    await executeSafely(`Return to previous screen`, () =>\n      returnToPrevious({})\n    );\n  };\n\n  return {\n    phoneIdentifierEnrollment,\n    handleContinueEnrollment,\n    handleReturnToPrevious,\n    texts: (texts || {}) as ScreenMembersOnPhoneIdentifierEnrollment[\"texts\"],\n    data: data,\n    locales,\n    useErrors: useErrors(),\n  };\n};\n","import { ULThemeButton } from \"@/components/ULThemeButton\";\n\nimport { usePhoneIdentifierEnrollmentManager } from \"../hooks/usePhoneIdentifierEnrollmentManager\";\n\nfunction Footer() {\n  const { texts, handleReturnToPrevious, locales } =\n    usePhoneIdentifierEnrollmentManager();\n\n  const returnToPreviousScreenText =\n    texts?.backButtonText || locales.footer.backButtonText;\n\n  const handleGoBackAction = async () => {\n    await handleReturnToPrevious();\n  };\n\n  return (\n    <div className=\"text-center space-y-2 mt-4\">\n      {/* Go Back Action */}\n      <ULThemeButton onClick={handleGoBackAction} variant=\"link\" size=\"link\">\n        {returnToPreviousScreenText}\n      </ULThemeButton>\n    </div>\n  );\n}\n\nexport default Footer;\n","import ULThemeLogo from \"@/components/ULThemeLogo\";\nimport ULThemeSubtitle from \"@/components/ULThemeSubtitle\";\nimport ULThemeTitle from \"@/components/ULThemeTitle\";\n\nimport { usePhoneIdentifierEnrollmentManager } from \"../hooks/usePhoneIdentifierEnrollmentManager\";\n\nfunction Header() {\n  const { texts, locales } = usePhoneIdentifierEnrollmentManager();\n\n  // Handle text fallbacks in component\n  const logoAltText = texts?.logoAltText || locales.header.logoAltText;\n  const title = texts?.title || locales.header.title;\n  const description = texts?.description || locales.header.description;\n\n  return (\n    <>\n      <ULThemeLogo altText={logoAltText}></ULThemeLogo>\n      <ULThemeTitle>{title}</ULThemeTitle>\n      <ULThemeSubtitle className=\"mb-6\">{description}</ULThemeSubtitle>\n    </>\n  );\n}\n\nexport default Header;\n","import React from \"react\";\nimport { useForm } from \"react-hook-form\";\n\nimport type { ErrorItem } from \"@auth0/auth0-acul-react/types\";\n\nimport { ULThemeFloatingLabelField } from \"@/components/form\";\nimport { Form, FormField, FormItem } from \"@/components/ui/form\";\nimport { ULThemeButton } from \"@/components/ULThemeButton\";\nimport { ULThemeAlert, ULThemeAlertTitle } from \"@/components/ULThemeError\";\nimport ULThemeSubtitle from \"@/components/ULThemeSubtitle\";\n\nimport { usePhoneIdentifierEnrollmentManager } from \"../hooks/usePhoneIdentifierEnrollmentManager\";\n\ninterface PhoneEnrollmentFormData {\n  type: \"text\" | \"voice\";\n}\n\nfunction PhoneIdentifierEnrollmentForm() {\n  const { handleContinueEnrollment, texts, data, locales, useErrors } =\n    usePhoneIdentifierEnrollmentManager();\n\n  // Initialize the form using react-hook-form\n  const form = useForm<PhoneEnrollmentFormData>({\n    defaultValues: {\n      type: \"text\",\n    },\n  });\n\n  const {\n    formState: { isSubmitting },\n  } = form;\n  const buttonText = texts?.continueButtonText || locales.form.buttonLabelText;\n  const { errors, hasError, dismiss } = useErrors;\n\n  // Extract general errors (not field-specific) from the SDK\n  const generalErrors: ErrorItem[] =\n    errors.byType(\"auth0\")?.filter((error) => {\n      return !error.field || error.field === null;\n    }) || [];\n\n  const onSubmit = async (formData: PhoneEnrollmentFormData) => {\n    await handleContinueEnrollment(formData.type);\n  };\n\n  const selectedType = form.watch(\"type\");\n\n  //Refs for both the buttons\n  const textButtonRef = React.useRef<HTMLButtonElement>(null);\n  const voiceButtonRef = React.useRef<HTMLButtonElement>(null);\n\n  //Focus the selected button when the selectedType changes\n  React.useEffect(() => {\n    if (selectedType === \"text\") {\n      textButtonRef.current?.focus();\n    } else {\n      voiceButtonRef.current?.focus();\n    }\n  }, [selectedType]);\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-2\">\n        {/* General error messages */}\n        {hasError && generalErrors.length > 0 && (\n          <div className=\"space-y-3 mb-4\">\n            {generalErrors.map((error) => (\n              <ULThemeAlert\n                key={error.id}\n                variant=\"destructive\"\n                onDismiss={() => dismiss(error.id)}\n              >\n                <ULThemeAlertTitle>{error.message}</ULThemeAlertTitle>\n              </ULThemeAlert>\n            ))}\n          </div>\n        )}\n\n        {/* Phone Number input field */}\n        <ULThemeFloatingLabelField\n          label=\"\"\n          type=\"tel\"\n          autoFocus\n          placeholder={data?.phone || \"\"}\n          disabled={true}\n        />\n\n        {/* Phone identifier enrollment options*/}\n        <div>\n          <ULThemeSubtitle className=\"mb-2 mt-4 theme-universal:text-start\">\n            {texts?.chooseMessageTypeText || locales.form.field.labelText}\n          </ULThemeSubtitle>\n\n          <FormField\n            control={form.control}\n            name=\"type\"\n            render={({ field }) => (\n              <FormItem className=\"flex gap-2\">\n                <ULThemeButton\n                  type=\"button\"\n                  variant=\"outline\"\n                  className=\"flex-1\"\n                  onClick={() => field.onChange(\"text\")}\n                  ref={textButtonRef}\n                >\n                  {texts?.smsButtonText || locales.form.field.smsButton}\n                </ULThemeButton>\n\n                <ULThemeButton\n                  type=\"button\"\n                  variant=\"outline\"\n                  className=\"flex-1\"\n                  onClick={() => field.onChange(\"voice\")}\n                  ref={voiceButtonRef}\n                >\n                  {texts?.voiceButtonText || locales.form.field.voiceButton}\n                </ULThemeButton>\n              </FormItem>\n            )}\n          />\n        </div>\n\n        {/* Submit button */}\n        <ULThemeButton\n          type=\"submit\"\n          variant=\"primary\"\n          className=\"w-full mt-3\"\n          disabled={isSubmitting}\n        >\n          {isSubmitting\n            ? `${locales.form.field.sendingCodeText}...`\n            : buttonText}\n        </ULThemeButton>\n      </form>\n    </Form>\n  );\n}\n\nexport default PhoneIdentifierEnrollmentForm;\n","import ULThemeCard from \"@/components/ULThemeCard\";\nimport ULThemePageLayout from \"@/components/ULThemePageLayout\";\nimport { applyAuth0Theme } from \"@/utils/theme\";\n\nimport Footer from \"./components/Footer\";\nimport Header from \"./components/Header\";\nimport PhoneIdentifierEnrollmentForm from \"./components/PhoneEnrollmentForm\";\nimport { usePhoneIdentifierEnrollmentManager } from \"./hooks/usePhoneIdentifierEnrollmentManager\";\n\nfunction PhoneIdentifierEnrollmentScreen() {\n  // Extracting attributes from hook made out of PhoneIdentifierEnrollment instance of Auth0 React ACUL SDK\n  const { phoneIdentifierEnrollment, texts, locales } =\n    usePhoneIdentifierEnrollmentManager();\n\n  applyAuth0Theme(phoneIdentifierEnrollment);\n  document.title = texts?.pageTitle || locales.pageTitle;\n\n  return (\n    <ULThemePageLayout className=\"theme-universal\">\n      <ULThemeCard className=\"w-full max-w-[400px] gap-0\">\n        <Header />\n        <PhoneIdentifierEnrollmentForm />\n        <Footer />\n      </ULThemeCard>\n    </ULThemePageLayout>\n  );\n}\n\nexport default PhoneIdentifierEnrollmentScreen;\n"],"names":["usePhoneIdentifierEnrollmentManager","screen","useScreen","phoneIdentifierEnrollment","usePhoneIdentifierEnrollment","texts","data","type","options","executeSafely","continuePhoneEnrollment","returnToPrevious","locales","useErrors","Footer","handleReturnToPrevious","returnToPreviousScreenText","handleGoBackAction","jsx","ULThemeButton","Header","logoAltText","title","description","jsxs","Fragment","ULThemeLogo","ULThemeTitle","ULThemeSubtitle","PhoneIdentifierEnrollmentForm","handleContinueEnrollment","form","useForm","isSubmitting","buttonText","errors","hasError","dismiss","generalErrors","error","onSubmit","formData","selectedType","textButtonRef","React","voiceButtonRef","Form","ULThemeAlert","ULThemeAlertTitle","ULThemeFloatingLabelField","FormField","field","FormItem","PhoneIdentifierEnrollmentScreen","applyAuth0Theme","ULThemePageLayout","ULThemeCard"],"mappings":"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"}