{"version":3,"file":"index.Cgexrw4x.js","sources":["../../../src/screens/signup-password/hooks/useSignupPasswordManager.ts","../../../src/screens/signup-password/components/Footer.tsx","../../../src/screens/signup-password/components/Header.tsx","../../../src/screens/signup-password/components/SignupPasswordForm.tsx","../../../src/screens/signup-password/index.tsx"],"sourcesContent":["import {\n  useScreen,\n  useSignupPassword,\n} from \"@auth0/auth0-acul-react/signup-password\";\nimport type {\n  ScreenMembersOnSignupPassword,\n  SignupPasswordOptions,\n} from \"@auth0/auth0-acul-react/types\";\n\nimport { executeSafely } from \"@/utils/helpers/executeSafely\";\n\nimport locales from \"../locales/en.json\";\n\nexport const useSignupPasswordManager = () => {\n  const signupPassword = useSignupPassword();\n\n  const screen: ScreenMembersOnSignupPassword = useScreen();\n\n  const { isCaptchaAvailable, texts, editLink, captcha } = screen;\n\n  const handleSignupPassword = async (\n    payload: SignupPasswordOptions\n  ): Promise<void> => {\n    const options: SignupPasswordOptions = {\n      password: payload.password,\n    };\n\n    if (payload.email?.trim()) {\n      options.email = payload.email.trim();\n    }\n    if (payload.phoneNumber) {\n      options.phoneNumber = payload.phoneNumber;\n    }\n    if (payload.username?.trim()) {\n      options.username = payload.username.trim();\n    }\n    if (screen.isCaptchaAvailable && payload.captcha?.trim()) {\n      options.captcha = payload.captcha.trim();\n    }\n    // Password redacted from logs\n    const logOptions = {\n      ...options,\n      password: \"[REDACTED]\",\n    };\n\n    executeSafely(\n      `Signup password with options: ${JSON.stringify(logOptions)}`,\n      () => signupPassword.signup(options)\n    );\n  };\n\n  return {\n    signupPassword,\n    handleSignupPassword,\n    texts,\n    isCaptchaAvailable,\n    editLink,\n    captcha,\n    locales,\n  };\n};\n","import ULThemeLink from \"@/components/ULThemeLink\";\n\nimport { useSignupPasswordManager } from \"../hooks/useSignupPasswordManager\";\n\nfunction Footer() {\n  const { editLink, texts, locales } = useSignupPasswordManager();\n\n  if (!editLink) {\n    return null;\n  }\n\n  // Use locale strings with fallback to SDK texts\n  const backButtonText = texts?.backButtonText || locales.footer.backButton;\n\n  return (\n    <div className=\"mt-4 text-center\">\n      {editLink && <ULThemeLink href={editLink}>{backButtonText}</ULThemeLink>}\n    </div>\n  );\n}\n\nexport default Footer;\n","import ULThemeLogo from \"@/components/ULThemeLogo\";\nimport ULThemeSubtitle from \"@/components/ULThemeSubtitle\";\nimport ULThemeTitle from \"@/components/ULThemeTitle\";\n\nimport { useSignupPasswordManager } from \"../hooks/useSignupPasswordManager\";\n\nfunction Header() {\n  const { texts, locales } = useSignupPasswordManager();\n\n  // Use locale strings with fallback to SDK texts\n  const logoAltText = texts?.logoAltText || locales.header.logoAlt;\n  const title = texts?.title || locales.header.title;\n  const description = texts?.description || locales.header.description;\n\n  return (\n    <>\n      <ULThemeLogo altText={logoAltText}></ULThemeLogo>\n      <ULThemeTitle>{title}</ULThemeTitle>\n      <ULThemeSubtitle>{description}</ULThemeSubtitle>\n    </>\n  );\n}\n\nexport default Header;\n","import { useForm } from \"react-hook-form\";\n\nimport {\n  useErrors,\n  usePasswordValidation,\n} from \"@auth0/auth0-acul-react/signup-password\";\nimport type {\n  ErrorItem,\n  PasswordValidationResult,\n  SignupPasswordOptions,\n} from \"@auth0/auth0-acul-react/types\";\n\nimport Captcha from \"@/components/Captcha/index\";\nimport { ULThemeFloatingLabelField } from \"@/components/form/ULThemeFloatingLabelField\";\nimport { ULThemeFormMessage } from \"@/components/form/ULThemeFormMessage\";\nimport { Form, FormField, FormItem } from \"@/components/ui/form\";\nimport { ULThemeButton } from \"@/components/ULThemeButton\";\nimport { ULThemeAlert, ULThemeAlertTitle } from \"@/components/ULThemeError\";\nimport { ULThemePasswordField } from \"@/components/ULThemePasswordField\";\nimport { ULThemePasswordValidator } from \"@/components/ULThemePasswordValidator\";\nimport { useCaptcha } from \"@/hooks/useCaptcha\";\n\nimport { useSignupPasswordManager } from \"../hooks/useSignupPasswordManager\";\n\nfunction SignupPasswordForm() {\n  const {\n    handleSignupPassword,\n    isCaptchaAvailable,\n    signupPassword,\n    texts,\n    captcha,\n    locales,\n  } = useSignupPasswordManager();\n\n  const { errors, hasError, dismiss } = useErrors();\n\n  const form = useForm<SignupPasswordOptions>({\n    defaultValues: {\n      email: \"\",\n      username: \"\",\n      phoneNumber: \"\",\n      password: \"\",\n      captcha: \"\",\n    },\n    reValidateMode: \"onBlur\",\n  });\n\n  const {\n    formState: { isSubmitting },\n    watch,\n  } = form;\n\n  // Get password validation rules from Auth0 SDK\n  const passwordValue = watch(\"password\");\n  const {\n    isValid: isPasswordValid,\n    results: passwordResults,\n  }: PasswordValidationResult = usePasswordValidation(passwordValue);\n\n  // Get user data from screen data for readonly fields\n  const screenData = signupPassword?.screen?.data;\n  const userEmail = screenData?.email;\n  const userPhone = screenData?.phoneNumber;\n  const userUsername = screenData?.username;\n\n  // Use locale strings with fallback to SDK texts\n  const buttonText = texts?.buttonText || locales.form.button;\n  const captchaLabel = texts?.captchaCodePlaceholder\n    ? `${texts.captchaCodePlaceholder}*`\n    : `${locales.form.fields.captcha.label}*`;\n  const passwordLabel = texts?.passwordPlaceholder\n    ? `${texts.passwordPlaceholder}*`\n    : `${locales.form.fields.password.label}*`;\n  const passwordSecurityText =\n    texts?.passwordSecurityText || locales.form.passwordSecurity;\n  const emailLabel = texts?.emailPlaceholder || locales.form.fields.email.label;\n  const phoneLabel = texts?.phonePlaceholder || locales.form.fields.phone.label;\n  const usernameLabel =\n    texts?.usernamePlaceholder || locales.form.fields.username.label;\n\n  // Setup captcha with useCaptcha hook\n  const { captchaConfig, captchaProps } = useCaptcha(\n    captcha || undefined,\n    captchaLabel\n  );\n\n  // Get general errors (not field-specific) and errors for hidden fields\n  const visibleFields = [\"password\", \"captcha\"];\n  if (userEmail) visibleFields.push(\"email\");\n  if (userPhone) visibleFields.push(\"phone\", \"phone_number\");\n  if (userUsername) visibleFields.push(\"username\");\n\n  const generalErrors: ErrorItem[] = errors.byType(\"auth0\").filter((error) => {\n    // Include errors with no field or null field\n    if (!error.field || error.field === null) return true;\n\n    // Include field errors for non-visible fields\n    return !visibleFields.includes(error.field);\n  });\n\n  // Get field-specific errors\n  const passwordError = errors.byField(\"password\")[0]?.message;\n  const captchaSDKError = errors.byField(\"captcha\")[0]?.message;\n\n  // Simplified submit handler\n  const onSubmit = async (data: SignupPasswordOptions) => {\n    const submitData: SignupPasswordOptions = {\n      ...data,\n      email: userEmail,\n      username: userUsername,\n      phoneNumber: userPhone,\n    };\n    await handleSignupPassword(submitData);\n  };\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(onSubmit)}>\n        {/* General alerts at the top */}\n        {hasError && generalErrors.length > 0 && (\n          <div className=\"space-y-3 mb-4\">\n            {generalErrors.map((error) => (\n              <ULThemeAlert\n                key={error.id}\n                variant=\"destructive\"\n                onDismiss={() => dismiss(error.id)}\n              >\n                <ULThemeAlertTitle>{error.message}</ULThemeAlertTitle>\n              </ULThemeAlert>\n            ))}\n          </div>\n        )}\n\n        {/* Readonly email field */}\n        {userEmail && (\n          <ULThemeFloatingLabelField\n            id=\"signup-email-field\"\n            label={emailLabel}\n            type=\"email\"\n            value={userEmail}\n            readOnly\n            disabled\n          />\n        )}\n\n        {/* Readonly phone field */}\n        {userPhone && (\n          <ULThemeFloatingLabelField\n            id=\"signup-phone-field\"\n            label={phoneLabel}\n            type=\"tel\"\n            value={userPhone}\n            readOnly\n            disabled\n          />\n        )}\n\n        {/* Readonly username field */}\n        {userUsername && (\n          <ULThemeFloatingLabelField\n            id=\"signup-username-field\"\n            label={usernameLabel}\n            type=\"text\"\n            value={userUsername}\n            readOnly\n            disabled\n          />\n        )}\n\n        {/* Password field */}\n        <FormField\n          control={form.control}\n          name=\"password\"\n          rules={{\n            required: locales.form.fields.password.required,\n            validate: (value) => {\n              if (!value) return locales.form.fields.password.required;\n              if (!isPasswordValid)\n                return locales.form.fields.password.doesNotMeetRequirements;\n              return true;\n            },\n          }}\n          render={({ field, fieldState }) => (\n            <FormItem>\n              <ULThemePasswordField\n                {...field}\n                label={passwordLabel}\n                error={!!fieldState.error || !!passwordError}\n                autoFocus={true}\n              />\n              <ULThemeFormMessage\n                sdkError={passwordError}\n                hasFormError={!!fieldState.error}\n              />\n            </FormItem>\n          )}\n        />\n\n        {/* Captcha Field */}\n        {isCaptchaAvailable && captchaConfig && (\n          <Captcha\n            control={form.control}\n            name=\"captcha\"\n            captcha={captchaConfig}\n            {...captchaProps}\n            sdkError={captchaSDKError}\n            rules={{\n              required: locales.form.fields.captcha.required,\n            }}\n          />\n        )}\n\n        {/* Password Validation Rules */}\n        <ULThemePasswordValidator\n          validationRules={passwordResults}\n          passwordSecurityText={passwordSecurityText}\n          show={!!passwordValue}\n          className=\"mb-4\"\n        />\n\n        {/* Submit button */}\n        <ULThemeButton type=\"submit\" className=\"w-full\" disabled={isSubmitting}>\n          {buttonText}\n        </ULThemeButton>\n      </form>\n    </Form>\n  );\n}\n\nexport default SignupPasswordForm;\n","import ULThemeCard from \"@/components/ULThemeCard\";\nimport ULThemePageLayout from \"@/components/ULThemePageLayout\";\nimport { applyAuth0Theme } from \"@/utils/theme/themeEngine\";\n\nimport Footer from \"./components/Footer\";\nimport Header from \"./components/Header\";\nimport SignupPasswordForm from \"./components/SignupPasswordForm\";\nimport { useSignupPasswordManager } from \"./hooks/useSignupPasswordManager\";\n\nfunction SignupPasswordScreen() {\n  // Extracting attributes from hook made out of SignupPasswordInstance class of Auth0 React ACUL SDK\n  const { signupPassword, texts, locales } = useSignupPasswordManager();\n\n  document.title = texts?.pageTitle || locales.page.title;\n\n  // Apply theme from SDK instance when screen loads\n  applyAuth0Theme(signupPassword);\n\n  return (\n    // Applying UDS theme overrides using the \"theme-universal\" class\n    <ULThemePageLayout className=\"theme-universal\">\n      <ULThemeCard className=\"w-full max-w-[400px] gap-0\">\n        <Header />\n        <SignupPasswordForm />\n        <Footer />\n      </ULThemeCard>\n    </ULThemePageLayout>\n  );\n}\n\nexport default SignupPasswordScreen;\n"],"names":["useSignupPasswordManager","signupPassword","useSignupPassword","screen","useScreen","isCaptchaAvailable","texts","editLink","captcha","payload","options","logOptions","executeSafely","locales","Footer","backButtonText","jsx","ULThemeLink","Header","logoAltText","title","description","jsxs","Fragment","ULThemeLogo","ULThemeTitle","ULThemeSubtitle","SignupPasswordForm","handleSignupPassword","errors","hasError","dismiss","useErrors","form","useForm","isSubmitting","watch","passwordValue","isPasswordValid","passwordResults","usePasswordValidation","screenData","userEmail","userPhone","userUsername","buttonText","captchaLabel","passwordLabel","passwordSecurityText","emailLabel","phoneLabel","usernameLabel","captchaConfig","captchaProps","useCaptcha","visibleFields","generalErrors","error","passwordError","captchaSDKError","onSubmit","data","submitData","Form","ULThemeAlert","ULThemeAlertTitle","ULThemeFloatingLabelField","FormField","value","field","fieldState","FormItem","ULThemePasswordField","ULThemeFormMessage","Captcha","ULThemePasswordValidator","ULThemeButton","SignupPasswordScreen","applyAuth0Theme","ULThemePageLayout","ULThemeCard"],"mappings":"q6BAaaA,EAA2B,IAAM,CAC5C,MAAMC,EAAiBC,GAAA,EAEjBC,EAAwCC,GAAA,EAExC,CAAE,mBAAAC,EAAoB,MAAAC,EAAO,SAAAC,EAAU,QAAAC,GAAYL,EAiCzD,MAAO,CACL,eAAAF,EACA,qBAjC2B,MAC3BQ,GACkB,CAClB,MAAMC,EAAiC,CACrC,SAAUD,EAAQ,QAAA,EAGhBA,EAAQ,OAAO,SACjBC,EAAQ,MAAQD,EAAQ,MAAM,KAAA,GAE5BA,EAAQ,cACVC,EAAQ,YAAcD,EAAQ,aAE5BA,EAAQ,UAAU,SACpBC,EAAQ,SAAWD,EAAQ,SAAS,KAAA,GAElCN,EAAO,oBAAsBM,EAAQ,SAAS,SAChDC,EAAQ,QAAUD,EAAQ,QAAQ,KAAA,GAGpC,MAAME,EAAa,CACjB,GAAGD,EACH,SAAU,YAAA,EAGZE,EACE,iCAAiC,KAAK,UAAUD,CAAU,CAAC,GAC3D,IAAMV,EAAe,OAAOS,CAAO,CAAA,CAEvC,EAKE,MAAAJ,EACA,mBAAAD,EACA,SAAAE,EACA,QAAAC,EACA,QAAAK,EAAA,CAEJ,ECxDA,SAASC,IAAS,CAChB,KAAM,CAAE,SAAAP,EAAU,MAAAD,EAAO,QAAAO,CAAA,EAAYb,EAAA,EAErC,GAAI,CAACO,EACH,OAAO,KAIT,MAAMQ,EAAiBT,GAAO,gBAAkBO,EAAQ,OAAO,WAE/D,OACEG,EAAAA,IAAC,MAAA,CAAI,UAAU,mBACZ,SAAAT,SAAaU,EAAA,CAAY,KAAMV,EAAW,SAAAQ,CAAA,CAAe,EAC5D,CAEJ,CCbA,SAASG,IAAS,CAChB,KAAM,CAAE,MAAAZ,EAAO,QAAAO,CAAA,EAAYb,EAAA,EAGrBmB,EAAcb,GAAO,aAAeO,EAAQ,OAAO,QACnDO,EAAQd,GAAO,OAASO,EAAQ,OAAO,MACvCQ,EAAcf,GAAO,aAAeO,EAAQ,OAAO,YAEzD,OACES,EAAAA,KAAAC,WAAA,CACE,SAAA,CAAAP,EAAAA,IAACQ,EAAA,CAAY,QAASL,CAAA,CAAa,EACnCH,EAAAA,IAACS,GAAc,SAAAL,CAAA,CAAM,EACrBJ,EAAAA,IAACU,GAAiB,SAAAL,CAAA,CAAY,CAAA,EAChC,CAEJ,CCGA,SAASM,IAAqB,CAC5B,KAAM,CACJ,qBAAAC,EACA,mBAAAvB,EACA,eAAAJ,EACA,MAAAK,EACA,QAAAE,EACA,QAAAK,CAAA,EACEb,EAAA,EAEE,CAAE,OAAA6B,EAAQ,SAAAC,EAAU,QAAAC,CAAA,EAAYC,GAAA,EAEhCC,EAAOC,GAA+B,CAC1C,cAAe,CACb,MAAO,GACP,SAAU,GACV,YAAa,GACb,SAAU,GACV,QAAS,EAAA,EAEX,eAAgB,QAAA,CACjB,EAEK,CACJ,UAAW,CAAE,aAAAC,CAAA,EACb,MAAAC,CAAA,EACEH,EAGEI,EAAgBD,EAAM,UAAU,EAChC,CACJ,QAASE,EACT,QAASC,CAAA,EACmBC,GAAsBH,CAAa,EAG3DI,EAAaxC,GAAgB,QAAQ,KACrCyC,EAAYD,GAAY,MACxBE,EAAYF,GAAY,YACxBG,EAAeH,GAAY,SAG3BI,EAAavC,GAAO,YAAcO,EAAQ,KAAK,OAC/CiC,EAAexC,GAAO,uBACxB,GAAGA,EAAM,sBAAsB,IAC/B,GAAGO,EAAQ,KAAK,OAAO,QAAQ,KAAK,IAClCkC,EAAgBzC,GAAO,oBACzB,GAAGA,EAAM,mBAAmB,IAC5B,GAAGO,EAAQ,KAAK,OAAO,SAAS,KAAK,IACnCmC,EACJ1C,GAAO,sBAAwBO,EAAQ,KAAK,iBACxCoC,EAAa3C,GAAO,kBAAoBO,EAAQ,KAAK,OAAO,MAAM,MAClEqC,EAAa5C,GAAO,kBAAoBO,EAAQ,KAAK,OAAO,MAAM,MAClEsC,EACJ7C,GAAO,qBAAuBO,EAAQ,KAAK,OAAO,SAAS,MAGvD,CAAE,cAAAuC,EAAe,aAAAC,CAAA,EAAiBC,EACtC9C,GAAW,OACXsC,CAAA,EAIIS,EAAgB,CAAC,WAAY,SAAS,EACxCb,GAAWa,EAAc,KAAK,OAAO,EACrCZ,GAAWY,EAAc,KAAK,QAAS,cAAc,EACrDX,GAAcW,EAAc,KAAK,UAAU,EAE/C,MAAMC,EAA6B3B,EAAO,OAAO,OAAO,EAAE,OAAQ4B,GAE5D,CAACA,EAAM,OAASA,EAAM,QAAU,KAAa,GAG1C,CAACF,EAAc,SAASE,EAAM,KAAK,CAC3C,EAGKC,EAAgB7B,EAAO,QAAQ,UAAU,EAAE,CAAC,GAAG,QAC/C8B,EAAkB9B,EAAO,QAAQ,SAAS,EAAE,CAAC,GAAG,QAGhD+B,EAAW,MAAOC,GAAgC,CACtD,MAAMC,EAAoC,CACxC,GAAGD,EACH,MAAOnB,EACP,SAAUE,EACV,YAAaD,CAAA,EAEf,MAAMf,EAAqBkC,CAAU,CACvC,EAEA,OACE9C,EAAAA,IAAC+C,EAAA,CAAM,GAAG9B,EACR,SAAAX,EAAAA,KAAC,QAAK,SAAUW,EAAK,aAAa2B,CAAQ,EAEvC,SAAA,CAAA9B,GAAY0B,EAAc,OAAS,GAClCxC,EAAAA,IAAC,MAAA,CAAI,UAAU,iBACZ,SAAAwC,EAAc,IAAKC,GAClBzC,EAAAA,IAACgD,EAAA,CAEC,QAAQ,cACR,UAAW,IAAMjC,EAAQ0B,EAAM,EAAE,EAEjC,SAAAzC,EAAAA,IAACiD,EAAA,CAAmB,SAAAR,EAAM,OAAA,CAAQ,CAAA,EAJ7BA,EAAM,EAAA,CAMd,EACH,EAIDf,GACC1B,EAAAA,IAACkD,EAAA,CACC,GAAG,qBACH,MAAOjB,EACP,KAAK,QACL,MAAOP,EACP,SAAQ,GACR,SAAQ,EAAA,CAAA,EAKXC,GACC3B,EAAAA,IAACkD,EAAA,CACC,GAAG,qBACH,MAAOhB,EACP,KAAK,MACL,MAAOP,EACP,SAAQ,GACR,SAAQ,EAAA,CAAA,EAKXC,GACC5B,EAAAA,IAACkD,EAAA,CACC,GAAG,wBACH,MAAOf,EACP,KAAK,OACL,MAAOP,EACP,SAAQ,GACR,SAAQ,EAAA,CAAA,EAKZ5B,EAAAA,IAACmD,EAAA,CACC,QAASlC,EAAK,QACd,KAAK,WACL,MAAO,CACL,SAAUpB,EAAQ,KAAK,OAAO,SAAS,SACvC,SAAWuD,GACJA,EACA9B,EAEE,GADEzB,EAAQ,KAAK,OAAO,SAAS,wBAFnBA,EAAQ,KAAK,OAAO,SAAS,QAIlD,EAEF,OAAQ,CAAC,CAAE,MAAAwD,EAAO,WAAAC,CAAA,WACfC,EAAA,CACC,SAAA,CAAAvD,EAAAA,IAACwD,EAAA,CACE,GAAGH,EACJ,MAAOtB,EACP,MAAO,CAAC,CAACuB,EAAW,OAAS,CAAC,CAACZ,EAC/B,UAAW,EAAA,CAAA,EAEb1C,EAAAA,IAACyD,EAAA,CACC,SAAUf,EACV,aAAc,CAAC,CAACY,EAAW,KAAA,CAAA,CAC7B,CAAA,CACF,CAAA,CAAA,EAKHjE,GAAsB+C,GACrBpC,EAAAA,IAAC0D,EAAA,CACC,QAASzC,EAAK,QACd,KAAK,UACL,QAASmB,EACR,GAAGC,EACJ,SAAUM,EACV,MAAO,CACL,SAAU9C,EAAQ,KAAK,OAAO,QAAQ,QAAA,CACxC,CAAA,EAKJG,EAAAA,IAAC2D,EAAA,CACC,gBAAiBpC,EACjB,qBAAAS,EACA,KAAM,CAAC,CAACX,EACR,UAAU,MAAA,CAAA,EAIZrB,EAAAA,IAAC4D,GAAc,KAAK,SAAS,UAAU,SAAS,SAAUzC,EACvD,SAAAU,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CC1NA,SAASgC,IAAuB,CAE9B,KAAM,CAAE,eAAA5E,EAAgB,MAAAK,EAAO,QAAAO,CAAA,EAAYb,EAAA,EAE3C,gBAAS,MAAQM,GAAO,WAAaO,EAAQ,KAAK,MAGlDiE,GAAgB7E,CAAc,QAI3B8E,GAAA,CAAkB,UAAU,kBAC3B,SAAAzD,EAAAA,KAAC0D,GAAA,CAAY,UAAU,6BACrB,SAAA,CAAAhE,EAAAA,IAACE,GAAA,EAAO,QACPS,GAAA,EAAmB,QACnBb,GAAA,CAAA,CAAO,CAAA,CAAA,CACV,CAAA,CACF,CAEJ"}