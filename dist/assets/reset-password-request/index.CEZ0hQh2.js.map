{"version":3,"file":"index.CEZ0hQh2.js","sources":["../../../src/screens/reset-password-request/hooks/resetPasswordRequestManager.ts","../../../src/screens/reset-password-request/components/Footer.tsx","../../../src/screens/reset-password-request/components/Header.tsx","../../../src/screens/reset-password-request/components/ResetPasswordRequestForm.tsx","../../../src/screens/reset-password-request/index.tsx"],"sourcesContent":["import { useLoginIdentifiers } from \"@auth0/auth0-acul-react/reset-password-request\";\nimport {\n  backToLogin,\n  resetPassword,\n  useErrors,\n  useResetPasswordRequest,\n  useScreen,\n  useTransaction,\n  useUntrustedData,\n} from \"@auth0/auth0-acul-react/reset-password-request\";\nimport {\n  ResetPasswordRequestOptions,\n  ScreenMembersOnResetPasswordRequest,\n} from \"@auth0/auth0-acul-react/types\";\n\nimport { executeSafely } from \"@/utils/helpers/executeSafely\";\n\nimport locales from \"../locales/en.json\";\n\nexport const useResetPasswordRequestManager = () => {\n  const { texts, captchaImage, isCaptchaAvailable } = useScreen();\n\n  const handleResetPasswordRequest = async (\n    username: string,\n    captcha?: string\n  ): Promise<void> => {\n    const options: ResetPasswordRequestOptions = {\n      username: username?.trim() || \"\",\n    };\n    if (isCaptchaAvailable && captcha?.trim()) {\n      options.captcha = captcha.trim();\n    }\n    await executeSafely(\n      `Reset password Request with options: ${JSON.stringify(options)}`,\n      () => resetPassword(options)\n    );\n  };\n\n  const handleBackToLogin = async (): Promise<void> => {\n    await executeSafely(\"Navigating back to login\", backToLogin);\n  };\n\n  return {\n    resetPasswordRequest: useResetPasswordRequest(),\n    handleResetPasswordRequest,\n    handleBackToLogin,\n    texts: (texts || {}) as ScreenMembersOnResetPasswordRequest[\"texts\"],\n    errors: useTransaction().errors || [],\n    allowedIdentifiers: useTransaction().allowedIdentifiers || [],\n    captchaImage,\n    countryCode: useTransaction().countryCode || null,\n    countryPrefix: useTransaction().countryPrefix || null,\n    isCaptchaAvailable: useScreen().isCaptchaAvailable === true,\n    captcha: useScreen().captcha || null,\n    activeIdentifiers: useLoginIdentifiers(),\n    useErrors: useErrors(),\n    inputfield: useUntrustedData().submittedFormData?.username || \"\",\n    locales,\n  };\n};\n","import { ULThemeButton } from \"@/components/ULThemeButton\";\n\nimport { useResetPasswordRequestManager } from \"../hooks/resetPasswordRequestManager\";\nfunction Footer() {\n  const { texts, handleBackToLogin, locales } =\n    useResetPasswordRequestManager();\n\n  const returnToPreviousScreenText =\n    texts?.backToLoginLinkText || locales.footer.backButton;\n\n  const handleGoBackAction = async () => {\n    await handleBackToLogin();\n  };\n\n  return (\n    <div className=\"text-center space-y-2 mt-4\">\n      {/* Go Back Action */}\n      <ULThemeButton onClick={handleGoBackAction} variant=\"link\" size=\"link\">\n        {returnToPreviousScreenText}\n      </ULThemeButton>\n    </div>\n  );\n}\n\nexport default Footer;\n","import { IdentifierType } from \"@auth0/auth0-acul-react/types\";\n\nimport ULThemeLogo from \"@/components/ULThemeLogo\";\nimport ULThemeSubtitle from \"@/components/ULThemeSubtitle\";\nimport ULThemeTitle from \"@/components/ULThemeTitle\";\nimport { getIdentifierDetails } from \"@/utils/helpers/identifierUtils\";\n\nimport { useResetPasswordRequestManager } from \"../hooks/resetPasswordRequestManager\";\n\nfunction Header() {\n  const { texts, activeIdentifiers, locales } =\n    useResetPasswordRequestManager();\n\n  // Use helper to determine placeholder based on active identifiers\n  const identifierDetails = getIdentifierDetails(\n    (activeIdentifiers || undefined) as IdentifierType[] | undefined,\n    texts\n  );\n\n  // Handle text fallbacks in component\n  const logoAltText = texts?.logoAltText || locales.header.logoAlt;\n\n  return (\n    <>\n      <ULThemeLogo altText={logoAltText}></ULThemeLogo>\n      <ULThemeTitle>{texts?.title || locales.header.title}</ULThemeTitle>\n      <ULThemeSubtitle className=\"mb-6\">\n        {identifierDetails.description}\n      </ULThemeSubtitle>\n    </>\n  );\n}\n\nexport default Header;\n","import { useForm } from \"react-hook-form\";\n\nimport type {\n  ErrorItem,\n  ResetPasswordRequestOptions,\n} from \"@auth0/auth0-acul-react/types\";\n\nimport Captcha from \"@/components/Captcha/index\";\nimport {\n  ULThemeFloatingLabelField,\n  ULThemeFormMessage,\n} from \"@/components/form\";\nimport { Form, FormField, FormItem } from \"@/components/ui/form\";\nimport { ULThemeButton } from \"@/components/ULThemeButton\";\nimport { ULThemeAlert, ULThemeAlertTitle } from \"@/components/ULThemeError\";\nimport { useCaptcha } from \"@/hooks/useCaptcha\";\nimport { getIdentifierDetails } from \"@/utils/helpers/identifierUtils\";\n\nimport { useResetPasswordRequestManager } from \"../hooks/resetPasswordRequestManager\";\nfunction ResetPasswordRequestForm() {\n  const {\n    handleResetPasswordRequest,\n    texts,\n    isCaptchaAvailable,\n    captcha,\n    activeIdentifiers,\n    useErrors,\n    locales,\n    inputfield,\n  } = useResetPasswordRequestManager();\n  const { errors, hasError, dismiss } = useErrors;\n\n  // Initialize the form using react-hook-form\n  const form = useForm<ResetPasswordRequestOptions>({\n    defaultValues: {\n      username: String(inputfield),\n      captcha: \"\",\n    },\n  });\n\n  const {\n    formState: { isSubmitting },\n  } = form;\n\n  const buttonText = texts?.buttonText || locales.form.button;\n  const captchaLabel = texts?.captchaCodePlaceholder\n    ? `${texts.captchaCodePlaceholder}*`\n    : `${locales.form.fields.captcha.label}*`;\n  const identifierDetails = getIdentifierDetails(activeIdentifiers, texts);\n\n  // Extract general errors (not field-specific) from the SDK\n  const generalErrors: ErrorItem[] =\n    errors.byType(\"auth0\")?.filter((error) => {\n      return !error.field || error.field === null;\n    }) || [];\n\n  const usernameSDKError = errors.byField(\"username\")[0]?.message;\n  const captchaSDKError = errors.byField(\"captcha\")[0]?.message;\n\n  const { captchaConfig, captchaProps, captchaValue } = useCaptcha(\n    captcha || undefined,\n    captchaLabel\n  );\n\n  const onSubmit = async (formData: ResetPasswordRequestOptions) => {\n    await handleResetPasswordRequest(formData.username, captchaValue);\n  };\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(onSubmit)}>\n        {/* General error messages */}\n        {hasError && generalErrors.length > 0 && (\n          <div className=\"space-y-3 mb-4\">\n            {generalErrors.map((error) => (\n              <ULThemeAlert\n                key={error.id}\n                variant=\"destructive\"\n                onDismiss={() => dismiss(error.id)}\n              >\n                <ULThemeAlertTitle>{error.message}</ULThemeAlertTitle>\n              </ULThemeAlert>\n            ))}\n          </div>\n        )}\n\n        {/* Username or Email or Phone pre-filled input field */}\n        <FormField\n          control={form.control}\n          name=\"username\"\n          render={({ field, fieldState }) => (\n            <FormItem>\n              <ULThemeFloatingLabelField\n                {...field}\n                label={identifierDetails.label}\n                type={identifierDetails.type}\n                inputMode=\"text\"\n                autoComplete={identifierDetails.autoComplete}\n                autoFocus\n                error={!!fieldState.error || !!usernameSDKError}\n              />\n              <ULThemeFormMessage\n                sdkError={usernameSDKError}\n                hasFormError={!!fieldState.error}\n              />\n            </FormItem>\n          )}\n        />\n\n        {/* CAPTCHA Box */}\n        {isCaptchaAvailable && captchaConfig && (\n          <Captcha\n            control={form.control}\n            name=\"captcha\"\n            captcha={captchaConfig}\n            {...captchaProps}\n            sdkError={captchaSDKError}\n            rules={{\n              required: locales.form.fields.captcha.required,\n            }}\n            className=\"mt-2 mb-4\"\n          />\n        )}\n\n        {/* Submit button */}\n        <ULThemeButton\n          type=\"submit\"\n          variant=\"primary\"\n          className=\"w-full\"\n          disabled={isSubmitting}\n        >\n          {isSubmitting ? `${locales.form.submittingState}...` : buttonText}\n        </ULThemeButton>\n      </form>\n    </Form>\n  );\n}\n\nexport default ResetPasswordRequestForm;\n","import ULThemeCard from \"@/components/ULThemeCard\";\nimport ULThemePageLayout from \"@/components/ULThemePageLayout\";\nimport { applyAuth0Theme } from \"@/utils/theme\";\n\nimport Footer from \"./components/Footer\";\nimport Header from \"./components/Header\";\nimport ResetPasswordRequestForm from \"./components/ResetPasswordRequestForm\";\nimport { useResetPasswordRequestManager } from \"./hooks/resetPasswordRequestManager\";\n\nfunction ResetPasswordRequestScreen() {\n  // Extracting attributes from hook made out of ResetPasswordRequestInstance class of Auth0 React SDK\n  const { resetPasswordRequest, texts, locales } =\n    useResetPasswordRequestManager();\n\n  // Apply theme from SDK instance when screen loads\n  applyAuth0Theme(resetPasswordRequest);\n  // Use locale strings with fallback to SDK texts\n  document.title = texts?.pageTitle || locales.pageTitle;\n\n  return (\n    // Applying UDS theme overrides using the \"theme-universal\" class\n    <ULThemePageLayout className=\"theme-universal\">\n      <ULThemeCard className=\"w-full max-w-[400px] gap-0\">\n        <Header />\n        <ResetPasswordRequestForm />\n        <Footer />\n      </ULThemeCard>\n    </ULThemePageLayout>\n  );\n}\n\nexport default ResetPasswordRequestScreen;\n"],"names":["useResetPasswordRequestManager","texts","captchaImage","isCaptchaAvailable","useScreen","handleResetPasswordRequest","username","captcha","options","executeSafely","resetPassword","handleBackToLogin","backToLogin","useResetPasswordRequest","useTransaction","useLoginIdentifiers","useErrors","useUntrustedData","locales","Footer","returnToPreviousScreenText","handleGoBackAction","jsx","ULThemeButton","Header","activeIdentifiers","identifierDetails","getIdentifierDetails","logoAltText","jsxs","Fragment","ULThemeLogo","ULThemeTitle","ULThemeSubtitle","ResetPasswordRequestForm","inputfield","errors","hasError","dismiss","form","useForm","isSubmitting","buttonText","captchaLabel","generalErrors","error","usernameSDKError","captchaSDKError","captchaConfig","captchaProps","captchaValue","useCaptcha","onSubmit","formData","Form","ULThemeAlert","ULThemeAlertTitle","FormField","field","fieldState","FormItem","ULThemeFloatingLabelField","ULThemeFormMessage","Captcha","ResetPasswordRequestScreen","resetPasswordRequest","applyAuth0Theme","ULThemePageLayout","ULThemeCard"],"mappings":"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"}