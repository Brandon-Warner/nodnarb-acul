{"version":3,"file":"index.ohRr8yqx.js","sources":["../../../src/screens/mfa-login-options/hooks/useMFALoginOptionsManager.tsx","../../../src/screens/mfa-login-options/components/Header.tsx","../../../src/screens/mfa-login-options/components/MFALoginOptionsList.tsx","../../../src/screens/mfa-login-options/index.tsx"],"sourcesContent":["import {\n  enroll,\n  returnToPrevious,\n  useErrors,\n  useMfaLoginOptions,\n  useScreen,\n} from \"@auth0/auth0-acul-react/mfa-login-options\";\nimport {\n  LoginEnrollOptions,\n  ScreenMembersOnMfaLoginOptions,\n} from \"@auth0/auth0-acul-react/types\";\n\nimport { executeSafely } from \"@/utils/helpers/executeSafely\";\n\nimport locales from \"../locales/en.json\";\n\n/**\n * Handles the user login via MFA\n */\nexport const useMfaLoginOptionsManager = () => {\n  const { texts } = useScreen();\n  const mfaLoginOptions = useMfaLoginOptions();\n\n  const handleEnroll = async (payload: LoginEnrollOptions): Promise<void> => {\n    executeSafely(\n      `Enroll into the MFA factor: ${JSON.stringify(payload)}`,\n      () => enroll(payload)\n    );\n  };\n\n  const handleReturnToPrevious = async (): Promise<void> => {\n    await executeSafely(\"Return to previous screen\", () =>\n      returnToPrevious({})\n    );\n  };\n\n  return {\n    mfaLoginOptions,\n    handleEnroll,\n    handleReturnToPrevious,\n    texts: (texts || {}) as ScreenMembersOnMfaLoginOptions[\"texts\"],\n    enrolledFactors: mfaLoginOptions.user?.enrolledFactors || [],\n    locales,\n    useErrors: useErrors(),\n  };\n};\n","import { ChevronLeft } from \"lucide-react\";\n\nimport ULThemeTitle from \"@/components/ULThemeTitle\";\n\nimport { useMfaLoginOptionsManager } from \"../hooks/useMFALoginOptionsManager\";\n\nfunction Header() {\n  const { texts, locales, handleReturnToPrevious } =\n    useMfaLoginOptionsManager();\n\n  return (\n    <>\n      <span className=\"flex items-center justify-start gap-2 px-4\">\n        <button type=\"button\" onClick={handleReturnToPrevious}>\n          <ChevronLeft size={24} color=\"#6f7780\" />\n        </button>\n        <ULThemeTitle className=\"mt-0 mb-0\">\n          {texts?.title || locales.header.title}\n        </ULThemeTitle>\n      </span>\n    </>\n  );\n}\n\nexport default Header;\n","import React from \"react\";\n\nimport type {\n  ErrorItem,\n  MfaLoginFactorType,\n} from \"@auth0/auth0-acul-react/types\";\nimport { ChevronRight } from \"lucide-react\";\n\nimport {\n  MFAGuardianIcon,\n  MFAOTPIcon,\n  MFAPhoneIcon,\n  MFASmsIcon,\n  MFAWebAuthnRoamingIcon,\n} from \"@/assets/icons\";\nimport { MFADuoIcon } from \"@/assets/icons/MFADuoIcon\";\nimport { MFAEmailIcon } from \"@/assets/icons/MFAEmailIcon\";\nimport { MFARecoveryCodeIcon } from \"@/assets/icons/MFARecoveryCodeIcon\";\nimport { MFAWebAuthnPlatformIcon } from \"@/assets/icons/MFAWebAuthnPlatformIcon\";\nimport { ULThemeAlert, ULThemeAlertTitle } from \"@/components/ULThemeError\";\nimport ULThemeSeparator from \"@/components/ULThemeSeparator\";\nimport ULThemeSocialProviderButton from \"@/components/ULThemeSocialProviderButton\";\n\nimport { useMfaLoginOptionsManager } from \"../hooks/useMFALoginOptionsManager\";\n\nfunction MFALoginOptionsList() {\n  // Extracting attributes from hook made out of MFALoginOptionsInstance class of Auth0 React SDK\n  const { texts, handleEnroll, enrolledFactors, locales, useErrors } =\n    useMfaLoginOptionsManager();\n  const { errors, hasError, dismiss } = useErrors;\n\n  // Extract general errors (not field-specific) from the SDK\n  const generalErrors: ErrorItem[] =\n    errors.byType(\"auth0\")?.filter((error) => {\n      return !error.field || error.field === null;\n    }) || [];\n  const enrollOptions = enrolledFactors as MfaLoginFactorType[];\n\n  const displayNameMap: Record<MfaLoginFactorType, string> = {\n    sms: texts?.authenticatorNamesSMS ?? locales.MFALoginOptions.sms,\n    voice: texts?.authenticatorNamesVoice ?? locales.MFALoginOptions.voice,\n    phone: texts?.authenticatorNamesPhone ?? locales.MFALoginOptions.phone,\n    \"push-notification\":\n      texts?.authenticatorNamesPushNotification ??\n      locales.MFALoginOptions.pushNotification,\n    otp: texts?.authenticatorNamesOTP ?? locales.MFALoginOptions.otp,\n    \"webauthn-roaming\":\n      texts?.authenticatorNamesWebauthnRoaming ??\n      locales.MFALoginOptions.webauthnRoaming,\n    email: texts?.authenticatorNamesEmail ?? locales.MFALoginOptions.email,\n    \"recovery-code\":\n      texts?.authenticatorNamesRecoveryCode ??\n      locales.MFALoginOptions.recoveryCode,\n    \"webauthn-platform\":\n      texts?.authenticatorNamesWebauthnPlatform ??\n      locales.MFALoginOptions.webauthnPlatform,\n    duo: texts?.authenticatorNamesDUO ?? locales.MFALoginOptions.duo,\n  };\n\n  const iconMap: Record<MfaLoginFactorType, React.ReactNode> = {\n    sms: <MFASmsIcon />,\n    voice: <MFAPhoneIcon />,\n    phone: <MFAPhoneIcon />,\n    \"push-notification\": <MFAGuardianIcon />,\n    otp: <MFAOTPIcon />,\n    \"webauthn-roaming\": <MFAWebAuthnRoamingIcon />,\n    email: <MFAEmailIcon />,\n    \"recovery-code\": <MFARecoveryCodeIcon />,\n    \"webauthn-platform\": <MFAWebAuthnPlatformIcon />,\n    duo: <MFADuoIcon />,\n  };\n\n  function getDisplayName(factor: MfaLoginFactorType) {\n    return displayNameMap[factor] || factor;\n  }\n\n  function getIcon(factor: MfaLoginFactorType) {\n    return iconMap[factor];\n  }\n\n  return (\n    <>\n      {/* General error messages */}\n      {hasError && generalErrors.length > 0 && (\n        <div className=\"space-y-3 mb-4\">\n          {generalErrors.map((error) => (\n            <ULThemeAlert\n              key={error.id}\n              variant=\"destructive\"\n              onDismiss={() => dismiss(error.id)}\n            >\n              <ULThemeAlertTitle>{error.message}</ULThemeAlertTitle>\n            </ULThemeAlert>\n          ))}\n        </div>\n      )}\n      {/* Render buttons for each enrollment option */}\n      <div className=\"space-y-0 px-10 pb-10\">\n        {enrollOptions.map((option) => {\n          return (\n            <React.Fragment key={option}>\n              <ULThemeSocialProviderButton\n                displayName={getDisplayName(option)}\n                buttonText={getDisplayName(option)}\n                iconEnd={\n                  <ChevronRight className=\"w-4 h-4 theme-universal:text-input-labels\" />\n                }\n                iconComponent={getIcon(option)}\n                onClick={() => handleEnroll({ action: option })}\n                className=\"flex items-center gap-2\"\n                variant=\"ghost\"\n              ></ULThemeSocialProviderButton>\n              <ULThemeSeparator className=\"my-[2px]\" />\n            </React.Fragment>\n          );\n        })}\n      </div>\n    </>\n  );\n}\nexport default MFALoginOptionsList;\n","import ULThemeCard from \"@/components/ULThemeCard\";\nimport ULThemePageLayout from \"@/components/ULThemePageLayout\";\nimport ULThemeSeparator from \"@/components/ULThemeSeparator\";\nimport { applyAuth0Theme } from \"@/utils/theme\";\n\nimport Header from \"./components/Header\";\nimport MFALoginOptionsList from \"./components/MFALoginOptionsList\";\nimport { useMfaLoginOptionsManager } from \"./hooks/useMFALoginOptionsManager\";\n\nfunction MFALoginOptions() {\n  // Extracting attributes from hook made out of MFALoginOptionsInstance class of Auth0 React SDK\n  const { mfaLoginOptions, texts, locales } = useMfaLoginOptionsManager();\n\n  // Apply theme from SDK instance when screen loads\n  applyAuth0Theme(mfaLoginOptions);\n  document.title = texts?.pageTitle || locales.pageTitle;\n\n  return (\n    // Applying UDS theme overrides using the \"theme-universal\" class\n    <ULThemePageLayout className=\"theme-universal\">\n      <ULThemeCard className=\"p-0 pt-4 gap-0 w-(--prompt-width) min-h-(--prompt-min-height)\">\n        <Header />\n        <ULThemeSeparator className=\"grow-0\" />\n        <MFALoginOptionsList />\n      </ULThemeCard>\n    </ULThemePageLayout>\n  );\n}\n\nexport default MFALoginOptions;\n"],"names":["useMfaLoginOptionsManager","texts","useScreen","mfaLoginOptions","useMfaLoginOptions","payload","executeSafely","enroll","returnToPrevious","locales","useErrors","Header","handleReturnToPrevious","jsx","Fragment","jsxs","ChevronLeft","ULThemeTitle","MFALoginOptionsList","handleEnroll","enrolledFactors","errors","hasError","dismiss","generalErrors","error","enrollOptions","displayNameMap","iconMap","MFASmsIcon","MFAPhoneIcon","MFAGuardianIcon","MFAOTPIcon","MFAWebAuthnRoamingIcon","MFAEmailIcon","MFARecoveryCodeIcon","MFAWebAuthnPlatformIcon","MFADuoIcon","getDisplayName","factor","getIcon","ULThemeAlert","ULThemeAlertTitle","option","React","ULThemeSocialProviderButton","ChevronRight","ULThemeSeparator","MFALoginOptions","applyAuth0Theme","ULThemePageLayout","ULThemeCard"],"mappings":"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"}