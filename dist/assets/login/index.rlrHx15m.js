import{j as e}from"../shared/react-vendor.C9XDpjI-.js";import{e as C,n as $,o as I,p as U,h as K,i as V,j as W,q as H,u as M,r as J,F as z,U as G,a as _,s as Q,v as X,b as k,c as v,d as Y,f as A,w as Z,C as ee,g as te,k as oe,x as se,l as re,m as ne,y as S}from"../shared/common.lOgDNxwW.js";import{J as ae,K as ie,L as ce,N as le,G as de,D as ue}from"../shared/vendor.CuJT1XvO.js";const me={title:"Login",orText:"OR"},he={title:"Welcome",description:"Log in to continue",logoAltText:"Application Logo"},pe={signupActionText:"Don't have an account?",signupActionLinkText:"Sign Up"},xe={continueWithText:"Continue with"},ge={selectCountryPlaceholder:"Select Country",captchaLabel:"CAPTCHA*",passwordLabel:"Password*",forgotPasswordLinkText:"Forgot password?",continueButtonText:"Continue"},Le={errorOccurred:"An error occurred",identifierRequired:"Identifier is required",passwordRequired:"Password is required",captchaCompletionRequired:"Please complete the CAPTCHA"},Te={page:me,heading:he,footer:pe,alternativeLogins:xe,loginForm:ge,errors:Le},g=()=>{const o=ae(),t=ie(),r=ce(),{alternateConnections:l,countryCode:s,countryPrefix:n}=r,{isCaptchaAvailable:i,captcha:d,texts:m,links:h}=t;return{login:o,handleLogin:async c=>{const p={username:c.username.trim(),password:c.password.trim()};t.isCaptchaAvailable&&c.captcha?.trim()&&(p.captcha=c.captcha.trim());const f={...p,password:"[REDACTED]"};C(`Perform Login operation with options: ${JSON.stringify(f)}`,()=>o.login(p))},handleFederatedLogin:async c=>{C(`Perform federated login with connection: ${c.connection}`,()=>o.federatedLogin(c))},handlePickCountryCode:async()=>{C("Invoked Pick country code",()=>o.pickCountryCode())},texts:m,locales:Te,isCaptchaAvailable:i,alternateConnections:l,captcha:d,resetPasswordLink:h?.reset_password,signupLink:h?.signup,countryCode:s,countryPrefix:n}},fe=()=>{const{locales:o,alternateConnections:t,handleFederatedLogin:r}=g(),l=s=>{const n={connection:s.name,...s.metadata||{}};r(n)};return!t||t.length===0?null:e.jsx("div",{className:"space-y-3 mt-2",children:t.map(s=>{if(!s?.name)return null;const{displayName:n,iconComponent:i}=$(s),d=`${o?.alternativeLogins?.continueWithText} ${n}`;return e.jsx(I,{displayName:n,buttonText:d,iconComponent:i,onClick:()=>l(s)},s.name)})})};function Ce(){const{texts:o,locales:t,signupLink:r}=g();return r?e.jsxs("div",{className:"mt-6 text-left",children:[e.jsxs("span",{className:"text-sm theme-universal:text-body-text theme-universal:text-(length:--ul-theme-font-body-text-size) theme-universal:font-body-text",children:[o?.signupActionText||t?.footer?.signupActionText," "]}),e.jsx(U,{href:r,children:o?.signupActionLinkText||t?.footer?.signupActionLinkText})]}):null}function je(){const{texts:o,locales:t}=g(),r=o?.logoAltText||t?.heading?.logoAltText;return e.jsxs(e.Fragment,{children:[e.jsx(K,{altText:r}),e.jsx(V,{children:o?.title||t?.heading?.title}),e.jsx(W,{className:"mb-6",children:o?.description||t?.heading?.description})]})}function be(){const{texts:o,locales:t,captcha:r,countryCode:l,countryPrefix:s,resetPasswordLink:n,isCaptchaAvailable:i,handleLogin:d,handlePickCountryCode:m}=g(),h=le(),L=H(h||void 0,o),u=de({defaultValues:{username:"",password:"",captcha:""},reValidateMode:"onBlur"}),{formState:{isSubmitting:j}}=u,c=o?.captchaCodePlaceholder?`${o.captchaCodePlaceholder}*`:t?.loginForm?.captchaLabel,p=o?.passwordPlaceholder?`${o.passwordPlaceholder}*`:t?.loginForm?.passwordLabel,f=o?.forgotPasswordText||t?.loginForm?.forgotPasswordLinkText,N=o?.buttonText||t?.loginForm?.continueButtonText,{captchaConfig:b,captchaProps:E,captchaValue:w}=M(r||void 0,c),{errors:T,hasError:q,dismiss:D}=ue(),y=T.byField("username")[0]?.message,P=T.byField("password")[0]?.message,R=T.byField("captcha")[0]?.message,F=T.byType("auth0").filter(a=>!a.field),B=J(h||[]),O=async a=>{await d({username:a.username,password:a.password,captcha:i&&w?w:void 0})};return e.jsx(z,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(O),children:[q&&F.length>0&&e.jsx("div",{className:"space-y-3 mb-4",children:F.map(a=>e.jsx(G,{variant:"destructive",onDismiss:()=>D(a.id),children:e.jsx(_,{children:a.message||t?.errors?.errorOccurred})},a.id))}),B&&e.jsx("div",{className:"mb-4",children:e.jsx(Q,{selectedCountry:X(l,s),onClick:m,fullWidth:!0,placeholder:t?.loginForm?.selectCountryPlaceholder})}),e.jsx(k,{control:u.control,name:"username",rules:{required:t?.errors?.identifierRequired},render:({field:a,fieldState:x})=>e.jsxs(v,{children:[e.jsx(Y,{...a,label:L.label,type:L.type,autoComplete:L.autoComplete,autoFocus:!0,error:!!x.error||!!y}),e.jsx(A,{sdkError:y,hasFormError:!!x.error})]})}),e.jsx(k,{control:u.control,name:"password",rules:{required:t?.errors?.passwordRequired},render:({field:a,fieldState:x})=>e.jsxs(v,{children:[e.jsx(Z,{...a,label:p,autoComplete:"current-password",error:!!x.error||!!P}),e.jsx(A,{sdkError:P,hasFormError:!!x.error})]})}),i&&b&&e.jsx(ee,{control:u.control,name:"captcha",captcha:b,...E,sdkError:R,rules:{required:t?.errors?.captchaCompletionRequired}}),n&&e.jsx("div",{className:"mb-4 mt-2 text-left",children:e.jsx(U,{href:n,children:f})}),e.jsx(te,{type:"submit",className:"w-full",disabled:j,children:N})]})})}function Fe(){const{login:o,texts:t,locales:r,alternateConnections:l}=g(),s=l&&l.length>0,n=t?.separatorText||r?.page?.orText;document.title=t?.pageTitle||r?.page?.title,oe(o);const i=se("--ul-theme-widget-social-buttons-layout"),d=m=>e.jsxs(e.Fragment,{children:[m==="bottom"&&s&&e.jsx(S,{text:n}),e.jsx(fe,{}),m==="top"&&s&&e.jsx(S,{text:n})]});return e.jsx(re,{className:"theme-universal",children:e.jsxs(ne,{className:"w-full max-w-[400px] gap-0",children:[e.jsx(je,{}),i==="top"&&d("top"),e.jsx(be,{}),e.jsx(Ce,{}),i!=="top"&&d("bottom")]})})}export{Fe as default};
//# sourceMappingURL=index.rlrHx15m.js.map
