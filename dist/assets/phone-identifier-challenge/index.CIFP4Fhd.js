import{j as e}from"../shared/react-vendor.C9XDpjI-.js";import{e as T,g as p,t as g,h as y,i as v,j as C,F as L,U as R,a as k,b as F,c as N,d as S,f as P,k as D,l as U,m as w}from"../shared/common.lOgDNxwW.js";import{aU as E,aV as A,I as B,D as I,aW as V,aX as z,aY as $,G as q}from"../shared/vendor.CuJT1XvO.js";const M="Enter your phone code to log in",W={logoAltText:"Application Logo",title:"Verify Your Identity",phoneNumber:"your phone",smsDescriptionText:"We've sent a text message to: {{phoneNumber}}",voiceDescriptionText:"We've sent a 6-digit code via voice phone call to the following phone number: {{phoneNumber}}"},G={field:{labelText:"Enter the 6-digit code",required:"Please enter the verification code.",submitButtonText:"Verifying"},buttonLabelText:"Continue"},Y={resendCodeText:"Didn't receive a code?",resendButtonText:"Resend",limitReachedText:"Code has been resent.",backButtonText:"Go back"},H={pageTitle:M,header:W,form:G,footer:Y},u=()=>{const t=E(),a=A(),{texts:n,data:s}=t;return{phoneIdentifierChallenge:a,handleSubmitPhoneChallenge:async c=>{const i={code:c?.trim()||""};await T(`Submit Phone Challenge with options: ${JSON.stringify(i)}`,()=>V(i))},handleResendCode:async()=>{await T("Resend code",()=>z({}))},handleReturnToPrevious:async()=>{await T("Return to previous screen",()=>$({}))},texts:n||{},data:s||{},locales:H,useErrors:I(),useResend:B}};function J(){const{texts:t,handleResendCode:a,handleReturnToPrevious:n,locales:s,useResend:o}=u(),{disabled:l}=o({timeoutSeconds:10}),d=t?.resendText||s.footer.resendCodeText,c=t?.resendActionText||s.footer.resendButtonText,i=t?.resendLimitReachedText||s.footer.limitReachedText,h=t?.backButtonText||s.footer.backButtonText,x=async()=>{await a()},m=async()=>{await n()};return e.jsxs("div",{className:"text-center space-y-4 mt-4",children:[e.jsx("div",{children:l?e.jsx("span",{className:"text-(length:--ul-theme-font-body-text-size) font-body",children:i}):e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-(length:--ul-theme-font-body-text-size) font-body",children:[d," "]}),e.jsx(p,{onClick:x,variant:"link",size:"link",children:c})]})}),l&&e.jsx("div",{children:e.jsx(p,{onClick:m,variant:"link",size:"link",children:h})})]})}function K(){const{texts:t,data:a,locales:n}=u(),s=t?.logoAltText||n.header.logoAltText,o=a?.phone||n.header.phoneNumber,l=g("header.smsDescriptionText",{phoneNumber:o},n),d=g("header.voiceDescriptionText",{phoneNumber:o},n),c=h=>h?h+` ${o}`:"",i=a?.messageType==="text"?c(t?.smsDescription)||l:c(t?.voiceDescription)||d;return e.jsxs(e.Fragment,{children:[e.jsx(y,{altText:s}),e.jsx(v,{children:t?.title||n.header.title}),e.jsx(C,{className:"mb-6",children:i})]})}function O(){const{handleSubmitPhoneChallenge:t,useErrors:a,texts:n,locales:s}=u(),o=q({defaultValues:{code:""}}),{formState:{isSubmitting:l}}=o,d=n?.buttonText||s.form.buttonLabelText,c=n?.placeholder||s.form.field.labelText,{errors:i,hasError:h,dismiss:x}=a,m=i.byType("auth0")?.filter(r=>!r.field||r.field===null)||[],b=i.byField("code")[0]?.message,j=async r=>{await t(r.code)};return e.jsx(L,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(j),children:[h&&m.length>0&&e.jsx("div",{className:"space-y-3 mb-4",children:m.map(r=>e.jsx(R,{variant:"destructive",onDismiss:()=>x(r.id),children:e.jsx(k,{children:r.message})},r.id))}),e.jsx(F,{control:o.control,name:"code",rules:{required:s.form.field.required},render:({field:r,fieldState:f})=>e.jsxs(N,{children:[e.jsx(S,{...r,label:`${c}*`,type:"text",inputMode:"numeric",placeholder:"",autoComplete:"one-time-code",autoFocus:!0,error:!!f.error||!!b}),e.jsx(P,{sdkError:b,hasFormError:!!f.error})]})}),e.jsx(p,{type:"submit",variant:"primary",className:"w-full",disabled:l,children:l?`${s.form.field.submitButtonText}`:d})]})})}function _(){const{phoneIdentifierChallenge:t,texts:a,locales:n}=u();return D(t),document.title=a?.pageTitle||n.pageTitle,e.jsx(U,{className:"theme-universal",children:e.jsxs(w,{className:"w-full max-w-[400px] gap-0",children:[e.jsx(K,{}),e.jsx(O,{}),e.jsx(J,{})]})})}export{_ as default};
//# sourceMappingURL=index.CIFP4Fhd.js.map
