{"version":3,"file":"index.CIFP4Fhd.js","sources":["../../../src/screens/phone-identifier-challenge/hooks/usePhoneIdentifierChallengeManager.ts","../../../src/screens/phone-identifier-challenge/components/Footer.tsx","../../../src/screens/phone-identifier-challenge/components/Header.tsx","../../../src/screens/phone-identifier-challenge/components/PhoneIdentifierForm.tsx","../../../src/screens/phone-identifier-challenge/index.tsx"],"sourcesContent":["import {\n  resendCode,\n  returnToPrevious,\n  submitPhoneChallenge,\n  useErrors,\n  usePhoneIdentifierChallenge,\n  useResend,\n  useScreen,\n} from \"@auth0/auth0-acul-react/phone-identifier-challenge\";\nimport {\n  PhoneChallengeOptions,\n  ScreenMembersOnPhoneIdentifierChallenge,\n} from \"@auth0/auth0-acul-react/types\";\n\nimport { executeSafely } from \"@/utils/helpers/executeSafely\";\n\nimport locales from \"../locales/en.json\";\n\nexport const usePhoneIdentifierChallengeManager = () => {\n  const screen = useScreen();\n  const phoneIdentifierChallenge = usePhoneIdentifierChallenge();\n\n  const { texts, data } = screen;\n\n  const handleSubmitPhoneChallenge = async (code: string): Promise<void> => {\n    const options: PhoneChallengeOptions = {\n      code: code?.trim() || \"\",\n    };\n\n    await executeSafely(\n      `Submit Phone Challenge with options: ${JSON.stringify(options)}`,\n      () => submitPhoneChallenge(options)\n    );\n  };\n\n  const handleResendCode = async (): Promise<void> => {\n    await executeSafely(\"Resend code\", () => resendCode({}));\n  };\n\n  const handleReturnToPrevious = async (): Promise<void> => {\n    await executeSafely(\"Return to previous screen\", () =>\n      returnToPrevious({})\n    );\n  };\n\n  return {\n    phoneIdentifierChallenge,\n    handleSubmitPhoneChallenge,\n    handleResendCode,\n    handleReturnToPrevious,\n    texts: (texts || {}) as ScreenMembersOnPhoneIdentifierChallenge[\"texts\"],\n    data: (data || {}) as ScreenMembersOnPhoneIdentifierChallenge[\"data\"],\n    locales,\n    useErrors: useErrors(),\n    useResend,\n  };\n};\n","import { ULThemeButton } from \"@/components/ULThemeButton\";\n\nimport { usePhoneIdentifierChallengeManager } from \"../hooks/usePhoneIdentifierChallengeManager\";\n\nfunction Footer() {\n  const {\n    texts,\n    handleResendCode,\n    handleReturnToPrevious,\n    locales,\n    useResend,\n  } = usePhoneIdentifierChallengeManager();\n\n  const { disabled } = useResend({\n    timeoutSeconds: 10,\n  });\n\n  const resendText = texts?.resendText || locales.footer.resendCodeText;\n  const resendLinkText =\n    texts?.resendActionText || locales.footer.resendButtonText;\n  const resendLimitReachedText =\n    texts?.resendLimitReachedText || locales.footer.limitReachedText;\n  const backButtonText = texts?.backButtonText || locales.footer.backButtonText;\n\n  const handleResendClick = async () => {\n    await handleResendCode();\n  };\n\n  const handleReturnClick = async () => {\n    await handleReturnToPrevious();\n  };\n\n  return (\n    <div className=\"text-center space-y-4 mt-4\">\n      {/* Resend code section */}\n      <div>\n        {!disabled ? (\n          <>\n            <span className=\"text-(length:--ul-theme-font-body-text-size) font-body\">\n              {resendText}{\" \"}\n            </span>\n            <ULThemeButton\n              onClick={handleResendClick}\n              variant=\"link\"\n              size=\"link\"\n            >\n              {resendLinkText}\n            </ULThemeButton>\n          </>\n        ) : (\n          <span className=\"text-(length:--ul-theme-font-body-text-size) font-body\">\n            {resendLimitReachedText}\n          </span>\n        )}\n      </div>\n\n      {/* Go back button */}\n      {disabled && (\n        <div>\n          <ULThemeButton onClick={handleReturnClick} variant=\"link\" size=\"link\">\n            {backButtonText}\n          </ULThemeButton>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Footer;\n","import ULThemeLogo from \"@/components/ULThemeLogo\";\nimport ULThemeSubtitle from \"@/components/ULThemeSubtitle\";\nimport ULThemeTitle from \"@/components/ULThemeTitle\";\nimport { translate } from \"@/utils/helpers/localeTranslate\";\n\nimport { usePhoneIdentifierChallengeManager } from \"../hooks/usePhoneIdentifierChallengeManager\";\n\nfunction Header() {\n  const { texts, data, locales } = usePhoneIdentifierChallengeManager();\n\n  // Handle text fallbacks in component\n  const logoAltText = texts?.logoAltText || locales.header.logoAltText;\n  const phoneNumber = data?.phone || locales.header.phoneNumber;\n  const defaultSmsDescription = translate(\n    \"header.smsDescriptionText\",\n    {\n      phoneNumber: phoneNumber,\n    },\n    locales\n  );\n  const defaultVoiceDescription = translate(\n    \"header.voiceDescriptionText\",\n    {\n      phoneNumber: phoneNumber,\n    },\n    locales\n  );\n\n  const appendPhoneNumber = (text?: string) =>\n    text ? text + ` ${phoneNumber}` : \"\";\n\n  const description =\n    data?.messageType === \"text\"\n      ? appendPhoneNumber(texts?.smsDescription) || defaultSmsDescription\n      : appendPhoneNumber(texts?.voiceDescription) || defaultVoiceDescription;\n\n  return (\n    <>\n      <ULThemeLogo altText={logoAltText}></ULThemeLogo>\n      <ULThemeTitle>{texts?.title || locales.header.title}</ULThemeTitle>\n      <ULThemeSubtitle className=\"mb-6\">{description}</ULThemeSubtitle>\n    </>\n  );\n}\n\nexport default Header;\n","import { useForm } from \"react-hook-form\";\n\nimport type {\n  ErrorItem,\n  PhoneChallengeOptions,\n} from \"@auth0/auth0-acul-react/types\";\n\nimport {\n  ULThemeFloatingLabelField,\n  ULThemeFormMessage,\n} from \"@/components/form\";\nimport { Form, FormField, FormItem } from \"@/components/ui/form\";\nimport { ULThemeButton } from \"@/components/ULThemeButton\";\nimport { ULThemeAlert, ULThemeAlertTitle } from \"@/components/ULThemeError\";\n\nimport { usePhoneIdentifierChallengeManager } from \"../hooks/usePhoneIdentifierChallengeManager\";\n\nfunction PhoneIdentifierChallengeForm() {\n  const { handleSubmitPhoneChallenge, useErrors, texts, locales } =\n    usePhoneIdentifierChallengeManager();\n\n  // Initialize the form using react-hook-form\n  const form = useForm<PhoneChallengeOptions>({\n    defaultValues: {\n      code: \"\",\n    },\n  });\n\n  const {\n    formState: { isSubmitting },\n  } = form;\n\n  const buttonText = texts?.buttonText || locales.form.buttonLabelText;\n  const codeLabelText = texts?.placeholder || locales.form.field.labelText;\n  const { errors, hasError, dismiss } = useErrors;\n\n  // Extract general errors (not field-specific) from the SDK\n  const generalErrors: ErrorItem[] =\n    errors.byType(\"auth0\")?.filter((error) => {\n      return !error.field || error.field === null;\n    }) || [];\n\n  const codeSDKError = errors.byField(\"code\")[0]?.message;\n\n  const onSubmit = async (formData: PhoneChallengeOptions) => {\n    await handleSubmitPhoneChallenge(formData.code);\n  };\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(onSubmit)}>\n        {/* General error messages */}\n        {hasError && generalErrors.length > 0 && (\n          <div className=\"space-y-3 mb-4\">\n            {generalErrors.map((error) => (\n              <ULThemeAlert\n                key={error.id}\n                variant=\"destructive\"\n                onDismiss={() => dismiss(error.id)}\n              >\n                <ULThemeAlertTitle>{error.message}</ULThemeAlertTitle>\n              </ULThemeAlert>\n            ))}\n          </div>\n        )}\n\n        {/* Phone Code input field */}\n        <FormField\n          control={form.control}\n          name=\"code\"\n          rules={{\n            required: locales.form.field.required,\n          }}\n          render={({ field, fieldState }) => (\n            <FormItem>\n              <ULThemeFloatingLabelField\n                {...field}\n                label={`${codeLabelText}*`}\n                type=\"text\"\n                inputMode=\"numeric\"\n                placeholder=\"\"\n                autoComplete=\"one-time-code\"\n                autoFocus\n                error={!!fieldState.error || !!codeSDKError}\n              />\n              <ULThemeFormMessage\n                sdkError={codeSDKError}\n                hasFormError={!!fieldState.error}\n              />\n            </FormItem>\n          )}\n        />\n\n        {/* Submit button */}\n        <ULThemeButton\n          type=\"submit\"\n          variant=\"primary\"\n          className=\"w-full\"\n          disabled={isSubmitting}\n        >\n          {isSubmitting ? `${locales.form.field.submitButtonText}` : buttonText}\n        </ULThemeButton>\n      </form>\n    </Form>\n  );\n}\n\nexport default PhoneIdentifierChallengeForm;\n","import ULThemeCard from \"@/components/ULThemeCard\";\nimport ULThemePageLayout from \"@/components/ULThemePageLayout\";\nimport { applyAuth0Theme } from \"@/utils/theme\";\n\nimport Footer from \"./components/Footer\";\nimport Header from \"./components/Header\";\nimport PhoneIdentifierChallengeForm from \"./components/PhoneIdentifierForm\";\nimport { usePhoneIdentifierChallengeManager } from \"./hooks/usePhoneIdentifierChallengeManager\";\n\nfunction PhoneIdentifierChallengeScreen() {\n  // Extracting attributes from hook made out of PhoneIdentifierChallenge instance of Auth0 React ACUL SDK\n  const { phoneIdentifierChallenge, texts, locales } =\n    usePhoneIdentifierChallengeManager();\n\n  applyAuth0Theme(phoneIdentifierChallenge);\n  document.title = texts?.pageTitle || locales.pageTitle;\n\n  return (\n    <ULThemePageLayout className=\"theme-universal\">\n      <ULThemeCard className=\"w-full max-w-[400px] gap-0\">\n        <Header />\n        <PhoneIdentifierChallengeForm />\n        <Footer />\n      </ULThemeCard>\n    </ULThemePageLayout>\n  );\n}\n\nexport default PhoneIdentifierChallengeScreen;\n"],"names":["usePhoneIdentifierChallengeManager","screen","useScreen","phoneIdentifierChallenge","usePhoneIdentifierChallenge","texts","data","code","options","executeSafely","submitPhoneChallenge","resendCode","returnToPrevious","locales","useErrors","useResend","Footer","handleResendCode","handleReturnToPrevious","disabled","resendText","resendLinkText","resendLimitReachedText","backButtonText","handleResendClick","handleReturnClick","jsxs","jsx","Fragment","ULThemeButton","Header","logoAltText","phoneNumber","defaultSmsDescription","translate","defaultVoiceDescription","appendPhoneNumber","text","description","ULThemeLogo","ULThemeTitle","ULThemeSubtitle","PhoneIdentifierChallengeForm","handleSubmitPhoneChallenge","form","useForm","isSubmitting","buttonText","codeLabelText","errors","hasError","dismiss","generalErrors","error","codeSDKError","onSubmit","formData","Form","ULThemeAlert","ULThemeAlertTitle","FormField","field","fieldState","FormItem","ULThemeFloatingLabelField","ULThemeFormMessage","PhoneIdentifierChallengeScreen","applyAuth0Theme","ULThemePageLayout","ULThemeCard"],"mappings":"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"}