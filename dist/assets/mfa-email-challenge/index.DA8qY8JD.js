import{j as e,r as v}from"../shared/react-vendor.C9XDpjI-.js";import{e as u,g as f,t as w,h as R,i as M,j as N,F as S,U,a as P,o as q,b as E,c as C,d as z,f as I,L as V,N as $,k as B,l as O,m as G}from"../shared/common.lOgDNxwW.js";import{a9 as H,I as J,D as K,aa as W,ab as Y,ac as Q,ad as X,ae as Z,af as _,G as ee,k as te}from"../shared/vendor.CuJT1XvO.js";const se="Enter your email code to log in",oe={logoAltText:"Application Logo",title:"Verify Your Identity",description:"We've sent an email with your code to"},ne={resendText:"Didn't receive an email?",resendActionText:"Resend",tryAnotherMethodText:"Try another method",resendCooldown:"Resend in {{seconds}}s"},ae={fields:{email:{identifierLabelText:"Email"},code:{codeLabelText:"Enter the code",requiredText:"Please enter the verification code."}},buttonText:"Continue",rememberDeviceText:"Remember this device for 30 days",verificationText:"Verifying"},re={pageTitle:se,header:oe,footer:ne,form:ae},T=()=>{const{texts:s,data:o}=H(),r=async()=>{await u("Resend email with code",()=>Q())},n=async(c,l=!1)=>{const d={code:c?.trim()||"",rememberDevice:l},m={...d,code:"[REDACTED]"};await u(`Continue MFA Email Challenge with options: ${JSON.stringify(m)}`,()=>X(d))},a=async()=>{await u("Try another MFA method",()=>Z())},i=async()=>{await u("Pick Another Email",()=>_())};return{mfaEmailChallenge:Y(),data:o||{},texts:s||{},enrolledEmails:W().enrolledEmails,useErrors:K(),locales:re,handleResendEmail:r,handleContinue:n,handleTryAnotherMethod:a,handlePickEmail:i,useResend:J}};function ie(){const{texts:s,handleResendEmail:o,handleTryAnotherMethod:r,locales:n,useResend:a}=T(),i=s?.resendText||n.footer.resendText,c=s?.resendActionText||n.footer.resendActionText,l=s?.tryAnotherMethodText||n.footer.tryAnotherMethodText,{remaining:d,disabled:m}=a({timeoutSeconds:30}),x=async()=>{await o()};return e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("span",{className:"pr-1 text-body-text text-(length:--ul-theme-font-body-text-size) font-body",children:i}),c&&e.jsx(f,{onClick:x,variant:"link",size:"link",disabled:m,children:m?w("footer.resendCooldown",{seconds:String(d)},n):c}),l&&e.jsx(f,{onClick:()=>r(),variant:"link",size:"link",children:l})]})}function le(){const{texts:s,locales:o}=T(),r=s?.logoAltText||o.header.logoAltText,n=s?.title||o.header.title,a=s?.description||o.header.description;return e.jsxs(e.Fragment,{children:[e.jsx(R,{altText:r}),e.jsx(M,{children:n}),e.jsx(N,{className:"mb-6",children:a})]})}function ce(){const{handleContinue:s,data:o,useErrors:r,texts:n,locales:a,enrolledEmails:i,handlePickEmail:c}=T(),{errors:l,hasError:d,dismiss:m}=r,[x,b]=v.useState(!0);v.useEffect(()=>{Array.isArray(i)&&i.length>1?b(!1):b(!0)},[i]);const h=ee({defaultValues:{code:"",rememberDevice:!1}}),{formState:{isSubmitting:g}}=h,L=n?.buttonText||a.form.buttonText,A=n?.codeLabelText||a.form.fields.code.codeLabelText,k=n?.rememberDeviceText||a.form.rememberDeviceText,y=l.byType("auth0")?.filter(t=>!t.field||t.field===null)||[],p=l.byField("code")[0]?.message,D=o?.email||"",F=async t=>{await s(t.code,t.rememberDevice)};return e.jsx(S,{...h,children:e.jsxs("form",{onSubmit:h.handleSubmit(F),children:[d&&y.length>0&&e.jsx("div",{className:"space-y-3 mb-4",children:y.map(t=>e.jsx(U,{variant:"destructive",onDismiss:()=>m(t.id),children:e.jsx(P,{children:t.message})},t.id))}),e.jsx(q,{type:"button",displayName:a.form.fields.email.identifierLabelText,buttonText:D,iconEnd:!x&&e.jsx(te,{className:"w-4 h-4 theme-universal:text-input-labels"}),onClick:c,className:"flex items-center gap-2 mb-2",variant:"outline",iconComponent:void 0,disabled:x}),e.jsx(E,{control:h.control,name:"code",rules:{required:a.form.fields.code.requiredText},render:({field:t,fieldState:j})=>e.jsxs(C,{children:[e.jsx(z,{...t,label:A,type:"text",inputMode:"numeric",placeholder:"",autoComplete:"one-time-code",autoFocus:!0,error:!!j.error||!!p,isRequired:!0}),e.jsx(I,{sdkError:p,hasFormError:!!j.error})]})}),o?.showRememberDevice&&e.jsx(E,{control:h.control,name:"rememberDevice",render:({field:t})=>e.jsx(C,{children:e.jsxs("div",{className:"flex items-center space-x-2 my-4",children:[e.jsx(V,{id:"rememberDevice",checked:t.value,onCheckedChange:t.onChange,"aria-labelledby":"rememberDevice-label"}),e.jsx($,{id:"rememberDevice-label",htmlFor:"rememberDevice",className:"text-(length:--ul-theme-font-body-text-size) cursor-pointer",children:k})]})})}),e.jsx(f,{type:"submit",variant:"primary",className:"w-full",disabled:g,children:g?`${a.form.verificationText}...`:L})]})})}function xe(){const{mfaEmailChallenge:s,texts:o,locales:r}=T();return B(s),document.title=o?.pageTitle||r.pageTitle,e.jsx(O,{className:"theme-universal",children:e.jsxs(G,{className:"w-full max-w-[400px] gap-0",children:[e.jsx(le,{}),e.jsx(ce,{}),e.jsx(ie,{})]})})}export{xe as default};
//# sourceMappingURL=index.DA8qY8JD.js.map
