{"version":3,"file":"index.DA8qY8JD.js","sources":["../../../src/screens/mfa-email-challenge/hooks/useMFAEmailChallengeManager.tsx","../../../src/screens/mfa-email-challenge/components/Footer.tsx","../../../src/screens/mfa-email-challenge/components/Header.tsx","../../../src/screens/mfa-email-challenge/components/MfaEmailChallengeForm.tsx","../../../src/screens/mfa-email-challenge/index.tsx"],"sourcesContent":["import {\n  continueMethod,\n  pickEmail,\n  resendCode,\n  tryAnotherMethod,\n  useErrors,\n  useMfaEmailChallenge,\n  useResend,\n  useScreen,\n  useUser,\n} from \"@auth0/auth0-acul-react/mfa-email-challenge\";\nimport {\n  ContinueOptions,\n  ScreenMembersOnMfaEmailChallenge,\n} from \"@auth0/auth0-acul-react/types\";\n\nimport { executeSafely } from \"@/utils/helpers/executeSafely\";\n\nimport locales from \"../locales/en.json\";\n\nexport const useMfaEmailChallengeManager = () => {\n  const { texts, data } = useScreen();\n\n  const handleResendEmail = async (): Promise<void> => {\n    await executeSafely(`Resend email with code`, () => resendCode());\n  };\n\n  const handleContinue = async (\n    code: string,\n    rememberDevice: boolean = false\n  ): Promise<void> => {\n    const options: ContinueOptions = {\n      code: code?.trim() || \"\",\n      rememberDevice,\n    };\n\n    const logOptions = {\n      ...options,\n      code: \"[REDACTED]\",\n    };\n\n    await executeSafely(\n      `Continue MFA Email Challenge with options: ${JSON.stringify(logOptions)}`,\n      () => continueMethod(options)\n    );\n  };\n\n  const handleTryAnotherMethod = async (): Promise<void> => {\n    await executeSafely(`Try another MFA method`, () => tryAnotherMethod());\n  };\n\n  const handlePickEmail = async () => {\n    await executeSafely(`Pick Another Email`, () => pickEmail());\n  };\n\n  return {\n    mfaEmailChallenge: useMfaEmailChallenge(),\n    data: (data || {}) as ScreenMembersOnMfaEmailChallenge[\"data\"],\n    texts: (texts || {}) as ScreenMembersOnMfaEmailChallenge[\"texts\"],\n    enrolledEmails: useUser().enrolledEmails,\n    useErrors: useErrors(),\n    locales,\n    handleResendEmail,\n    handleContinue,\n    handleTryAnotherMethod,\n    handlePickEmail,\n    useResend,\n  };\n};\n","import { ULThemeButton } from \"@/components/ULThemeButton\";\nimport { translate } from \"@/utils/helpers/localeTranslate\";\n\nimport { useMfaEmailChallengeManager } from \"../hooks/useMFAEmailChallengeManager\";\n\nfunction Footer() {\n  const {\n    texts,\n    handleResendEmail,\n    handleTryAnotherMethod,\n    locales,\n    useResend,\n  } = useMfaEmailChallengeManager();\n\n  // Handle text fallbacks in component\n  const footerText = texts?.resendText || locales.footer.resendText;\n  const footerLinkResendText =\n    texts?.resendActionText || locales.footer.resendActionText;\n  const footerLinkTryAnotherMethodText =\n    texts?.tryAnotherMethodText || locales.footer.tryAnotherMethodText;\n\n  const { remaining, disabled } = useResend({\n    timeoutSeconds: 30,\n  });\n\n  const handleResendClick = async () => {\n    await handleResendEmail();\n  };\n\n  return (\n    <div className=\"mt-4 text-center\">\n      <span className=\"pr-1 text-body-text text-(length:--ul-theme-font-body-text-size) font-body\">\n        {footerText}\n      </span>\n      {footerLinkResendText && (\n        <ULThemeButton\n          onClick={handleResendClick}\n          variant=\"link\"\n          size=\"link\"\n          disabled={disabled}\n        >\n          {disabled\n            ? translate(\n                \"footer.resendCooldown\",\n                { seconds: String(remaining) },\n                locales\n              )\n            : footerLinkResendText}\n        </ULThemeButton>\n      )}\n      {footerLinkTryAnotherMethodText && (\n        <ULThemeButton\n          onClick={() => handleTryAnotherMethod()}\n          variant=\"link\"\n          size=\"link\"\n        >\n          {footerLinkTryAnotherMethodText}\n        </ULThemeButton>\n      )}\n    </div>\n  );\n}\n\nexport default Footer;\n","import ULThemeLogo from \"@/components/ULThemeLogo\";\nimport ULThemeSubtitle from \"@/components/ULThemeSubtitle\";\nimport ULThemeTitle from \"@/components/ULThemeTitle\";\n\nimport { useMfaEmailChallengeManager } from \"../hooks/useMFAEmailChallengeManager\";\n\nfunction Header() {\n  const { texts, locales } = useMfaEmailChallengeManager();\n  const logoAltText = texts?.logoAltText || locales.header.logoAltText;\n  const title = texts?.title || locales.header.title;\n  const description = texts?.description || locales.header.description;\n\n  return (\n    <>\n      <ULThemeLogo altText={logoAltText}></ULThemeLogo>\n      <ULThemeTitle>{title}</ULThemeTitle>\n      <ULThemeSubtitle className=\"mb-6\">{description}</ULThemeSubtitle>\n    </>\n  );\n}\n\nexport default Header;\n","import { useEffect, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\n\nimport type { ContinueOptions, ErrorItem } from \"@auth0/auth0-acul-react/types\";\nimport { ChevronRight } from \"lucide-react\";\n\nimport {\n  ULThemeFloatingLabelField,\n  ULThemeFormMessage,\n} from \"@/components/form\";\nimport { Form, FormField, FormItem } from \"@/components/ui/form\";\nimport { Label } from \"@/components/ui/label\";\nimport { ULThemeButton } from \"@/components/ULThemeButton\";\nimport { ULThemeCheckbox } from \"@/components/ULThemeCheckbox\";\nimport { ULThemeAlert, ULThemeAlertTitle } from \"@/components/ULThemeError\";\nimport ULThemeSocialProviderButton from \"@/components/ULThemeSocialProviderButton\";\n\nimport { useMfaEmailChallengeManager } from \"../hooks/useMFAEmailChallengeManager\";\n\nfunction MfaEmailChallengeForm() {\n  const {\n    handleContinue,\n    data,\n    useErrors,\n    texts,\n    locales,\n    enrolledEmails,\n    handlePickEmail,\n  } = useMfaEmailChallengeManager();\n  const { errors, hasError, dismiss } = useErrors;\n  const [isDisabled, setIsDisabled] = useState(true);\n\n  useEffect(() => {\n    if (Array.isArray(enrolledEmails) && enrolledEmails.length > 1) {\n      setIsDisabled(false);\n    } else {\n      setIsDisabled(true);\n    }\n  }, [enrolledEmails]);\n\n  // Initialize the form using react-hook-form\n  const form = useForm<ContinueOptions>({\n    defaultValues: {\n      code: \"\",\n      rememberDevice: false,\n    },\n  });\n\n  const {\n    formState: { isSubmitting },\n  } = form;\n\n  const buttonText = texts?.buttonText || locales.form.buttonText;\n  const codeLabelText =\n    texts?.codeLabelText || locales.form.fields.code.codeLabelText;\n  const rememberDeviceText =\n    texts?.rememberDeviceText || locales.form.rememberDeviceText;\n\n  // Extract general errors (not field-specific) from the SDK\n  const generalErrors: ErrorItem[] =\n    errors.byType(\"auth0\")?.filter((error) => {\n      return !error.field || error.field === null;\n    }) || [];\n\n  const codeSDKError = errors.byField(\"code\")[0]?.message;\n  const userEmail = data?.email || \"\";\n\n  const onSubmit = async (formData: ContinueOptions) => {\n    await handleContinue(formData.code, formData.rememberDevice);\n  };\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(onSubmit)}>\n        {/* General error messages */}\n        {hasError && generalErrors.length > 0 && (\n          <div className=\"space-y-3 mb-4\">\n            {generalErrors.map((error: ErrorItem) => (\n              <ULThemeAlert\n                key={error.id}\n                variant=\"destructive\"\n                onDismiss={() => dismiss(error.id)}\n              >\n                <ULThemeAlertTitle>{error.message}</ULThemeAlertTitle>\n              </ULThemeAlert>\n            ))}\n          </div>\n        )}\n\n        {/* User Email */}\n        <ULThemeSocialProviderButton\n          type=\"button\"\n          displayName={locales.form.fields.email.identifierLabelText}\n          buttonText={userEmail}\n          iconEnd={\n            !isDisabled && (\n              <ChevronRight className=\"w-4 h-4 theme-universal:text-input-labels\" />\n            )\n          }\n          onClick={handlePickEmail}\n          className=\"flex items-center gap-2 mb-2\"\n          variant=\"outline\"\n          iconComponent={undefined}\n          disabled={isDisabled}\n        ></ULThemeSocialProviderButton>\n\n        {/* Code input field */}\n        <FormField\n          control={form.control}\n          name=\"code\"\n          rules={{\n            required: locales.form.fields.code.requiredText,\n          }}\n          render={({ field, fieldState }) => (\n            <FormItem>\n              <ULThemeFloatingLabelField\n                {...field}\n                label={codeLabelText}\n                type=\"text\"\n                inputMode=\"numeric\"\n                placeholder=\"\"\n                autoComplete=\"one-time-code\"\n                autoFocus\n                error={!!fieldState.error || !!codeSDKError}\n                isRequired={true}\n              />\n              <ULThemeFormMessage\n                sdkError={codeSDKError}\n                hasFormError={!!fieldState.error}\n              />\n            </FormItem>\n          )}\n        />\n\n        {/* Remember device checkbox */}\n        {data?.showRememberDevice && (\n          <FormField\n            control={form.control}\n            name=\"rememberDevice\"\n            render={({ field }) => (\n              <FormItem>\n                <div className=\"flex items-center space-x-2 my-4\">\n                  <ULThemeCheckbox\n                    id=\"rememberDevice\"\n                    checked={field.value}\n                    onCheckedChange={field.onChange}\n                    aria-labelledby=\"rememberDevice-label\"\n                  />\n                  <Label\n                    id=\"rememberDevice-label\"\n                    htmlFor=\"rememberDevice\"\n                    className=\"text-(length:--ul-theme-font-body-text-size) cursor-pointer\"\n                  >\n                    {rememberDeviceText}\n                  </Label>\n                </div>\n              </FormItem>\n            )}\n          />\n        )}\n\n        {/* Submit button */}\n        <ULThemeButton\n          type=\"submit\"\n          variant=\"primary\"\n          className=\"w-full\"\n          disabled={isSubmitting}\n        >\n          {isSubmitting ? `${locales.form.verificationText}...` : buttonText}\n        </ULThemeButton>\n      </form>\n    </Form>\n  );\n}\n\nexport default MfaEmailChallengeForm;\n","import ULThemeCard from \"@/components/ULThemeCard\";\nimport ULThemePageLayout from \"@/components/ULThemePageLayout\";\nimport { applyAuth0Theme } from \"@/utils/theme\";\n\nimport Footer from \"./components/Footer\";\nimport Header from \"./components/Header\";\nimport MfaEmailChallengeForm from \"./components/MfaEmailChallengeForm\";\nimport { useMfaEmailChallengeManager } from \"./hooks/useMFAEmailChallengeManager\";\n\nfunction MFAEmailChallengeScreen() {\n  // Extracting attributes from hook made out of MFAEmailChallengeInstance class of Auth0 React SDK\n  const { mfaEmailChallenge, texts, locales } = useMfaEmailChallengeManager();\n\n  // Apply theme from SDK instance when screen loads\n  applyAuth0Theme(mfaEmailChallenge);\n  document.title = texts?.pageTitle || locales.pageTitle;\n\n  return (\n    // Applying UDS theme overrides using the \"theme-universal\" class\n    <ULThemePageLayout className=\"theme-universal\">\n      <ULThemeCard className=\"w-full max-w-[400px] gap-0\">\n        <Header />\n        <MfaEmailChallengeForm />\n        <Footer />\n      </ULThemeCard>\n    </ULThemePageLayout>\n  );\n}\n\nexport default MFAEmailChallengeScreen;\n"],"names":["useMfaEmailChallengeManager","texts","data","useScreen","handleResendEmail","executeSafely","resendCode","handleContinue","code","rememberDevice","options","logOptions","continueMethod","handleTryAnotherMethod","tryAnotherMethod","handlePickEmail","pickEmail","useMfaEmailChallenge","useUser","useErrors","locales","useResend","Footer","footerText","footerLinkResendText","footerLinkTryAnotherMethodText","remaining","disabled","handleResendClick","jsxs","jsx","ULThemeButton","translate","Header","logoAltText","title","description","Fragment","ULThemeLogo","ULThemeTitle","ULThemeSubtitle","MfaEmailChallengeForm","enrolledEmails","errors","hasError","dismiss","isDisabled","setIsDisabled","useState","useEffect","form","useForm","isSubmitting","buttonText","codeLabelText","rememberDeviceText","generalErrors","error","codeSDKError","userEmail","onSubmit","formData","Form","ULThemeAlert","ULThemeAlertTitle","ULThemeSocialProviderButton","ChevronRight","FormField","field","fieldState","FormItem","ULThemeFloatingLabelField","ULThemeFormMessage","ULThemeCheckbox","Label","MFAEmailChallengeScreen","mfaEmailChallenge","applyAuth0Theme","ULThemePageLayout","ULThemeCard"],"mappings":"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"}