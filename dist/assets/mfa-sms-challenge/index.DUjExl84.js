import{j as e}from"../shared/react-vendor.C9XDpjI-.js";import{e as b,g,h as v,i as M,j as N,F,U as L,a as w,d as j,b as S,c as k,f as D,L as U,N as R,k as X,l as E,m as P}from"../shared/common.lOgDNxwW.js";import{aI as V,aJ as z,I as G,D as I,G as q}from"../shared/vendor.CuJT1XvO.js";const $={title:"Verify Your Identity - MFA"},B={logoAlt:"Application Logo",title:"Verify Your Identity",description:"We've sent a text message to:"},J={fields:{phoneNumber:{label:"Phone Number",fallback:"XXXXXXXXX"},code:{label:"Enter the 6-digit code",required:"Please enter the verification code."}},button:"Continue",buttonSubmitting:"Verifying...",rememberDevice:"Remember this device for 30 days"},Y={resend:{text:"Didn't receive a code?",linkText:"Resend",separator:"or",getCall:"get a call"},tryAnother:"Try another method"},H={page:$,header:B,form:J,footer:Y},p=()=>{const t=V(),a=z(),{texts:n,data:s,links:i}=a;return{mfaSmsChallenge:t,handleContinueMfaSmsChallenge:async(x,u=!1)=>{const c={code:x?.trim()||"",rememberDevice:u};await b(`Continue MFA SMS Challenge with options: ${JSON.stringify(c)}`,()=>t.continueMfaSmsChallenge(c))},handleResendCode:async()=>{await b("Resend MFA SMS code",()=>t.resendCode({}))},handleGetACall:async()=>{await b("Request MFA call",()=>t.getACall({}))},handlePickSms:async()=>{await b("Pick SMS method",()=>t.pickSms({}))},handleTryAnotherMethod:async()=>{await b("Try another MFA method",()=>t.tryAnotherMethod({}))},texts:n||{},data:s,links:i,locales:H}};function K(){const{texts:t,data:a,handleResendCode:n,handleGetACall:s,handleTryAnotherMethod:i,locales:r}=p(),{remaining:d,disabled:l}=G({timeoutSeconds:30}),m=t?.resendText||r.footer.resend.text,h=t?.resendActionText||r.footer.resend.linkText,x=t?.resendVoiceActionText||r.footer.resend.getCall,u=t?.resendVoiceActionSeparatorTextBefore||r.footer.resend.separator,c=t?.pickAuthenticatorText||r.footer.tryAnother,f=async()=>{await n()},y=async()=>{await s()},T=async()=>{await i()};return e.jsxs("div",{className:"text-center mt-4",children:[e.jsxs("div",{className:"mb-2",children:[e.jsxs("span",{className:"text-(length:--ul-theme-font-body-text-size) font-body",children:[m," "]}),e.jsx(g,{onClick:f,variant:"link",size:"link",disabled:l,children:l?`${h} in ${d}s`:h}),a?.showLinkVoice&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-(length:--ul-theme-font-body-text-size) font-body",children:[" ",u," "]}),e.jsx(g,{onClick:y,variant:"link",size:"link",children:x})]})]}),e.jsx("div",{children:e.jsx(g,{onClick:T,variant:"link",size:"link",children:c})})]})}function O(){const{texts:t,data:a,locales:n}=p(),s=t?.logoAltText||n.header.logoAlt,i=t?.title||n.header.title,r=a?.phoneNumber||"",d=t?.description||n.header.description;return e.jsxs(e.Fragment,{children:[e.jsx(v,{altText:s}),e.jsx(M,{children:i}),e.jsxs(N,{className:"mb-6",children:[d," ",r]})]})}function W(){const{handleContinueMfaSmsChallenge:t,data:a,texts:n,locales:s}=p(),{errors:i,hasError:r,dismiss:d}=I(),l=q({defaultValues:{code:"",rememberDevice:!1}}),{formState:{isSubmitting:m}}=l,h=n?.buttonText||s.form.button,x=n?.placeholder||s.form.fields.code.label,u=n?.rememberMeText||s.form.rememberDevice,c=i.byField("code")[0]?.message,f=i.byType("auth0").filter(o=>!o.field),y=a?.phoneNumber||s.form.fields.phoneNumber.fallback,T=s.form.fields.phoneNumber.label,A=async o=>{await t(o.code,o.rememberDevice)};return e.jsx(F,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(A),children:[r&&f.length>0&&e.jsx("div",{className:"space-y-3 mb-4",children:f.map(o=>e.jsx(L,{variant:"destructive",onDismiss:()=>d(o.id),children:e.jsx(w,{children:o.message})},o.id))}),e.jsx(j,{name:"phoneNumber",label:T,value:y,disabled:!0}),e.jsx(S,{control:l.control,name:"code",rules:{required:s.form.fields.code.required},render:({field:o,fieldState:C})=>e.jsxs(k,{children:[e.jsx(j,{...o,label:`${x}*`,type:"text",inputMode:"numeric",placeholder:"",autoComplete:"one-time-code",autoFocus:!0,error:!!C.error||!!c}),e.jsx(D,{sdkError:c,hasFormError:!!C.error})]})}),a?.showRememberDevice&&e.jsx(S,{control:l.control,name:"rememberDevice",render:({field:o})=>e.jsx(k,{children:e.jsxs("div",{className:"flex items-center space-x-2 my-4",children:[e.jsx(U,{id:"rememberDevice",checked:o.value,onCheckedChange:o.onChange}),e.jsx(R,{htmlFor:"rememberDevice",className:"text-(length:--ul-theme-font-body-text-size) cursor-pointer",children:u})]})})}),e.jsx(g,{type:"submit",variant:"primary",className:"w-full",disabled:m,children:m?s.form.buttonSubmitting:h})]})})}function ee(){const{mfaSmsChallenge:t,texts:a,locales:n}=p();return X(t),document.title=a?.pageTitle||n.page.title,e.jsx(E,{className:"theme-universal",children:e.jsxs(P,{className:"w-full max-w-[400px] gap-0",children:[e.jsx(O,{}),e.jsx(W,{}),e.jsx(K,{})]})})}export{ee as default};
//# sourceMappingURL=index.DUjExl84.js.map
