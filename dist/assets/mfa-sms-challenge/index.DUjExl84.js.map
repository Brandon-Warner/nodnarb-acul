{"version":3,"file":"index.DUjExl84.js","sources":["../../../src/screens/mfa-sms-challenge/hooks/useMfaSmsChallengeManager.ts","../../../src/screens/mfa-sms-challenge/components/Footer.tsx","../../../src/screens/mfa-sms-challenge/components/Header.tsx","../../../src/screens/mfa-sms-challenge/components/MfaSmsChallengeForm.tsx","../../../src/screens/mfa-sms-challenge/index.tsx"],"sourcesContent":["import {\n  useMfaSmsChallenge,\n  useScreen,\n} from \"@auth0/auth0-acul-react/mfa-sms-challenge\";\nimport type {\n  MfaSmsChallengeMembers,\n  MfaSmsChallengeOptions,\n  ScreenMembersOnMfaSmsChallenge,\n} from \"@auth0/auth0-acul-react/types\";\n\nimport { executeSafely } from \"@/utils/helpers/executeSafely\";\n\nimport locales from \"../locales/en.json\";\n\nexport const useMfaSmsChallengeManager = () => {\n  const mfaSmsChallenge: MfaSmsChallengeMembers = useMfaSmsChallenge();\n  const screen: ScreenMembersOnMfaSmsChallenge = useScreen();\n\n  const { texts, data, links } = screen;\n\n  const handleContinueMfaSmsChallenge = async (\n    code: string,\n    rememberDevice: boolean = false\n  ): Promise<void> => {\n    const options: MfaSmsChallengeOptions = {\n      code: code?.trim() || \"\",\n      rememberDevice,\n    };\n\n    await executeSafely(\n      `Continue MFA SMS Challenge with options: ${JSON.stringify(options)}`,\n      () => mfaSmsChallenge.continueMfaSmsChallenge(options)\n    );\n  };\n\n  const handleResendCode = async (): Promise<void> => {\n    await executeSafely(\"Resend MFA SMS code\", () =>\n      mfaSmsChallenge.resendCode({})\n    );\n  };\n\n  const handleGetACall = async (): Promise<void> => {\n    await executeSafely(\"Request MFA call\", () => mfaSmsChallenge.getACall({}));\n  };\n\n  const handlePickSms = async (): Promise<void> => {\n    await executeSafely(\"Pick SMS method\", () => mfaSmsChallenge.pickSms({}));\n  };\n\n  const handleTryAnotherMethod = async (): Promise<void> => {\n    await executeSafely(\"Try another MFA method\", () =>\n      mfaSmsChallenge.tryAnotherMethod({})\n    );\n  };\n\n  return {\n    mfaSmsChallenge,\n    handleContinueMfaSmsChallenge,\n    handleResendCode,\n    handleGetACall,\n    handlePickSms,\n    handleTryAnotherMethod,\n    texts: (texts || {}) as ScreenMembersOnMfaSmsChallenge[\"texts\"],\n    data,\n    links,\n    locales,\n  };\n};\n","import { useResend } from \"@auth0/auth0-acul-react/mfa-sms-challenge\";\n\nimport { ULThemeButton } from \"@/components/ULThemeButton\";\n\nimport { useMfaSmsChallengeManager } from \"../hooks/useMfaSmsChallengeManager\";\n\nfunction Footer() {\n  const {\n    texts,\n    data,\n    handleResendCode,\n    handleGetACall,\n    handleTryAnotherMethod,\n    locales,\n  } = useMfaSmsChallengeManager();\n\n  // Use the resend hook for managing cooldown\n  const { remaining, disabled } = useResend({\n    timeoutSeconds: 30,\n  });\n\n  const resendText = texts?.resendText || locales.footer.resend.text;\n  const resendLinkText =\n    texts?.resendActionText || locales.footer.resend.linkText;\n  const getCallText =\n    texts?.resendVoiceActionText || locales.footer.resend.getCall;\n  const separatorText =\n    texts?.resendVoiceActionSeparatorTextBefore ||\n    locales.footer.resend.separator;\n  const tryAnotherMethodText =\n    texts?.pickAuthenticatorText || locales.footer.tryAnother;\n\n  const handleResendClick = async () => {\n    await handleResendCode();\n  };\n\n  const handleGetCallClick = async () => {\n    await handleGetACall();\n  };\n\n  const handleTryAnotherMethodClick = async () => {\n    await handleTryAnotherMethod();\n  };\n\n  return (\n    <div className=\"text-center mt-4\">\n      {/* Resend code link with optional get a call */}\n      <div className=\"mb-2\">\n        <span className=\"text-(length:--ul-theme-font-body-text-size) font-body\">\n          {resendText}{\" \"}\n        </span>\n        <ULThemeButton\n          onClick={handleResendClick}\n          variant=\"link\"\n          size=\"link\"\n          disabled={disabled}\n        >\n          {disabled ? `${resendLinkText} in ${remaining}s` : resendLinkText}\n        </ULThemeButton>\n        {data?.showLinkVoice && (\n          <>\n            <span className=\"text-(length:--ul-theme-font-body-text-size) font-body\">\n              {\" \"}\n              {separatorText}{\" \"}\n            </span>\n            <ULThemeButton\n              onClick={handleGetCallClick}\n              variant=\"link\"\n              size=\"link\"\n            >\n              {getCallText}\n            </ULThemeButton>\n          </>\n        )}\n      </div>\n\n      {/* Try another method link */}\n      <div>\n        <ULThemeButton\n          onClick={handleTryAnotherMethodClick}\n          variant=\"link\"\n          size=\"link\"\n        >\n          {tryAnotherMethodText}\n        </ULThemeButton>\n      </div>\n    </div>\n  );\n}\n\nexport default Footer;\n","import ULThemeLogo from \"@/components/ULThemeLogo\";\nimport ULThemeSubtitle from \"@/components/ULThemeSubtitle\";\nimport ULThemeTitle from \"@/components/ULThemeTitle\";\n\nimport { useMfaSmsChallengeManager } from \"../hooks/useMfaSmsChallengeManager\";\n\nfunction Header() {\n  const { texts, data, locales } = useMfaSmsChallengeManager();\n\n  // Handle text fallbacks in component\n  const logoAltText = texts?.logoAltText || locales.header.logoAlt;\n  const title = texts?.title || locales.header.title;\n  const phoneNumber = data?.phoneNumber || \"\";\n  const description = texts?.description || locales.header.description;\n\n  return (\n    <>\n      <ULThemeLogo altText={logoAltText}></ULThemeLogo>\n      <ULThemeTitle>{title}</ULThemeTitle>\n      <ULThemeSubtitle className=\"mb-6\">\n        {description} {phoneNumber}\n      </ULThemeSubtitle>\n    </>\n  );\n}\n\nexport default Header;\n","import { useForm } from \"react-hook-form\";\n\nimport { useErrors } from \"@auth0/auth0-acul-react/mfa-sms-challenge\";\nimport type {\n  ErrorItem,\n  MfaSmsChallengeOptions,\n} from \"@auth0/auth0-acul-react/types\";\n\nimport {\n  ULThemeFloatingLabelField,\n  ULThemeFormMessage,\n} from \"@/components/form\";\nimport { Form, FormField, FormItem } from \"@/components/ui/form\";\nimport { Label } from \"@/components/ui/label\";\nimport { ULThemeButton } from \"@/components/ULThemeButton\";\nimport { ULThemeCheckbox } from \"@/components/ULThemeCheckbox\";\nimport { ULThemeAlert, ULThemeAlertTitle } from \"@/components/ULThemeError\";\n\nimport { useMfaSmsChallengeManager } from \"../hooks/useMfaSmsChallengeManager\";\n\nfunction MfaSmsChallengeForm() {\n  const { handleContinueMfaSmsChallenge, data, texts, locales } =\n    useMfaSmsChallengeManager();\n\n  const { errors, hasError, dismiss } = useErrors();\n\n  // Initialize the form using react-hook-form\n  const form = useForm<MfaSmsChallengeOptions>({\n    defaultValues: {\n      code: \"\",\n      rememberDevice: false,\n    },\n  });\n\n  const {\n    formState: { isSubmitting },\n  } = form;\n\n  const buttonText = texts?.buttonText || locales.form.button;\n  const codeLabelText = texts?.placeholder || locales.form.fields.code.label;\n  const rememberDeviceText =\n    texts?.rememberMeText || locales.form.rememberDevice;\n\n  // Get field-specific errors using SDK's errors helper\n  const codeSDKError = errors.byField(\"code\")[0]?.message;\n\n  // Get general errors (errors without a specific field)\n  const generalErrors: ErrorItem[] = errors\n    .byType(\"auth0\")\n    .filter((err) => !err.field);\n\n  const maskedPhoneNumber =\n    data?.phoneNumber || locales.form.fields.phoneNumber.fallback;\n  const phoneNumberLabel = locales.form.fields.phoneNumber.label;\n\n  const onSubmit = async (formData: MfaSmsChallengeOptions) => {\n    await handleContinueMfaSmsChallenge(formData.code, formData.rememberDevice);\n  };\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(onSubmit)}>\n        {/* General error messages */}\n        {hasError && generalErrors.length > 0 && (\n          <div className=\"space-y-3 mb-4\">\n            {generalErrors.map((error: ErrorItem) => (\n              <ULThemeAlert\n                key={error.id}\n                variant=\"destructive\"\n                onDismiss={() => dismiss(error.id)}\n              >\n                <ULThemeAlertTitle>{error.message}</ULThemeAlertTitle>\n              </ULThemeAlert>\n            ))}\n          </div>\n        )}\n\n        {/* Disabled phone number display */}\n        <ULThemeFloatingLabelField\n          name=\"phoneNumber\"\n          label={phoneNumberLabel}\n          value={maskedPhoneNumber}\n          disabled\n        />\n\n        {/* SMS Code input field */}\n        <FormField\n          control={form.control}\n          name=\"code\"\n          rules={{\n            required: locales.form.fields.code.required,\n          }}\n          render={({ field, fieldState }) => (\n            <FormItem>\n              <ULThemeFloatingLabelField\n                {...field}\n                label={`${codeLabelText}*`}\n                type=\"text\"\n                inputMode=\"numeric\"\n                placeholder=\"\"\n                autoComplete=\"one-time-code\"\n                autoFocus\n                error={!!fieldState.error || !!codeSDKError}\n              />\n              <ULThemeFormMessage\n                sdkError={codeSDKError}\n                hasFormError={!!fieldState.error}\n              />\n            </FormItem>\n          )}\n        />\n\n        {/* Remember device checkbox */}\n        {data?.showRememberDevice && (\n          <FormField\n            control={form.control}\n            name=\"rememberDevice\"\n            render={({ field }) => (\n              <FormItem>\n                <div className=\"flex items-center space-x-2 my-4\">\n                  <ULThemeCheckbox\n                    id=\"rememberDevice\"\n                    checked={field.value}\n                    onCheckedChange={field.onChange}\n                  />\n                  <Label\n                    htmlFor=\"rememberDevice\"\n                    className=\"text-(length:--ul-theme-font-body-text-size) cursor-pointer\"\n                  >\n                    {rememberDeviceText}\n                  </Label>\n                </div>\n              </FormItem>\n            )}\n          />\n        )}\n\n        {/* Submit button */}\n        <ULThemeButton\n          type=\"submit\"\n          variant=\"primary\"\n          className=\"w-full\"\n          disabled={isSubmitting}\n        >\n          {isSubmitting ? locales.form.buttonSubmitting : buttonText}\n        </ULThemeButton>\n      </form>\n    </Form>\n  );\n}\n\nexport default MfaSmsChallengeForm;\n","import ULThemeCard from \"@/components/ULThemeCard\";\nimport ULThemePageLayout from \"@/components/ULThemePageLayout\";\nimport { applyAuth0Theme } from \"@/utils/theme/themeEngine\";\n\nimport Footer from \"./components/Footer\";\nimport Header from \"./components/Header\";\nimport MfaSmsChallengeForm from \"./components/MfaSmsChallengeForm\";\nimport { useMfaSmsChallengeManager } from \"./hooks/useMfaSmsChallengeManager\";\n\nfunction MfaSmsChallengeScreen() {\n  // Extracting attributes from hook made out of MfaSmsChallenge instance of Auth0 React ACUL SDK\n  const { mfaSmsChallenge, texts, locales } = useMfaSmsChallengeManager();\n\n  applyAuth0Theme(mfaSmsChallenge);\n  document.title = texts?.pageTitle || locales.page.title;\n\n  return (\n    <ULThemePageLayout className=\"theme-universal\">\n      <ULThemeCard className=\"w-full max-w-[400px] gap-0\">\n        <Header />\n        <MfaSmsChallengeForm />\n        <Footer />\n      </ULThemeCard>\n    </ULThemePageLayout>\n  );\n}\n\nexport default MfaSmsChallengeScreen;\n"],"names":["useMfaSmsChallengeManager","mfaSmsChallenge","useMfaSmsChallenge","screen","useScreen","texts","data","links","code","rememberDevice","options","executeSafely","locales","Footer","handleResendCode","handleGetACall","handleTryAnotherMethod","remaining","disabled","useResend","resendText","resendLinkText","getCallText","separatorText","tryAnotherMethodText","handleResendClick","handleGetCallClick","handleTryAnotherMethodClick","jsxs","jsx","ULThemeButton","Fragment","Header","logoAltText","title","phoneNumber","description","ULThemeLogo","ULThemeTitle","ULThemeSubtitle","MfaSmsChallengeForm","handleContinueMfaSmsChallenge","errors","hasError","dismiss","useErrors","form","useForm","isSubmitting","buttonText","codeLabelText","rememberDeviceText","codeSDKError","generalErrors","err","maskedPhoneNumber","phoneNumberLabel","onSubmit","formData","Form","error","ULThemeAlert","ULThemeAlertTitle","ULThemeFloatingLabelField","FormField","field","fieldState","FormItem","ULThemeFormMessage","ULThemeCheckbox","Label","MfaSmsChallengeScreen","applyAuth0Theme","ULThemePageLayout","ULThemeCard"],"mappings":"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"}