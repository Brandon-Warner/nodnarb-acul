import{j as e}from"../shared/react-vendor.C9XDpjI-.js";import{e as j,g as y,t as I,h as q,i as D,j as H,u as B,F as K,U as M,a as V,b as C,c as A,d as P,p as _,f as S,C as $,k as z,l as J,m as G}from"../shared/common.lOgDNxwW.js";import{a0 as W,a1 as Y,a2 as Q,I as X,G as Z,D as ee}from"../shared/vendor.CuJT1XvO.js";const te={title:"Enter your phone code to log in"},se={title:"Verify Your Identity",description:"We've sent a text message to:",logoAltText:"Application Logo"},oe={resendActionText:"Didn't receive a code?",resendActionLinkText:"Resend",resendCooldown:"Resend in {{seconds}}s"},re={selectCountryPlaceholder:"Select Country",captchaLabel:"CAPTCHA*",editIdentifierLinkText:"Edit phone number",editText:"Edit",continueButtonText:"Continue",codeLabelText:"Enter the 6-digit code"},ne={errorOccurred:"An error occurred",codeIsRequired:"Please fill out this field.",captchaCompletionRequired:"Please complete the CAPTCHA",captchaTooLong:"CAPTCHA too long"},ae={page:te,heading:se,footer:oe,form:re,errors:ne},x=()=>{const s=W(),t=Y(),o=Q(),{texts:c,captcha:i,data:l,links:d}=s,n=async a=>{const m={username:a?.username?.trim()||"",code:a?.code?.trim()||""};s.isCaptchaAvailable&&a?.captcha?.trim()&&(m.captcha=a?.captcha.trim()),j(`Perform Submit OTP operation with options: ${JSON.stringify(m)}`,()=>o.submitOTP(m))},p=async a=>{j(`Perform Resent OTP operation with Custom options: ${JSON.stringify(a)}`,()=>o.resendOTP(a))};return{data:l,links:d,locales:ae,captcha:i,loginPasswordlessSmsOtp:o,isCaptchaAvailable:s.isCaptchaAvailable===!0,errors:t.errors||[],texts:c||{},handleSubmitOTP:n,handleResendOTP:p}};function ce(){const{texts:s,locales:t,handleResendOTP:o}=x(),c=s?.resendText||t.footer.resendActionText,i=s?.resendActionText||t.footer.resendActionLinkText,{remaining:l,disabled:d}=X({timeoutSeconds:30}),n=async()=>{await o()};return e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("span",{className:"pr-1 text-body-text text-(length:--ul-theme-font-body-text-size) font-body",children:c}),e.jsx(y,{variant:"link",size:"link",disabled:d,onClick:n,children:d?I("footer.resendCooldown",{seconds:String(l)},t):i})]})}function ie(){const{texts:s,locales:t}=x(),o=s?.title||t.heading.title,c=s?.description||t.heading.description,i=s?.logoAltText||t.heading.logoAltText;return e.jsxs(e.Fragment,{children:[e.jsx(q,{altText:i}),e.jsx(D,{children:o}),e.jsx(H,{className:"mb-6",children:c})]})}function le(){const{texts:s,locales:t,data:o,links:c,captcha:i,isCaptchaAvailable:l,handleSubmitOTP:d}=x(),n=Z({defaultValues:{username:o?.phone_number||"",code:"",captcha:""}}),{formState:{isSubmitting:p}}=n,a=s?.buttonText||t.form.continueButtonText,m=s?.placeholder||t.form.codeLabelText,F=s?.captchaCodePlaceholder?`${s.captchaCodePlaceholder}*`:t.form.captchaLabel,k=s?.editText||t.form.editText,O=s?.editLinkScreenReadableText||t.form.editIdentifierLinkText,v=t.errors.codeIsRequired,{captchaConfig:T,captchaProps:E,captchaValue:g}=B(i||void 0,F),{errors:u,hasError:w,dismiss:R}=ee(),b=u.byField("username")[0]?.message,f=u.byField("code")[0]?.message,U=u.byField("captcha")[0]?.message,L=u.byType("auth0").filter(r=>!r.field),N=async r=>{await d({username:r.username||"",code:r.code,captcha:l&&g?g:void 0})};return e.jsx(K,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(N),children:[w&&L.length>0&&e.jsx("div",{className:"space-y-3 mb-4",children:L.map(r=>e.jsx(M,{variant:"destructive",onDismiss:()=>R(r.id),children:e.jsx(V,{children:r.message||t.errors.errorOccurred})},r.id))}),e.jsx(C,{control:n.control,name:"username",render:({field:r,fieldState:h})=>e.jsxs(A,{children:[e.jsx(P,{...r,label:"",value:o?.phone_number||"",error:!!h.error||!!b,readOnly:!0,endAdornment:e.jsx(_,{href:c?.edit_identifier,"aria-label":O,children:k}),className:"pr-4"}),e.jsx(S,{sdkError:b,hasFormError:!!h.error})]})}),e.jsx(C,{control:n.control,name:"code",rules:{required:v},render:({field:r,fieldState:h})=>e.jsxs(A,{children:[e.jsx(P,{...r,label:m,autoFocus:!0,error:!!h.error||!!f}),e.jsx(S,{sdkError:f,hasFormError:!!h.error})]})}),l&&T&&e.jsx($,{control:n.control,name:"captcha",captcha:T,...E,className:"mt-4",sdkError:U,rules:{required:t.errors.captchaCompletionRequired,maxLength:{value:15,message:t.errors.captchaTooLong}}}),e.jsx(y,{type:"submit",className:"w-full mt-4",disabled:p,children:a})]})})}function ue(){const{texts:s,locales:t,loginPasswordlessSmsOtp:o}=x();return z(o),document.title=s?.pageTitle||t.page.title,e.jsx(J,{className:"theme-universal",children:e.jsxs(G,{className:"w-full max-w-[400px] gap-0",children:[e.jsx(ie,{}),e.jsx(le,{}),e.jsx(ce,{})]})})}export{ue as default};
//# sourceMappingURL=index.BM1E0Lmz.js.map
