{"version":3,"file":"index.BM1E0Lmz.js","sources":["../../../src/screens/login-passwordless-sms-otp/hooks/useLoginPasswordlessSmsOtpManager.ts","../../../src/screens/login-passwordless-sms-otp/components/Footer.tsx","../../../src/screens/login-passwordless-sms-otp/components/Header.tsx","../../../src/screens/login-passwordless-sms-otp/components/IdentifierForm.tsx","../../../src/screens/login-passwordless-sms-otp/index.tsx"],"sourcesContent":["import {\n  useLoginPasswordlessSmsOtp,\n  useScreen,\n  useTransaction,\n} from \"@auth0/auth0-acul-react/login-passwordless-sms-otp\";\nimport {\n  CustomOptions,\n  LoginPasswordlessSmsOtpMembers,\n  ScreenMembersOnLoginPasswordlessSmsOtp,\n  SubmitOTPOptions,\n  TransactionMembersOnLoginPasswordlessSmsOtp,\n} from \"@auth0/auth0-acul-react/types\";\n\nimport locales from \"@/screens/login-passwordless-sms-otp/locales/en.json\";\nimport { executeSafely } from \"@/utils/helpers/executeSafely\";\n\n/**\n * Handles the login process using a username or phone number and a One time password.\n * Optionally includes a CAPTCHA value if required.\n *\n * @param captcha - (Optional) The CAPTCHA value if required.\n * @param code - One time password (OTP) sent to the user's phone.\n * @param username - Username or phone number of the user.\n * @returns A promise that resolves when the login process is complete.\n */\nexport const useLoginPasswordlessSmsOtpManager = () => {\n  const screen: ScreenMembersOnLoginPasswordlessSmsOtp = useScreen();\n  const transaction: TransactionMembersOnLoginPasswordlessSmsOtp =\n    useTransaction();\n  const loginPasswordlessSmsOtp: LoginPasswordlessSmsOtpMembers =\n    useLoginPasswordlessSmsOtp();\n\n  const { texts, captcha, data, links } = screen;\n\n  const handleSubmitOTP = async (payload: SubmitOTPOptions): Promise<void> => {\n    const options: { username: string; code: string; captcha?: string } = {\n      username: payload?.username?.trim() || \"\",\n      code: payload?.code?.trim() || \"\",\n    };\n    if (screen.isCaptchaAvailable && payload?.captcha?.trim()) {\n      options.captcha = payload?.captcha.trim();\n    }\n    executeSafely(\n      `Perform Submit OTP operation with options: ${JSON.stringify(options)}`,\n      () => loginPasswordlessSmsOtp.submitOTP(options)\n    );\n  };\n\n  const handleResendOTP = async (payload?: CustomOptions): Promise<void> => {\n    executeSafely(\n      `Perform Resent OTP operation with Custom options: ${JSON.stringify(payload)}`,\n      () => loginPasswordlessSmsOtp.resendOTP(payload)\n    );\n  };\n\n  return {\n    data,\n    links,\n    locales,\n    captcha,\n    loginPasswordlessSmsOtp,\n    isCaptchaAvailable: screen.isCaptchaAvailable === true,\n    errors: transaction.errors || [],\n    texts: (texts || {}) as ScreenMembersOnLoginPasswordlessSmsOtp[\"texts\"],\n    handleSubmitOTP,\n    handleResendOTP,\n  };\n};\n","import { useResend } from \"@auth0/auth0-acul-react/login-passwordless-sms-otp\";\n\nimport { ULThemeButton } from \"@/components/ULThemeButton\";\nimport { translate } from \"@/utils/helpers/localeTranslate\";\n\nimport { useLoginPasswordlessSmsOtpManager } from \"../hooks/useLoginPasswordlessSmsOtpManager\";\n\nfunction Footer() {\n  const { texts, locales, handleResendOTP } =\n    useLoginPasswordlessSmsOtpManager();\n\n  // Use locales as fallback for SDK texts\n  const resendText = texts?.resendText || locales.footer.resendActionText;\n  const resendLinkText =\n    texts?.resendActionText || locales.footer.resendActionLinkText;\n\n  const { remaining, disabled } = useResend({\n    timeoutSeconds: 30,\n  });\n\n  const handleResendClick = async () => {\n    await handleResendOTP();\n  };\n\n  return (\n    <div className=\"mt-4 text-center\">\n      <span className=\"pr-1 text-body-text text-(length:--ul-theme-font-body-text-size) font-body\">\n        {resendText}\n      </span>\n      <ULThemeButton\n        variant=\"link\"\n        size=\"link\"\n        disabled={disabled}\n        onClick={handleResendClick}\n      >\n        {disabled\n          ? translate(\n              \"footer.resendCooldown\",\n              { seconds: String(remaining) },\n              locales\n            )\n          : resendLinkText}\n      </ULThemeButton>\n    </div>\n  );\n}\n\nexport default Footer;\n","import ULThemeLogo from \"@/components/ULThemeLogo\";\nimport ULThemeSubtitle from \"@/components/ULThemeSubtitle\";\nimport ULThemeTitle from \"@/components/ULThemeTitle\";\n\nimport { useLoginPasswordlessSmsOtpManager } from \"../hooks/useLoginPasswordlessSmsOtpManager\";\n\nfunction Header() {\n  const { texts, locales } = useLoginPasswordlessSmsOtpManager();\n\n  // Use locales as fallback for SDK texts\n  const titleText = texts?.title || locales.heading.title;\n  const descriptionText = texts?.description || locales.heading.description;\n  const logoAltText = texts?.logoAltText || locales.heading.logoAltText;\n\n  return (\n    <>\n      <ULThemeLogo altText={logoAltText}></ULThemeLogo>\n      <ULThemeTitle>{titleText}</ULThemeTitle>\n      <ULThemeSubtitle className=\"mb-6\">{descriptionText}</ULThemeSubtitle>\n    </>\n  );\n}\n\nexport default Header;\n","import { useForm } from \"react-hook-form\";\n\nimport { useErrors } from \"@auth0/auth0-acul-react/login-passwordless-sms-otp\";\nimport type {\n  ErrorItem,\n  SubmitOTPOptions,\n} from \"@auth0/auth0-acul-react/types\";\n\nimport Captcha from \"@/components/Captcha/index\";\nimport {\n  ULThemeFloatingLabelField,\n  ULThemeFormMessage,\n} from \"@/components/form\";\nimport { Form, FormField, FormItem } from \"@/components/ui/form\";\nimport { ULThemeButton } from \"@/components/ULThemeButton\";\nimport { ULThemeAlert, ULThemeAlertTitle } from \"@/components/ULThemeError\";\nimport ULThemeLink from \"@/components/ULThemeLink\";\nimport { useCaptcha } from \"@/hooks/useCaptcha\";\n\nimport { useLoginPasswordlessSmsOtpManager } from \"../hooks/useLoginPasswordlessSmsOtpManager\";\n\n/**\n * IdentifierForm Component\n *\n * This component renders the login form for the LoginPassword screen.\n * It includes fields for username(phonenumber), password, and CAPTCHA (if required),\n * along with error handling and support for editing identifiers.\n */\nfunction IdentifierForm() {\n  // Extract necessary methods and properties from the custom hook\n  const {\n    texts,\n    locales,\n    data,\n    links,\n    captcha,\n    isCaptchaAvailable,\n    handleSubmitOTP,\n  } = useLoginPasswordlessSmsOtpManager();\n\n  // Initialize the form using react-hook-form\n  const form = useForm<SubmitOTPOptions>({\n    defaultValues: {\n      username: data?.phone_number || \"\",\n      code: \"\",\n      captcha: \"\",\n    },\n  });\n\n  const {\n    formState: { isSubmitting },\n  } = form;\n\n  // Use locales as fallback to SDK texts\n  const buttonText = texts?.buttonText || locales.form.continueButtonText;\n  const codeLabelText = texts?.placeholder || locales.form.codeLabelText;\n  const captchaLabel = texts?.captchaCodePlaceholder\n    ? `${texts.captchaCodePlaceholder}*`\n    : locales.form.captchaLabel;\n  const editText = texts?.editText || locales.form.editText;\n  const editAriaLabel =\n    texts?.editLinkScreenReadableText || locales.form.editIdentifierLinkText;\n  const codeRequiredErrorMessage = locales.errors.codeIsRequired;\n\n  const { captchaConfig, captchaProps, captchaValue } = useCaptcha(\n    captcha || undefined,\n    captchaLabel\n  );\n\n  const { errors, hasError, dismiss } = useErrors();\n\n  // Get field-specific SDK errors\n  const phoneSDKError = errors.byField(\"username\")[0]?.message;\n  const codeSDKError = errors.byField(\"code\")[0]?.message;\n  const captchaSDKError = errors.byField(\"captcha\")[0]?.message;\n\n  // Get general errors (not field-specific)\n  const generalErrors: ErrorItem[] = errors\n    .byType(\"auth0\")\n    .filter((err) => !err.field);\n\n  /**\n   * Handles form submission.\n   *\n   * @param data - The form data containing username(phonenumber), password, and optional CAPTCHA.\n   */\n  const onSubmit = async (data: SubmitOTPOptions) => {\n    await handleSubmitOTP({\n      username: data.username || \"\",\n      code: data.code,\n      captcha: isCaptchaAvailable && captchaValue ? captchaValue : undefined,\n    });\n  };\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(onSubmit)}>\n        {/* General error messages */}\n        {hasError && generalErrors.length > 0 && (\n          <div className=\"space-y-3 mb-4\">\n            {generalErrors.map((error) => (\n              <ULThemeAlert\n                key={error.id}\n                variant=\"destructive\"\n                onDismiss={() => dismiss(error.id)}\n              >\n                <ULThemeAlertTitle>\n                  {error.message || locales.errors.errorOccurred}\n                </ULThemeAlertTitle>\n              </ULThemeAlert>\n            ))}\n          </div>\n        )}\n\n        {/* Prefilled Phonenumber(Username) input field */}\n        <FormField\n          control={form.control}\n          name=\"username\"\n          render={({ field, fieldState }) => (\n            <FormItem>\n              <ULThemeFloatingLabelField\n                {...field}\n                label=\"\"\n                value={data?.phone_number || \"\"}\n                error={!!fieldState.error || !!phoneSDKError}\n                readOnly={true}\n                endAdornment={\n                  <ULThemeLink\n                    href={links?.edit_identifier}\n                    aria-label={editAriaLabel}\n                  >\n                    {editText}\n                  </ULThemeLink>\n                }\n                className=\"pr-4\"\n              />\n              <ULThemeFormMessage\n                sdkError={phoneSDKError}\n                hasFormError={!!fieldState.error}\n              />\n            </FormItem>\n          )}\n        />\n\n        {/* SMS OTP input field */}\n        <FormField\n          control={form.control}\n          name=\"code\"\n          rules={{\n            required: codeRequiredErrorMessage,\n          }}\n          render={({ field, fieldState }) => (\n            <FormItem>\n              <ULThemeFloatingLabelField\n                {...field}\n                label={codeLabelText}\n                autoFocus={true}\n                error={!!fieldState.error || !!codeSDKError}\n              />\n              <ULThemeFormMessage\n                sdkError={codeSDKError}\n                hasFormError={!!fieldState.error}\n              />\n            </FormItem>\n          )}\n        />\n\n        {/* Captcha Field */}\n        {isCaptchaAvailable && captchaConfig && (\n          <Captcha\n            control={form.control}\n            name=\"captcha\"\n            captcha={captchaConfig}\n            {...captchaProps}\n            className=\"mt-4\"\n            sdkError={captchaSDKError}\n            rules={{\n              required: locales.errors.captchaCompletionRequired,\n              maxLength: {\n                value: 15,\n                message: locales.errors.captchaTooLong,\n              },\n            }}\n          />\n        )}\n\n        {/* Submit button */}\n        <ULThemeButton\n          type=\"submit\"\n          className=\"w-full mt-4\"\n          disabled={isSubmitting}\n        >\n          {buttonText}\n        </ULThemeButton>\n      </form>\n    </Form>\n  );\n}\n\nexport default IdentifierForm;\n","import ULThemeCard from \"@/components/ULThemeCard\";\nimport ULThemePageLayout from \"@/components/ULThemePageLayout\";\nimport { applyAuth0Theme } from \"@/utils/theme/themeEngine\";\n\nimport Footer from \"./components/Footer\";\nimport Header from \"./components/Header\";\nimport IdentifierForm from \"./components/IdentifierForm\";\nimport { useLoginPasswordlessSmsOtpManager } from \"./hooks/useLoginPasswordlessSmsOtpManager\";\n\nfunction LoginPasswordlessSmsOtpScreen() {\n  // Extracting attributes from hook made out of LoginPasswordInstance class of Auth0 React ACUL SDK\n  const { texts, locales, loginPasswordlessSmsOtp } =\n    useLoginPasswordlessSmsOtpManager();\n\n  // Apply theme from SDK instance when screen loads\n  applyAuth0Theme(loginPasswordlessSmsOtp);\n  document.title = texts?.pageTitle || locales.page.title;\n\n  return (\n    // Applying UDS theme overrides using the \"theme-universal\" class\n    <ULThemePageLayout className=\"theme-universal\">\n      <ULThemeCard className=\"w-full max-w-[400px] gap-0\">\n        <Header />\n        <IdentifierForm />\n        <Footer />\n      </ULThemeCard>\n    </ULThemePageLayout>\n  );\n}\n\nexport default LoginPasswordlessSmsOtpScreen;\n"],"names":["useLoginPasswordlessSmsOtpManager","screen","useScreen","transaction","useTransaction","loginPasswordlessSmsOtp","useLoginPasswordlessSmsOtp","texts","captcha","data","links","handleSubmitOTP","payload","options","executeSafely","handleResendOTP","locales","Footer","resendText","resendLinkText","remaining","disabled","useResend","handleResendClick","jsxs","jsx","ULThemeButton","translate","Header","titleText","descriptionText","logoAltText","Fragment","ULThemeLogo","ULThemeTitle","ULThemeSubtitle","IdentifierForm","isCaptchaAvailable","form","useForm","isSubmitting","buttonText","codeLabelText","captchaLabel","editText","editAriaLabel","codeRequiredErrorMessage","captchaConfig","captchaProps","captchaValue","useCaptcha","errors","hasError","dismiss","useErrors","phoneSDKError","codeSDKError","captchaSDKError","generalErrors","err","onSubmit","Form","error","ULThemeAlert","ULThemeAlertTitle","FormField","field","fieldState","FormItem","ULThemeFloatingLabelField","ULThemeLink","ULThemeFormMessage","Captcha","LoginPasswordlessSmsOtpScreen","applyAuth0Theme","ULThemePageLayout","ULThemeCard"],"mappings":"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"}