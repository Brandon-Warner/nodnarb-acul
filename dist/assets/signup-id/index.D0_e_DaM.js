import{j as e,r as k}from"../shared/react-vendor.C9XDpjI-.js";import{e as b,n as H,o as W,p as O,h as z,i as G,j as J,u as K,F as Q,U as X,a as Y,C as Z,g as _,v as R,s as ee,a8 as te,b as oe,c as ne,d as se,f as ae,a9 as re,k as ie,x as ce,l as le,m as de,y as v}from"../shared/common.lOgDNxwW.js";import{bo as ue,bp as me,bq as he,D as pe,G as xe,bm as fe,bn as ge}from"../shared/vendor.CuJT1XvO.js";const Ce={title:"Signup Identifier",separator:"OR"},be={logoAlt:"Application Logo",title:"Welcome",description:"Sign up to dev-tenant to continue to All applications."},je={fields:{captcha:{label:"CAPTCHA",imageAlt:"CAPTCHA challenge",required:"Please complete the CAPTCHA"},common:{required:"This field is required"},countryCode:{placeholder:"Select Country"}},button:"Continue"},Te={text:"Already have an account?",linkText:"Log in"},Se={continueWith:"Continue with"},Le={page:Ce,header:be,form:je,footer:Te,social:Se},f=()=>{const o=ue(),s=me(),a=he(),{alternateConnections:c}=a,{isCaptchaAvailable:n,texts:l,loginLink:r,captcha:d}=s;return{transaction:a,signupId:o,handleSignup:async i=>{const u={};i.email?.trim()&&(u.email=i.email.trim()),i.phone?.trim()&&(u.phone=i.phone.trim()),i.username?.trim()&&(u.username=i.username.trim()),s.isCaptchaAvailable&&i.captcha?.trim()&&(u.captcha=i.captcha.trim()),b(`Signup with options: ${JSON.stringify(u)}`,()=>o.signup(u))},handleFederatedSignup:async i=>{b(`Federated signup with connection: ${i.connection}`,()=>o.federatedSignup(i))},handlePickCountryCode:async()=>{b("Pick country code",()=>o.pickCountryCode())},texts:l,isCaptchaAvailable:n,loginLink:r,alternateConnections:c,captcha:d,locales:Le}},ye=()=>{const{alternateConnections:o,handleFederatedSignup:s,locales:a}=f(),c=n=>{const l={connection:n.name,...n.metadata||{}};s(l)};return!o||o.length===0?null:e.jsx("div",{className:"space-y-3 mt-2",children:o.map(n=>{if(!n?.name)return null;const{displayName:l,iconComponent:r}=H(n),d=`${a.social.continueWith} ${l}`;return e.jsx(W,{displayName:l,buttonText:d,iconComponent:r,onClick:()=>c(n)},n.name)})})};function Ae(){const{loginLink:o,texts:s,locales:a}=f();if(!o)return null;const c=s?.footerText||a.footer.text,n=s?.footerLinkText||a.footer.linkText;return e.jsxs("div",{className:"mt-4 text-left",children:[e.jsx("span",{className:"pr-1 text-body-text text-(length:--ul-theme-font-body-text-size) font-body",children:c}),o&&e.jsx(O,{href:o,children:n})]})}function Fe(){const{texts:o,locales:s}=f(),a=o?.logoAltText||s.header.logoAlt,c=o?.title||s.header.title,n=o?.description||s.header.description;return e.jsxs(e.Fragment,{children:[e.jsx(z,{altText:a}),e.jsx(G,{children:c}),e.jsx(J,{children:n})]})}function ke(){const{transaction:o,handleSignup:s,handlePickCountryCode:a,isCaptchaAvailable:c,texts:n,captcha:l,locales:r}=f(),{errors:d,hasError:p,dismiss:j}=pe(),h=xe({defaultValues:{email:"",username:"",phone:"",captcha:""},reValidateMode:"onBlur"}),{formState:{isSubmitting:i},watch:u}=h,U=u("username"),{isValid:P,errors:I}=fe(U||""),g=ge(),N=k.useMemo(()=>(g||[]).filter(t=>t.required).map(t=>t.type),[g]),w=k.useMemo(()=>(g||[]).filter(t=>!t.required).map(t=>t.type),[g]),q=n?.buttonText||r.form.button,E=n?.captchaCodePlaceholder?`${n.captchaCodePlaceholder}*`:`${r.form.fields.captcha.label}*`,{captchaConfig:T,captchaProps:V}=K(l||void 0,E),S=d.byType("auth0").filter(t=>!t.field),$=d.byField("captcha")[0]?.message,D=async t=>{await s(t)},L=(t,m)=>{const{label:x,type:C,autoComplete:M}=te(t,m,n),A=d.byField(t)[0]?.message;return e.jsx(oe,{control:h.control,name:t,rules:{required:m?r.form.fields.common.required:!1,...t==="username"&&{validate:re(P,I,m,r.form.fields.common.required)}},render:({field:B,fieldState:F})=>e.jsxs(ne,{children:[e.jsx(se,{...B,label:x,type:C,autoComplete:M,error:!!F.error||!!A}),e.jsx(ae,{sdkError:A,hasFormError:!!F.error})]})},t)},y=(t,m)=>t.map(x=>{if(x==="phone"){const C=R(o?.countryCode,o?.countryPrefix);return e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{selectedCountry:C,onClick:a,fullWidth:!0,placeholder:r.form.fields.countryCode.placeholder}),L(x,m)]},`${m?"required":"optional"}-phone-container`)}return L(x,m)});return e.jsx(Q,{...h,children:e.jsxs("form",{onSubmit:h.handleSubmit(D),children:[p&&S.length>0&&e.jsx("div",{className:"space-y-3 mb-4",children:S.map(t=>e.jsx(X,{variant:"destructive",onDismiss:()=>j(t.id),children:e.jsx(Y,{children:t.message})},t.id))}),y(N,!0),y(w,!1),c&&T&&e.jsx(Z,{control:h.control,name:"captcha",captcha:T,...V,sdkError:$,rules:{required:r.form.fields.captcha.required}}),e.jsx(_,{type:"submit",className:"w-full",disabled:i,children:q})]})})}function Ie(){const{signupId:o,texts:s,alternateConnections:a,locales:c}=f(),n=a&&a.length>0,l=s?.separatorText||c.page.separator;document.title=s?.pageTitle||c.page.title,ie(o);const r=ce("--ul-theme-widget-social-buttons-layout"),d=p=>e.jsxs(e.Fragment,{children:[p==="bottom"&&n&&e.jsx(v,{text:l}),e.jsx(ye,{}),p==="top"&&n&&e.jsx(v,{text:l})]});return e.jsx(le,{className:"theme-universal",children:e.jsxs(de,{className:"w-full max-w-[400px] gap-0",children:[e.jsx(Fe,{}),r==="top"&&d("top"),e.jsx(ke,{}),e.jsx(Ae,{}),r==="bottom"&&d("bottom")]})})}export{Ie as default};
//# sourceMappingURL=index.D0_e_DaM.js.map
