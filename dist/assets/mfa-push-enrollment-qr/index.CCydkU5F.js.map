{"version":3,"file":"index.CCydkU5F.js","sources":["../../../src/screens/mfa-push-enrollment-qr/hooks/useMfaPushEnrollmentQRManager.ts","../../../src/screens/mfa-push-enrollment-qr/components/Header.tsx","../../../src/screens/mfa-push-enrollment-qr/components/MfaPushEnrollmentQRForm.tsx","../../../src/screens/mfa-push-enrollment-qr/index.tsx"],"sourcesContent":["import {\n  useMfaPushEnrollmentQr,\n  useScreen,\n  useUser,\n} from \"@auth0/auth0-acul-react/mfa-push-enrollment-qr\";\nimport {\n  CustomOptions,\n  MfaPushEnrollmentQrMembers,\n  MfaPushEnrollmentQrWithRememberOptions,\n  ScreenMembersOnMfaPushEnrollmentQr,\n  UserMembers,\n} from \"@auth0/auth0-acul-react/types\";\n\nimport locales from \"@/screens/mfa-push-enrollment-qr/locales/en.json\";\nimport { executeSafely } from \"@/utils/helpers/executeSafely\";\n\nexport const useMfaPushEnrollmentQRManager = () => {\n  const screen: ScreenMembersOnMfaPushEnrollmentQr = useScreen();\n  const userInfo: UserMembers = useUser();\n  const mfaPushEnrollmentQR: MfaPushEnrollmentQrMembers =\n    useMfaPushEnrollmentQr();\n\n  const { texts, data } = screen;\n  const { enrolledFactors } = userInfo || {};\n\n  const handleContinueMfaPushEnrollmentQR = async (\n    payload?: MfaPushEnrollmentQrWithRememberOptions\n  ): Promise<void> => {\n    await executeSafely(\n      `Continue MFA Push Enrollment QR with options: ${JSON.stringify(payload)}`,\n      () => mfaPushEnrollmentQR.continue(payload)\n    );\n  };\n\n  const handlePickAuthenticator = async (\n    payload?: CustomOptions\n  ): Promise<void> => {\n    await executeSafely(\n      `Try Another Method on MFA Push Enrollment QR with options: ${JSON.stringify(payload)}`,\n      () => mfaPushEnrollmentQR.pickAuthenticator(payload)\n    );\n  };\n\n  return {\n    locales,\n    data,\n    enrolledFactors,\n    mfaPushEnrollmentQR,\n    handlePickAuthenticator,\n    handleContinueMfaPushEnrollmentQR,\n    texts: (texts || {}) as ScreenMembersOnMfaPushEnrollmentQr[\"texts\"],\n  };\n};\n","import ULThemeLogo from \"@/components/ULThemeLogo\";\nimport ULThemeSubtitle from \"@/components/ULThemeSubtitle\";\nimport ULThemeTitle from \"@/components/ULThemeTitle\";\n\nimport { useMfaPushEnrollmentQRManager } from \"../hooks/useMfaPushEnrollmentQRManager\";\n\nfunction Header() {\n  const { texts, locales } = useMfaPushEnrollmentQRManager();\n\n  // Use Locales as fallback to SDK texts\n  const titleText = texts?.title || locales.heading.title;\n  const descriptionText = texts?.description || locales.heading.description;\n  const logoAltText = texts?.logoAltText || locales.heading.logoAltText;\n\n  return (\n    <>\n      <ULThemeLogo altText={logoAltText}></ULThemeLogo>\n      <ULThemeTitle>{titleText}</ULThemeTitle>\n      <ULThemeSubtitle className=\"mb-8\">{descriptionText}</ULThemeSubtitle>\n    </>\n  );\n}\n\nexport default Header;\n","import { useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\n\nimport {\n  useErrors,\n  useMfaPolling,\n} from \"@auth0/auth0-acul-react/mfa-push-enrollment-qr\";\nimport { type CustomOptions, ErrorItem } from \"@auth0/auth0-acul-react/types\";\n\nimport { Form } from \"@/components/ui/form\";\nimport { ULThemeButton } from \"@/components/ULThemeButton\";\nimport { ULThemeAlert, ULThemeAlertTitle } from \"@/components/ULThemeError\";\n\nimport { useMfaPushEnrollmentQRManager } from \"../hooks/useMfaPushEnrollmentQRManager\";\n\nfunction MfaPushEnrollmentQRForm() {\n  const {\n    data,\n    texts,\n    locales,\n    enrolledFactors,\n    handlePickAuthenticator,\n    handleContinueMfaPushEnrollmentQR,\n  } = useMfaPushEnrollmentQRManager();\n\n  // Initialize the form using react-hook-form\n  const form = useForm<CustomOptions>({});\n  const { qrCode, qrUri, showCodeCopy } = data || {};\n\n  // Use Locales as fallback to SDK texts\n  const copyAsCodeLinkText =\n    texts?.copyCodeLinkText || locales.form.copyCodeLinkText;\n  const pickAuthenticatorText =\n    texts?.pickAuthenticatorText || locales.form.pickAuthenticatorText;\n  const shouldShowTryAnotherMethod = enrolledFactors?.length\n    ? enrolledFactors.length > 1\n    : false;\n\n  const { errors, hasError, dismiss } = useErrors();\n\n  // Get general errors (not field-specific)\n  const generalErrors: ErrorItem[] = errors\n    .byType(\"auth0\")\n    .filter((err) => !err.field);\n\n  // Automatically start polling when the page loads\n  const { startPolling, stopPolling } = useMfaPolling({\n    intervalMs: 3000,\n    onCompleted: () => {\n      handleContinueMfaPushEnrollmentQR();\n    },\n    onError: (error: unknown) =>\n      console.error(\"Push Enrollment Polling error:\", error),\n  });\n\n  const handleCopyAsCode = (event: React.MouseEvent) => {\n    event.preventDefault();\n    if (qrUri) {\n      navigator.clipboard.writeText(qrUri).then((err) => {\n        console.error(\"Could not copy text: \", err);\n      });\n    }\n  };\n\n  useEffect(() => {\n    startPolling();\n    return () => stopPolling();\n  }, [startPolling, stopPolling]);\n\n  return (\n    <Form {...form}>\n      <form>\n        {/* General error messages */}\n        {hasError && generalErrors.length > 0 && (\n          <div className=\"space-y-3 mb-4\">\n            {generalErrors.map((error: ErrorItem) => (\n              <ULThemeAlert\n                key={error.id}\n                variant=\"destructive\"\n                onDismiss={() => dismiss(error.id)}\n              >\n                <ULThemeAlertTitle>\n                  {error.message || locales.errors.errorOccurred}\n                </ULThemeAlertTitle>\n              </ULThemeAlert>\n            ))}\n          </div>\n        )}\n\n        <div className=\"text-center\">\n          {/* QR Code Image */}\n          <div className=\"flex justify-center\">\n            <img\n              src={qrCode}\n              className=\"border rounded-[3px] border-(--ul-theme-color-qrcode-border) w-41 h-41\"\n            />\n          </div>\n          {/* Copy QR As Code Button */}\n          {showCodeCopy && (\n            <ULThemeButton\n              variant=\"outline\"\n              className=\"w-full mt-4.5\"\n              onClick={(event) => handleCopyAsCode(event)}\n            >\n              {copyAsCodeLinkText}\n            </ULThemeButton>\n          )}\n        </div>\n      </form>\n      {/* Try another method link */}\n      {shouldShowTryAnotherMethod && (\n        <ULThemeButton\n          onClick={() => handlePickAuthenticator()}\n          variant=\"link\"\n          size=\"link\"\n          className=\"mt-4.5 text-center\"\n        >\n          {pickAuthenticatorText}\n        </ULThemeButton>\n      )}\n    </Form>\n  );\n}\n\nexport default MfaPushEnrollmentQRForm;\n","import ULThemeCard from \"@/components/ULThemeCard\";\nimport ULThemePageLayout from \"@/components/ULThemePageLayout\";\nimport { applyAuth0Theme } from \"@/utils/theme/themeEngine\";\n\nimport Header from \"./components/Header\";\nimport MfaPushEnrollmentQRForm from \"./components/MfaPushEnrollmentQRForm\";\nimport { useMfaPushEnrollmentQRManager } from \"./hooks/useMfaPushEnrollmentQRManager\";\n\nfunction MfaPushEnrollmentQRScreen() {\n  // Extracting attributes from hook made out of MfaPushEnrollmentQR instance of Auth0 React ACUL SDK\n  const { texts, locales, mfaPushEnrollmentQR } =\n    useMfaPushEnrollmentQRManager();\n\n  applyAuth0Theme(mfaPushEnrollmentQR);\n  document.title = texts?.pageTitle || locales.page.title;\n\n  return (\n    <ULThemePageLayout className=\"theme-universal\">\n      <ULThemeCard className=\"w-full max-w-[400px] gap-0\">\n        <Header />\n        <MfaPushEnrollmentQRForm />\n      </ULThemeCard>\n    </ULThemePageLayout>\n  );\n}\n\nexport default MfaPushEnrollmentQRScreen;\n"],"names":["useMfaPushEnrollmentQRManager","screen","useScreen","userInfo","useUser","mfaPushEnrollmentQR","useMfaPushEnrollmentQr","texts","data","enrolledFactors","locales","payload","executeSafely","Header","titleText","descriptionText","logoAltText","jsxs","Fragment","jsx","ULThemeLogo","ULThemeTitle","ULThemeSubtitle","MfaPushEnrollmentQRForm","handlePickAuthenticator","handleContinueMfaPushEnrollmentQR","form","useForm","qrCode","qrUri","showCodeCopy","copyAsCodeLinkText","pickAuthenticatorText","shouldShowTryAnotherMethod","errors","hasError","dismiss","useErrors","generalErrors","err","startPolling","stopPolling","useMfaPolling","error","handleCopyAsCode","event","useEffect","Form","ULThemeAlert","ULThemeAlertTitle","ULThemeButton","MfaPushEnrollmentQRScreen","applyAuth0Theme","ULThemePageLayout","ULThemeCard"],"mappings":"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"}