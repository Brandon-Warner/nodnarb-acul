import{j as e,r as L}from"../shared/react-vendor.C9XDpjI-.js";import{e as p,h as w,i as v,j as M,F as R,U as b,a as N,g as f,k as Q,l as U,m as F}from"../shared/common.lOgDNxwW.js";import{ax as S,ay as O,az as q,G as D,D as z,aw as G}from"../shared/vendor.CuJT1XvO.js";const J={title:"Scan the code to log in using a push notification | All Applications"},$={logoAltText:"Application Logo",title:"Secure Your Account",description:"Scan the QR Code below using the Guardian app on your mobile device."},B={copyCodeLinkText:"Copy as code",pickAuthenticatorText:"Try another method"},H={errorOccurred:"An error occurred"},I={page:J,heading:$,form:B,errors:H},c=()=>{const s=S(),n=O(),t=q(),{texts:a,data:l}=s,{enrolledFactors:i}=n||{};return{locales:I,data:l,enrolledFactors:i,mfaPushEnrollmentQR:t,handlePickAuthenticator:async r=>{await p(`Try Another Method on MFA Push Enrollment QR with options: ${JSON.stringify(r)}`,()=>t.pickAuthenticator(r))},handleContinueMfaPushEnrollmentQR:async r=>{await p(`Continue MFA Push Enrollment QR with options: ${JSON.stringify(r)}`,()=>t.continue(r))},texts:a||{}}};function Y(){const{texts:s,locales:n}=c(),t=s?.title||n.heading.title,a=s?.description||n.heading.description,l=s?.logoAltText||n.heading.logoAltText;return e.jsxs(e.Fragment,{children:[e.jsx(w,{altText:l}),e.jsx(v,{children:t}),e.jsx(M,{className:"mb-8",children:a})]})}function K(){const{data:s,texts:n,locales:t,enrolledFactors:a,handlePickAuthenticator:l,handleContinueMfaPushEnrollmentQR:i}=c(),h=D({}),{qrCode:d,qrUri:r,showCodeCopy:g}=s||{},T=n?.copyCodeLinkText||t.form.copyCodeLinkText,A=n?.pickAuthenticatorText||t.form.pickAuthenticatorText,j=a?.length?a.length>1:!1,{errors:y,hasError:C,dismiss:P}=z(),u=y.byType("auth0").filter(o=>!o.field),{startPolling:m,stopPolling:x}=G({intervalMs:3e3,onCompleted:()=>{i()},onError:o=>console.error("Push Enrollment Polling error:",o)}),k=o=>{o.preventDefault(),r&&navigator.clipboard.writeText(r).then(E=>{console.error("Could not copy text: ",E)})};return L.useEffect(()=>(m(),()=>x()),[m,x]),e.jsxs(R,{...h,children:[e.jsxs("form",{children:[C&&u.length>0&&e.jsx("div",{className:"space-y-3 mb-4",children:u.map(o=>e.jsx(b,{variant:"destructive",onDismiss:()=>P(o.id),children:e.jsx(N,{children:o.message||t.errors.errorOccurred})},o.id))}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:d,className:"border rounded-[3px] border-(--ul-theme-color-qrcode-border) w-41 h-41"})}),g&&e.jsx(f,{variant:"outline",className:"w-full mt-4.5",onClick:o=>k(o),children:T})]})]}),j&&e.jsx(f,{onClick:()=>l(),variant:"link",size:"link",className:"mt-4.5 text-center",children:A})]})}function Z(){const{texts:s,locales:n,mfaPushEnrollmentQR:t}=c();return Q(t),document.title=s?.pageTitle||n.page.title,e.jsx(U,{className:"theme-universal",children:e.jsxs(F,{className:"w-full max-w-[400px] gap-0",children:[e.jsx(Y,{}),e.jsx(K,{})]})})}export{Z as default};
//# sourceMappingURL=index.CCydkU5F.js.map
