{"version":3,"file":"index.C_p5F9dL.js","sources":["../../../src/screens/passkey-enrollment-local/hooks/usePasskeyEnrollmentLocalManager.ts","../../../src/screens/passkey-enrollment-local/components/Details.tsx","../../../src/screens/passkey-enrollment-local/components/Header.tsx","../../../src/screens/passkey-enrollment-local/index.tsx"],"sourcesContent":["import {\n  usePasskeyEnrollmentLocal,\n  useScreen,\n} from \"@auth0/auth0-acul-react/passkey-enrollment-local\";\nimport {\n  AbortEnrollmentOptions,\n  CustomOptions,\n  PasskeyEnrollmentLocalMembers,\n  ScreenMembersOnPasskeyEnrollmentLocal,\n} from \"@auth0/auth0-acul-react/types\";\n\nimport locales from \"@/screens/passkey-enrollment-local/locales/en.json\";\nimport { executeSafely } from \"@/utils/helpers/executeSafely\";\n\n/**\n * Handles the passkey enrollment local process.\n */\nexport const usePasskeyEnrollmentLocalManager = () => {\n  const screen: ScreenMembersOnPasskeyEnrollmentLocal = useScreen();\n  const passkeyEnrollmentLocalInstance: PasskeyEnrollmentLocalMembers =\n    usePasskeyEnrollmentLocal();\n\n  const { texts, data, links } = screen;\n\n  const continuePasskeyEnrollment = async (\n    payload?: CustomOptions\n  ): Promise<void> => {\n    executeSafely(\n      `Continue Passkey Enrollment Local: ${JSON.stringify(payload)}`,\n      () => passkeyEnrollmentLocalInstance.continuePasskeyEnrollment(payload)\n    );\n  };\n\n  const abortPasskeyEnrollment = async (\n    payload: AbortEnrollmentOptions\n  ): Promise<void> => {\n    executeSafely(\n      `Continue without Passkey Local Enrollment: ${JSON.stringify(payload)}`,\n      () => passkeyEnrollmentLocalInstance.abortPasskeyEnrollment(payload)\n    );\n  };\n\n  return {\n    locales,\n    links,\n    passkeyEnrollmentLocalInstance,\n    continuePasskeyEnrollment,\n    abortPasskeyEnrollment,\n    texts: (texts || {}) as ScreenMembersOnPasskeyEnrollmentLocal[\"texts\"],\n    data: (data || {}) as ScreenMembersOnPasskeyEnrollmentLocal[\"data\"],\n  };\n};\n","import { useForm } from \"react-hook-form\";\n\nimport { useErrors } from \"@auth0/auth0-acul-react/passkey-enrollment-local\";\nimport type {\n  AbortEnrollmentOptions,\n  CustomOptions,\n  ErrorItem,\n} from \"@auth0/auth0-acul-react/types\";\n\nimport {\n  LockHeavyAccent,\n  LockHeavyMask,\n  WebAuthPlatform,\n} from \"@/assets/icons\";\nimport { Form, FormField, FormItem } from \"@/components/ui/form\";\nimport { Label } from \"@/components/ui/label\";\nimport { ULThemeButton } from \"@/components/ULThemeButton\";\nimport { ULThemeCheckbox } from \"@/components/ULThemeCheckbox\";\nimport ULThemeAlert, { ULThemeAlertTitle } from \"@/components/ULThemeError\";\nimport {\n  ULThemeList,\n  ULThemeListDescription,\n  ULThemeListItem,\n  ULThemeListTitle,\n} from \"@/components/ULThemeList\";\nimport { cn } from \"@/lib/utils\";\nimport { extractTokenValue } from \"@/utils/helpers/tokenUtils\";\n\nimport { usePasskeyEnrollmentLocalManager } from \"../hooks/usePasskeyEnrollmentLocalManager\";\n\n/**\n * Passkeys Enrollment Local Benefits Details Component\n * This component renders the details about the benefits of using passkeys.\n */\nfunction Details() {\n  // Extract necessary methods and properties from the custom hook\n  const { texts, locales, continuePasskeyEnrollment, abortPasskeyEnrollment } =\n    usePasskeyEnrollmentLocalManager();\n\n  // Initialize the form using react-hook-form\n  const form = useForm<CustomOptions>({\n    defaultValues: {\n      doNotShowAgain: false, // Default value for the checkbox\n    },\n  });\n  const {\n    formState: { isSubmitting },\n  } = form;\n\n  // Use Locales as fallback to SDK texts\n  const buttonText =\n    texts?.createButtonText || locales.details.createPasskeyButtonText;\n  const continueButtonText =\n    texts?.continueButtonText ||\n    locales.details.continueWithoutPasskeyButtonText;\n  const showHideLocalEnrollmentCheckboxText =\n    texts?.checkboxText || locales.details.showHideLocalEnrollmentCheckboxText;\n  const passkeyBenefit1Title =\n    texts?.passkeyBenefit1Title || locales.details.passkeyBenefit1Title;\n  const passkeyBenefit1Description =\n    texts?.passkeyBenefit1Description ||\n    locales.details.passkeyBenefit1Description;\n  const passkeyBenefit2Title =\n    texts?.passkeyBenefit2Title || locales.details.passkeyBenefit2Title;\n  const passkeyBenefit2Description =\n    texts?.passkeyBenefit2Description ||\n    locales.details.passkeyBenefit2Description;\n\n  // Using extractTokenValue utility to extract the Icons Color Value from CSS variable\n  const iconColor = extractTokenValue(\"--ul-theme-color-icons\");\n\n  const { errors, hasError, dismiss } = useErrors();\n\n  // Get general errors (not field-specific)\n  const generalErrors: ErrorItem[] = errors\n    .byType(\"auth0\")\n    .filter((err) => !err.field);\n\n  /**\n   * This method handles form submission when user clicks on creating passkey.\n   *\n   * @param data - The form data containing user preferences\n   */\n  const onCreateClick = async (data: CustomOptions) => {\n    await continuePasskeyEnrollment(\n      data?.doNotShowAgain ? { doNotShowAgain: true } : {}\n    );\n  };\n\n  /**\n   * This method handles form submission when user clicks on canceling passkey enrollment.\n   *\n   * @param formData - The form data containing user preferences\n   */\n  const onCancelClick = async (formData: AbortEnrollmentOptions) => {\n    await abortPasskeyEnrollment(\n      formData?.doNotShowAgain ? { doNotShowAgain: true } : {}\n    );\n  };\n\n  /**\n   * Helper function to render icons dynamically with optional accent\n   *\n   * @param IconMask - The main icon component\n   * @param IconAccent - Optional accent icon component\n   * @param className - Additional class names for styling\n   */\n  const renderIcon = (\n    IconMask: React.ElementType,\n    IconAccent?: React.ElementType,\n    className?: string\n  ) => (\n    <div className=\"relative w-15 h-10 left-1.5\">\n      <IconMask\n        className={cn(\"absolute inline-block\", className)}\n        color={iconColor}\n      />\n      {IconAccent && (\n        <IconAccent className=\"absolute inline-block\" color={iconColor} />\n      )}\n    </div>\n  );\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(onCreateClick)}>\n        {/* General error messages */}\n        {hasError && generalErrors.length > 0 && (\n          <div className=\"space-y-3 mb-4\">\n            {generalErrors.map((error) => (\n              <ULThemeAlert\n                key={error.id}\n                variant=\"destructive\"\n                onDismiss={() => dismiss(error.id)}\n              >\n                <ULThemeAlertTitle>\n                  {error.message || locales.errors.errorOccurred}\n                </ULThemeAlertTitle>\n              </ULThemeAlert>\n            ))}\n          </div>\n        )}\n        <ULThemeList variant=\"icon\">\n          <ULThemeListItem\n            icon={renderIcon(LockHeavyMask, LockHeavyAccent, \"opacity-[0.5]\")}\n          >\n            <ULThemeListTitle\n              children={passkeyBenefit1Title}\n            ></ULThemeListTitle>\n            <ULThemeListDescription\n              children={passkeyBenefit1Description}\n            ></ULThemeListDescription>\n          </ULThemeListItem>\n\n          <ULThemeListItem icon={renderIcon(WebAuthPlatform, undefined)}>\n            <ULThemeListTitle\n              children={passkeyBenefit2Title}\n            ></ULThemeListTitle>\n            <ULThemeListDescription\n              children={passkeyBenefit2Description}\n            ></ULThemeListDescription>\n          </ULThemeListItem>\n        </ULThemeList>\n\n        {/* Show/Hide Local Enrollment Checkbox */}\n        <FormField\n          control={form.control}\n          name=\"doNotShowAgain\"\n          render={({ field }) => (\n            <FormItem>\n              <div className=\"flex items-center ml-2 space-x-2 mb-6 justify-center\">\n                <ULThemeCheckbox\n                  id=\"doNotShowAgain\"\n                  checked={Boolean(field.value)}\n                  onCheckedChange={field.onChange}\n                  className=\"size-4.5 border-black mr-3\"\n                />\n                <Label\n                  htmlFor=\"doNotShowAgain\"\n                  className=\"text-(length:--ul-theme-font-body-text-size) cursor-pointer\"\n                >\n                  {showHideLocalEnrollmentCheckboxText}\n                </Label>\n              </div>\n            </FormItem>\n          )}\n        />\n\n        <ULThemeButton\n          type=\"submit\"\n          variant=\"primary\"\n          className=\"w-full\"\n          disabled={isSubmitting}\n        >\n          {buttonText}\n        </ULThemeButton>\n        <div className=\"mt-4 text-center\">\n          {continueButtonText && (\n            <ULThemeButton\n              variant=\"link\"\n              size=\"link\"\n              onClick={() =>\n                onCancelClick({\n                  doNotShowAgain: Boolean(form.getValues().doNotShowAgain),\n                })\n              }\n            >\n              {continueButtonText}\n            </ULThemeButton>\n          )}\n        </div>\n      </form>\n    </Form>\n  );\n}\n\nexport default Details;\n","import ULThemeLogo from \"@/components/ULThemeLogo\";\nimport ULThemeTitle from \"@/components/ULThemeTitle\";\n\nimport { usePasskeyEnrollmentLocalManager } from \"../hooks/usePasskeyEnrollmentLocalManager\";\n\nfunction Header() {\n  const { texts, locales } = usePasskeyEnrollmentLocalManager();\n\n  // Use Locales as fallback to SDK texts\n  const titleText = texts?.title || locales.heading.title;\n  const logoAltText = texts?.logoAltText || locales.heading.logoAltText;\n\n  return (\n    <>\n      <ULThemeLogo altText={logoAltText}></ULThemeLogo>\n      <ULThemeTitle className=\"mb-10\">{titleText}</ULThemeTitle>\n    </>\n  );\n}\n\nexport default Header;\n","import ULThemeCard from \"@/components/ULThemeCard\";\nimport ULThemePageLayout from \"@/components/ULThemePageLayout\";\nimport { applyAuth0Theme } from \"@/utils/theme/themeEngine\";\n\nimport Details from \"./components/Details\";\nimport Header from \"./components/Header\";\nimport { usePasskeyEnrollmentLocalManager } from \"./hooks/usePasskeyEnrollmentLocalManager\";\n\nfunction PasskeyEnrollmentLocalScreen() {\n  // Extracting attributes from hook made out of PasskeyEnrollmentLocalInstance class of Auth0 React ACUL SDK\n  const { texts, locales, passkeyEnrollmentLocalInstance } =\n    usePasskeyEnrollmentLocalManager();\n\n  // Apply theme from SDK instance when screen loads\n  applyAuth0Theme(passkeyEnrollmentLocalInstance);\n  document.title = texts?.pageTitle || locales.page.title;\n\n  return (\n    // Applying UDS theme overrides using the \"theme-universal\" class\n    <ULThemePageLayout className=\"theme-universal\">\n      <ULThemeCard className=\"w-full max-w-[400px] gap-0\">\n        <Header />\n        <Details />\n      </ULThemeCard>\n    </ULThemePageLayout>\n  );\n}\n\nexport default PasskeyEnrollmentLocalScreen;\n"],"names":["usePasskeyEnrollmentLocalManager","screen","useScreen","passkeyEnrollmentLocalInstance","usePasskeyEnrollmentLocal","texts","data","links","locales","payload","executeSafely","Details","continuePasskeyEnrollment","abortPasskeyEnrollment","form","useForm","isSubmitting","buttonText","continueButtonText","showHideLocalEnrollmentCheckboxText","passkeyBenefit1Title","passkeyBenefit1Description","passkeyBenefit2Title","passkeyBenefit2Description","iconColor","extractTokenValue","errors","hasError","dismiss","useErrors","generalErrors","err","onCreateClick","onCancelClick","formData","renderIcon","IconMask","IconAccent","className","jsxs","jsx","cn","Form","error","ULThemeAlert","ULThemeAlertTitle","ULThemeList","ULThemeListItem","LockHeavyMask","LockHeavyAccent","ULThemeListTitle","ULThemeListDescription","WebAuthPlatform","FormField","field","FormItem","ULThemeCheckbox","Label","ULThemeButton","Header","titleText","logoAltText","Fragment","ULThemeLogo","ULThemeTitle","PasskeyEnrollmentLocalScreen","applyAuth0Theme","ULThemePageLayout","ULThemeCard"],"mappings":"soCAiBaA,EAAmC,IAAM,CACpD,MAAMC,EAAgDC,EAAA,EAChDC,EACJC,EAAA,EAEI,CAAE,MAAAC,EAAO,KAAAC,EAAM,MAAAC,CAAA,EAAUN,EAoB/B,MAAO,CACL,QAAAO,GACA,MAAAD,EACA,+BAAAJ,EACA,0BAtBgC,MAChCM,GACkB,CAClBC,EACE,sCAAsC,KAAK,UAAUD,CAAO,CAAC,GAC7D,IAAMN,EAA+B,0BAA0BM,CAAO,CAAA,CAE1E,EAgBE,uBAd6B,MAC7BA,GACkB,CAClBC,EACE,8CAA8C,KAAK,UAAUD,CAAO,CAAC,GACrE,IAAMN,EAA+B,uBAAuBM,CAAO,CAAA,CAEvE,EAQE,MAAQJ,GAAS,CAAA,EACjB,KAAOC,GAAQ,CAAA,CAAC,CAEpB,ECjBA,SAASK,IAAU,CAEjB,KAAM,CAAE,MAAAN,EAAO,QAAAG,EAAS,0BAAAI,EAA2B,uBAAAC,CAAA,EACjDb,EAAA,EAGIc,EAAOC,EAAuB,CAClC,cAAe,CACb,eAAgB,EAAA,CAClB,CACD,EACK,CACJ,UAAW,CAAE,aAAAC,CAAA,CAAa,EACxBF,EAGEG,EACJZ,GAAO,kBAAoBG,EAAQ,QAAQ,wBACvCU,EACJb,GAAO,oBACPG,EAAQ,QAAQ,iCACZW,EACJd,GAAO,cAAgBG,EAAQ,QAAQ,oCACnCY,EACJf,GAAO,sBAAwBG,EAAQ,QAAQ,qBAC3Ca,EACJhB,GAAO,4BACPG,EAAQ,QAAQ,2BACZc,EACJjB,GAAO,sBAAwBG,EAAQ,QAAQ,qBAC3Ce,EACJlB,GAAO,4BACPG,EAAQ,QAAQ,2BAGZgB,EAAYC,EAAkB,wBAAwB,EAEtD,CAAE,OAAAC,EAAQ,SAAAC,EAAU,QAAAC,CAAA,EAAYC,EAAA,EAGhCC,EAA6BJ,EAChC,OAAO,OAAO,EACd,OAAQK,GAAQ,CAACA,EAAI,KAAK,EAOvBC,EAAgB,MAAO1B,GAAwB,CACnD,MAAMM,EACJN,GAAM,eAAiB,CAAE,eAAgB,EAAA,EAAS,CAAA,CAAC,CAEvD,EAOM2B,EAAgB,MAAOC,GAAqC,CAChE,MAAMrB,EACJqB,GAAU,eAAiB,CAAE,eAAgB,EAAA,EAAS,CAAA,CAAC,CAE3D,EASMC,EAAa,CACjBC,EACAC,EACAC,IAEAC,OAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACJ,EAAA,CACC,UAAWK,EAAG,wBAAyBH,CAAS,EAChD,MAAOd,CAAA,CAAA,EAERa,GACCG,EAAAA,IAACH,EAAA,CAAW,UAAU,wBAAwB,MAAOb,CAAA,CAAW,CAAA,EAEpE,EAGF,OACEgB,EAAAA,IAACE,EAAA,CAAM,GAAG5B,EACR,SAAAyB,EAAAA,KAAC,QAAK,SAAUzB,EAAK,aAAakB,CAAa,EAE5C,SAAA,CAAAL,GAAYG,EAAc,OAAS,GAClCU,EAAAA,IAAC,MAAA,CAAI,UAAU,iBACZ,SAAAV,EAAc,IAAKa,GAClBH,EAAAA,IAACI,EAAA,CAEC,QAAQ,cACR,UAAW,IAAMhB,EAAQe,EAAM,EAAE,EAEjC,eAACE,EAAA,CACE,SAAAF,EAAM,SAAWnC,EAAQ,OAAO,aAAA,CACnC,CAAA,EANKmC,EAAM,EAAA,CAQd,EACH,EAEFJ,EAAAA,KAACO,EAAA,CAAY,QAAQ,OACnB,SAAA,CAAAP,EAAAA,KAACQ,EAAA,CACC,KAAMZ,EAAWa,EAAeC,EAAiB,eAAe,EAEhE,SAAA,CAAAT,EAAAA,IAACU,EAAA,CACC,SAAU9B,CAAA,CAAA,EAEZoB,EAAAA,IAACW,EAAA,CACC,SAAU9B,CAAA,CAAA,CACX,CAAA,CAAA,SAGF0B,EAAA,CAAgB,KAAMZ,EAAWiB,EAAiB,MAAS,EAC1D,SAAA,CAAAZ,EAAAA,IAACU,EAAA,CACC,SAAU5B,CAAA,CAAA,EAEZkB,EAAAA,IAACW,EAAA,CACC,SAAU5B,CAAA,CAAA,CACX,CAAA,CACH,CAAA,EACF,EAGAiB,EAAAA,IAACa,EAAA,CACC,QAASvC,EAAK,QACd,KAAK,iBACL,OAAQ,CAAC,CAAE,MAAAwC,WACRC,EAAA,CACC,SAAAhB,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAC,EAAAA,IAACgB,EAAA,CACC,GAAG,iBACH,QAAS,EAAQF,EAAM,MACvB,gBAAiBA,EAAM,SACvB,UAAU,4BAAA,CAAA,EAEZd,EAAAA,IAACiB,EAAA,CACC,QAAQ,iBACR,UAAU,8DAET,SAAAtC,CAAA,CAAA,CACH,CAAA,CACF,CAAA,CACF,CAAA,CAAA,EAIJqB,EAAAA,IAACkB,EAAA,CACC,KAAK,SACL,QAAQ,UACR,UAAU,SACV,SAAU1C,EAET,SAAAC,CAAA,CAAA,EAEHuB,EAAAA,IAAC,MAAA,CAAI,UAAU,mBACZ,SACCA,EAAAA,IAACkB,EAAA,CACC,QAAQ,OACR,KAAK,OACL,QAAS,IACPzB,EAAc,CACZ,eAAgB,EAAQnB,EAAK,UAAA,EAAY,cAAc,CACxD,EAGF,SAAAI,CAAA,CAAA,CACH,CAEJ,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CCjNA,SAASyC,IAAS,CAChB,KAAM,CAAE,MAAAtD,EAAO,QAAAG,CAAA,EAAYR,EAAA,EAGrB4D,EAAYvD,GAAO,OAASG,EAAQ,QAAQ,MAC5CqD,EAAcxD,GAAO,aAAeG,EAAQ,QAAQ,YAE1D,OACE+B,EAAAA,KAAAuB,WAAA,CACE,SAAA,CAAAtB,EAAAA,IAACuB,EAAA,CAAY,QAASF,CAAA,CAAa,EACnCrB,EAAAA,IAACwB,EAAA,CAAa,UAAU,QAAS,SAAAJ,CAAA,CAAU,CAAA,EAC7C,CAEJ,CCVA,SAASK,IAA+B,CAEtC,KAAM,CAAE,MAAA5D,EAAO,QAAAG,EAAS,+BAAAL,CAAA,EACtBH,EAAA,EAGF,OAAAkE,EAAgB/D,CAA8B,EAC9C,SAAS,MAAQE,GAAO,WAAaG,EAAQ,KAAK,YAI/C2D,EAAA,CAAkB,UAAU,kBAC3B,SAAA5B,EAAAA,KAAC6B,EAAA,CAAY,UAAU,6BACrB,SAAA,CAAA5B,EAAAA,IAACmB,GAAA,EAAO,QACPhD,GAAA,CAAA,CAAQ,CAAA,CAAA,CACX,CAAA,CACF,CAEJ"}